import{r as i,Q as Vt,j as e,a as $t,R as Bt,t as _t,c as Ut,S as Ze,b as is,J as Kt,C as Ht,z as Gt,d as Qt,M as Yt,L as Ie,D as te,O as _s,e as ba,P as fs,f as Ss,H as Wt,g as Jt,h as ya,U as ls,F as Xt,i as Zt,k as en,l as Us,m as sn,n as an,A as Cs,o as tn,p as nn,q as ce,u as rn,N as ln,s as va,I as wa,v as Sa,w as Ca,x as Aa,y as dn,B as Da,E as Pa,G as ka,K as Ma,T as oe,V as Ta,W as cn,X as Ia,Y as Ra,Z as on,_ as mn,$ as xn,a0 as As,a1 as Fa,a2 as Ds,a3 as La,a4 as Ks,a5 as Ps,a6 as ks,a7 as Ea,a8 as za,a9 as un,aa as hn,ab as pn,ac as gn,ad as fn,ae as Hs,af as jn,ag as ca,ah as Fe,ai as $e,aj as Oa,ak as Nn,al as bn,am as qa,an as Va,ao as yn,ap as $a,aq as Ba,ar as _a,as as vn,at as Ua,au as wn,av as Ka,aw as Ha,ax as Sn,ay as Cn,az as Ga,aA as An,aB as Dn,aC as Qa,aD as Pn,aE as kn,aF as ne,aG as J,aH as X,aI as E,aJ as Ee,aK as Pe,aL as k,aM as ze,aN as Oe,aO as Ya,aP as Mn,aQ as Wa,aR as Ja,aS as Xa,aT as Za,aU as et,aV as Tn,aW as oa,aX as rs,aY as js,aZ as Os,a_ as Ns,a$ as qe,b0 as st,b1 as at,b2 as he,b3 as Gs,b4 as In,b5 as Rn,b6 as Fn,b7 as Ln,b8 as Re,b9 as tt,ba as nt,bb as En,bc as Ms,bd as T,be as es,bf as rt,bg as zn,bh as it,bi as lt,bj as dt,bk as ct,bl as ot,bm as mt,bn as xt,bo as On,bp as qn,bq as Vn}from"./vendor-EtxRvF86.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function $n({children:s}){const[a]=i.useState(()=>new Vt({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return e.jsxs($t,{client:a,children:[s,e.jsx(Bt,{initialIsOpen:!1})]})}function h(...s){return _t(Ut(s))}const Qs=is("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=i.forwardRef(({className:s,variant:a,size:t,asChild:n=!1,...r},o)=>{const d=n?Ze:"button";return e.jsx(d,{className:h(Qs({variant:a,size:t,className:s})),ref:o,...r})});w.displayName="Button";class Bn extends i.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,t){console.error("Error caught by boundary:",a,t)}render(){var a;return this.state.hasError?e.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),e.jsx("p",{className:"text-muted-foreground",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred"}),e.jsx(w,{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function _n({children:s,...a}){return e.jsx(Kt,{...a,children:s})}function Un({children:s}){return e.jsx(Bn,{children:e.jsx(_n,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:e.jsx($n,{children:s})})})}const Kn="pk_test_bGl0ZXJhdGUtc3dpZnQtMTguY2xlcmsuYWNjb3VudHMuZGV2JA";function Hn({children:s}){return e.jsx(Ht,{publishableKey:Kn,appearance:{variables:{colorPrimary:"#000000"}},children:s})}const Gn="http://localhost:5000/api/v1",O={HOME:"/",SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",DASHBOARD:"/dashboard",PROFILE:"/profile",MEMBERS:"/members",REGISTER_MEMBER:"/members/register",MEMBERSHIPS:"/memberships",CREATE_MEMBERSHIP:"/memberships/create",PLANS:"/plans",TRAININGS:"/trainings",CREATE_TRAINING:"/trainings/create"};function ut(){const{theme:s,setTheme:a}=Gt();return e.jsxs(w,{variant:"ghost",size:"icon",onClick:()=>a(s==="light"?"dark":"light"),children:[e.jsx(Qt,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Yt,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function Qn(){return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx("header",{className:"border-b sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs(Ie,{to:O.HOME,className:"flex items-center gap-2 text-2xl font-bold",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),"Brofit 2.0"]}),e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("a",{href:"#facilities",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-3 py-2 hidden sm:inline-flex",children:"Facilities"}),e.jsx(ut,{})]})]})}),e.jsx("main",{className:"flex-1",children:e.jsx(_s,{})}),e.jsx("footer",{className:"border-t py-8 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4 text-center text-sm text-muted-foreground space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Brofit 2.0 — Train Hard, Stay Humble"}),e.jsx("p",{children:"© 2026 Brofit 2.0. All rights reserved."})]})})]})}const C=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));C.displayName="Card";const de=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("flex flex-col space-y-1.5 p-6",s),...a}));de.displayName="CardHeader";const ge=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("text-2xl font-semibold leading-none tracking-tight",s),...a}));ge.displayName="CardTitle";const Ye=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("text-sm text-muted-foreground",s),...a}));Ye.displayName="CardDescription";const V=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("p-6 pt-0",s),...a}));V.displayName="CardContent";const Yn=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:h("flex items-center p-6 pt-0",s),...a}));Yn.displayName="CardFooter";const Wn=is("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function W({className:s,variant:a,...t}){return e.jsx("div",{className:h(Wn({variant:a}),s),...t})}const se=i.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...n},r)=>e.jsx(ba,{ref:r,decorative:t,orientation:a,className:h("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));se.displayName=ba.displayName;const Jn=[{icon:te,title:"Full Equipment Zone",description:"State-of-the-art machines, free weights, and functional training rigs for every fitness level."},{icon:Wt,title:"Cardio Section",description:"Dedicated cardio area with treadmills, ellipticals, cycles, and rowing machines to keep your heart pumping."},{icon:Jt,title:"Clean Washrooms",description:"Hygienic, well-maintained washrooms available for all members. Freshness guaranteed."},{icon:ya,title:"Changing Rooms",description:"Private, secure changing rooms with lockers so you can gear up comfortably before and after your workout."},{icon:ls,title:"Separate Ladies Timing",description:"Dedicated time slots exclusively for women, ensuring a comfortable and private workout environment."},{icon:Xt,title:"Expert Trainers",description:"Certified trainers who craft personalized plans and guide you every step of the way."}],Xn=[{value:"500+",label:"Active Members"},{value:"5+",label:"Years Running"},{value:"6AM–10PM",label:"Open Daily"},{value:"100%",label:"Commitment"}],Zn=[{name:"Rahul S.",text:"Brofit changed my life. The trainers genuinely care and the equipment is top-notch. I've never felt more confident.",rating:5},{name:"Priya M.",text:"As a woman, the separate ladies timing is a game-changer. I feel safe and focused during my workouts. Love this place!",rating:5},{name:"Amit K.",text:"Clean facilities, great cardio section, and the changing rooms are always spotless. Best gym in the area, hands down.",rating:5}];function er(){return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary/10 via-background to-primary/5",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-primary/20 via-transparent to-transparent opacity-60"}),e.jsx("div",{className:"container relative mx-auto px-4 py-24 md:py-36",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[e.jsx(W,{variant:"secondary",className:"text-sm px-4 py-1",children:"Now Open — New Batch Starting Soon"}),e.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight leading-tight",children:["Your Body Deserves"," ",e.jsx("span",{className:"text-primary",children:"The Best Gym"})," in Town"]}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"At Brofit, we don't just build muscles — we build discipline, confidence, and a healthier you. Walk in unfit, walk out unstoppable."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center pt-4",children:[e.jsxs("a",{href:"tel:+919999999999",className:"inline-flex items-center gap-2 bg-primary text-primary-foreground px-8 py-3 rounded-lg font-semibold text-lg hover:bg-primary/90 transition-colors",children:[e.jsx(fs,{className:"h-5 w-5"}),"Call Now"]}),e.jsxs("a",{href:"#facilities",className:"inline-flex items-center gap-2 border border-border px-8 py-3 rounded-lg font-semibold text-lg hover:bg-accent transition-colors",children:["Explore Facilities",e.jsx(Ss,{className:"h-5 w-5"})]})]})]})})]}),e.jsx("section",{className:"border-y bg-muted/50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:Xn.map(s=>e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-primary",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.label})]},s.label))})})}),e.jsx("section",{id:"facilities",className:"py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Everything You Need, Under One Roof"}),e.jsx("p",{className:"text-muted-foreground mt-3 max-w-xl mx-auto text-lg",children:"From heavy lifting to peaceful cardio — Brofit is designed for every kind of fitness journey."})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Jn.map(s=>e.jsxs(C,{className:"p-6 hover:shadow-lg transition-shadow border-border/60 group",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:e.jsx(s.icon,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]},s.title))})]})}),e.jsx(se,{}),e.jsx("section",{className:"py-20 md:py-28 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Why People Choose Brofit"}),e.jsxs("div",{className:"space-y-4 text-left text-muted-foreground text-lg leading-relaxed",children:[e.jsx("p",{children:"Brofit isn't just another gym — it's a community. We've spent years perfecting a space where everyone feels welcome, whether you're a first-timer or a seasoned lifter."}),e.jsx("p",{children:"Our separate ladies timing ensures women have their own dedicated, comfortable space. Our changing rooms and washrooms are cleaned multiple times a day. And our cardio section? It's got everything from treadmills to rowing machines, so you'll never wait for your turn."}),e.jsx("p",{children:"With certified trainers who know their craft and a vibe that keeps you coming back — Brofit is where results happen."})]})]})})}),e.jsx("section",{className:"py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"text-center mb-14",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"What Our Members Say"})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:Zn.map(s=>e.jsxs(C,{className:"p-6",children:[e.jsx("div",{className:"flex gap-1 mb-3",children:Array.from({length:s.rating}).map((a,t)=>e.jsx(Zt,{className:"h-4 w-4 fill-primary text-primary"},t))}),e.jsxs("p",{className:"text-muted-foreground leading-relaxed mb-4",children:['"',s.text,'"']}),e.jsx("p",{className:"font-semibold text-sm",children:s.name})]},s.name))})]})}),e.jsx(se,{}),e.jsx("section",{className:"py-20 md:py-28 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4 text-center space-y-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Come Visit Us"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-xl mx-auto",children:"Drop by anytime during our working hours. No appointment needed — just walk in and feel the energy."}),e.jsxs("div",{className:"flex flex-wrap gap-8 justify-center pt-4 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(en,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Your City, Your Area"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"+91 99999 99999"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"6:00 AM – 10:00 PM"})]})]})]})})]})}function sr(){return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary/10 px-4",children:[e.jsxs(C,{className:"w-full max-w-md p-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto h-14 w-14 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(ya,{className:"h-7 w-7 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Portal"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage members, plans, trainers, and gym operations."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ie,{to:O.SIGN_IN,className:"block",children:e.jsxs(w,{size:"lg",className:"w-full gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),"Sign In"]})}),e.jsx(Ie,{to:O.SIGN_UP,className:"block",children:e.jsxs(w,{size:"lg",variant:"outline",className:"w-full gap-2",children:[e.jsx(an,{className:"h-4 w-4"}),"Sign Up"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Ie,{to:O.HOME,className:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Cs,{className:"h-3 w-3"}),"Back to Home"]})})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"Brofit 2.0"})]})]})}function ar(){return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(tn,{routing:"path",path:"/sign-in",signUpUrl:O.SIGN_UP,afterSignInUrl:O.DASHBOARD})})}function tr(){return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(nn,{routing:"path",path:O.SIGN_UP,signInUrl:O.SIGN_IN,afterSignUpUrl:O.DASHBOARD})})}function nr(){return e.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-4",children:[e.jsx("h1",{className:"text-6xl font-bold",children:"404"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Page not found"}),e.jsx(Ie,{to:O.HOME,children:e.jsx(w,{children:"Go Home"})})]})}const rr=[{element:e.jsx(Qn,{}),children:[{path:"/",element:e.jsx(er,{})}]},{path:"/admin",element:e.jsx(sr,{})},{path:"/sign-in/*",element:e.jsx(ar,{})},{path:"/sign-up/*",element:e.jsx(tr,{})},{path:"*",element:e.jsx(nr,{})}];function Ys(){return e.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:e.jsx(ce,{className:"h-8 w-8 animate-spin text-primary"})})}function ir(){const{isLoaded:s,isSignedIn:a}=rn();return s?a?e.jsx(_s,{}):e.jsx(ln,{to:O.SIGN_IN,replace:!0}):e.jsx(Ys,{})}const We=i.forwardRef(({className:s,...a},t)=>e.jsx(va,{ref:t,className:h("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));We.displayName=va.displayName;const bs=i.forwardRef(({className:s,...a},t)=>e.jsx(wa,{ref:t,className:h("aspect-square h-full w-full",s),...a}));bs.displayName=wa.displayName;const Je=i.forwardRef(({className:s,...a},t)=>e.jsx(Sa,{ref:t,className:h("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));Je.displayName=Sa.displayName;const Be=on,_e=mn,lr=xn,dr=i.forwardRef(({className:s,inset:a,children:t,...n},r)=>e.jsxs(Ca,{ref:r,className:h("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...n,children:[t,e.jsx(Ss,{className:"ml-auto"})]}));dr.displayName=Ca.displayName;const cr=i.forwardRef(({className:s,...a},t)=>e.jsx(Aa,{ref:t,className:h("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...a}));cr.displayName=Aa.displayName;const Le=i.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(dn,{children:e.jsx(Da,{ref:n,sideOffset:a,className:h("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t})}));Le.displayName=Da.displayName;const ae=i.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(Pa,{ref:n,className:h("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...t}));ae.displayName=Pa.displayName;const or=i.forwardRef(({className:s,children:a,checked:t,...n},r)=>e.jsxs(ka,{ref:r,className:h("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ma,{children:e.jsx(oe,{className:"h-4 w-4"})})}),a]}));or.displayName=ka.displayName;const ht=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(Ta,{ref:n,className:h("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ma,{children:e.jsx(cn,{className:"h-2 w-2 fill-current"})})}),a]}));ht.displayName=Ta.displayName;const Ws=i.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(Ia,{ref:n,className:h("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));Ws.displayName=Ia.displayName;const Xe=i.forwardRef(({className:s,...a},t)=>e.jsx(Ra,{ref:t,className:h("-mx-1 my-1 h-px bg-muted",s),...a}));Xe.displayName=Ra.displayName;const Es=768;function mr(){const[s,a]=i.useState(void 0);return i.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Es-1}px)`),n=()=>{a(window.innerWidth<Es)};return t.addEventListener("change",n),a(window.innerWidth<Es),()=>t.removeEventListener("change",n)},[]),!!s}const z=i.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:h("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));z.displayName="Input";const pt=Ea,xr=Fa,gt=i.forwardRef(({className:s,...a},t)=>e.jsx(As,{className:h("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));gt.displayName=As.displayName;const ur=is("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Js=i.forwardRef(({side:s="right",className:a,children:t,...n},r)=>e.jsxs(xr,{children:[e.jsx(gt,{}),e.jsxs(Ds,{ref:r,className:h(ur({side:s}),a),...n,children:[t,e.jsxs(La,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Js.displayName=Ds.displayName;const Xs=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",s),...a});Xs.displayName="SheetHeader";const Zs=i.forwardRef(({className:s,...a},t)=>e.jsx(Ps,{ref:t,className:h("text-lg font-semibold text-foreground",s),...a}));Zs.displayName=Ps.displayName;const ea=i.forwardRef(({className:s,...a},t)=>e.jsx(ks,{ref:t,className:h("text-sm text-muted-foreground",s),...a}));ea.displayName=ks.displayName;function S({className:s,...a}){return e.jsx("div",{className:h("animate-pulse rounded-md bg-muted",s),...a})}const hr=un,pr=hn,gr=pn,ft=i.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(za,{ref:n,sideOffset:a,className:h("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...t}));ft.displayName=za.displayName;const fr="sidebar_state",jr=60*60*24*7,Nr="16rem",br="18rem",yr="3rem",vr="b",jt=i.createContext(null);function Ts(){const s=i.useContext(jt);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const Nt=i.forwardRef(({defaultOpen:s=!0,open:a,onOpenChange:t,className:n,style:r,children:o,...d},g)=>{const x=mr(),[D,l]=i.useState(!1),[v,u]=i.useState(s),M=a??v,m=i.useCallback(R=>{const b=typeof R=="function"?R(M):R;t?t(b):u(b),document.cookie=`${fr}=${b}; path=/; max-age=${jr}`},[t,M]),j=i.useCallback(()=>x?l(R=>!R):m(R=>!R),[x,m,l]);i.useEffect(()=>{const R=b=>{b.key===vr&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),j())};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[j]);const N=M?"expanded":"collapsed",A=i.useMemo(()=>({state:N,open:M,setOpen:m,isMobile:x,openMobile:D,setOpenMobile:l,toggleSidebar:j}),[N,M,m,x,D,l,j]);return e.jsx(jt.Provider,{value:A,children:e.jsx(hr,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":Nr,"--sidebar-width-icon":yr,...r},className:h("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:g,...d,children:o})})})});Nt.displayName="SidebarProvider";const bt=i.forwardRef(({side:s="left",variant:a="sidebar",collapsible:t="offcanvas",className:n,children:r,...o},d)=>{const{isMobile:g,state:x,openMobile:D,setOpenMobile:l}=Ts();return t==="none"?e.jsx("div",{className:h("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:d,...o,children:r}):g?e.jsx(pt,{open:D,onOpenChange:l,...o,children:e.jsxs(Js,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] border-r bg-sidebar/95 p-0 text-sidebar-foreground backdrop-blur supports-[backdrop-filter]:bg-sidebar/80 [&>button]:hidden",style:{"--sidebar-width":br},side:s,children:[e.jsxs(Xs,{className:"sr-only",children:[e.jsx(Zs,{children:"Sidebar"}),e.jsx(ea,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})}):e.jsxs("div",{ref:d,className:"group peer hidden text-sidebar-foreground md:block","data-state":x,"data-collapsible":x==="collapsed"?t:"","data-variant":a,"data-side":s,children:[e.jsx("div",{className:h("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:h("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});bt.displayName="Sidebar";const yt=i.forwardRef(({className:s,onClick:a,...t},n)=>{const{toggleSidebar:r}=Ts();return e.jsxs(w,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:h("h-7 w-7",s),onClick:o=>{a==null||a(o),r()},...t,children:[e.jsx(gn,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});yt.displayName="SidebarTrigger";const wr=i.forwardRef(({className:s,...a},t)=>{const{toggleSidebar:n}=Ts();return e.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:h("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...a})});wr.displayName="SidebarRail";const vt=i.forwardRef(({className:s,...a},t)=>e.jsx("main",{ref:t,className:h("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...a}));vt.displayName="SidebarInset";const Sr=i.forwardRef(({className:s,...a},t)=>e.jsx(z,{ref:t,"data-sidebar":"input",className:h("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...a}));Sr.displayName="SidebarInput";const wt=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"header",className:h("flex flex-col gap-2 p-2",s),...a}));wt.displayName="SidebarHeader";const St=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"footer",className:h("flex flex-col gap-2 p-2",s),...a}));St.displayName="SidebarFooter";const Cr=i.forwardRef(({className:s,...a},t)=>e.jsx(se,{ref:t,"data-sidebar":"separator",className:h("mx-2 w-auto bg-sidebar-border",s),...a}));Cr.displayName="SidebarSeparator";const Ct=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"content",className:h("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...a}));Ct.displayName="SidebarContent";const At=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group",className:h("relative flex w-full min-w-0 flex-col p-2",s),...a}));At.displayName="SidebarGroup";const Dt=i.forwardRef(({className:s,asChild:a=!1,...t},n)=>{const r=a?Ze:"div";return e.jsx(r,{ref:n,"data-sidebar":"group-label",className:h("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...t})});Dt.displayName="SidebarGroupLabel";const Ar=i.forwardRef(({className:s,asChild:a=!1,...t},n)=>{const r=a?Ze:"button";return e.jsx(r,{ref:n,"data-sidebar":"group-action",className:h("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...t})});Ar.displayName="SidebarGroupAction";const Pt=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group-content",className:h("w-full text-sm",s),...a}));Pt.displayName="SidebarGroupContent";const qs=i.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu",className:h("flex w-full min-w-0 flex-col gap-1",s),...a}));qs.displayName="SidebarMenu";const Vs=i.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,"data-sidebar":"menu-item",className:h("group/menu-item relative",s),...a}));Vs.displayName="SidebarMenuItem";const Dr=is("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),$s=i.forwardRef(({asChild:s=!1,isActive:a=!1,variant:t="default",size:n="default",tooltip:r,className:o,...d},g)=>{const x=s?Ze:"button",{isMobile:D,state:l}=Ts(),v=e.jsx(x,{ref:g,"data-sidebar":"menu-button","data-size":n,"data-active":a,className:h(Dr({variant:t,size:n}),o),...d});return r?(typeof r=="string"&&(r={children:r}),e.jsxs(pr,{children:[e.jsx(gr,{asChild:!0,children:v}),e.jsx(ft,{side:"right",align:"center",hidden:l!=="collapsed"||D,...r})]})):v});$s.displayName="SidebarMenuButton";const Pr=i.forwardRef(({className:s,asChild:a=!1,showOnHover:t=!1,...n},r)=>{const o=a?Ze:"button";return e.jsx(o,{ref:r,"data-sidebar":"menu-action",className:h("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...n})});Pr.displayName="SidebarMenuAction";const kr=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:h("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...a}));kr.displayName="SidebarMenuBadge";const Mr=i.forwardRef(({className:s,showIcon:a=!1,...t},n)=>{const r=i.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:h("flex h-8 items-center gap-2 rounded-md px-2",s),...t,children:[a&&e.jsx(S,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(S,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});Mr.displayName="SidebarMenuSkeleton";const Tr=i.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:h("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...a}));Tr.displayName="SidebarMenuSub";const Ir=i.forwardRef(({...s},a)=>e.jsx("li",{ref:a,...s}));Ir.displayName="SidebarMenuSubItem";const Rr=i.forwardRef(({asChild:s=!1,size:a="md",isActive:t,className:n,...r},o)=>{const d=s?Ze:"a";return e.jsx(d,{ref:o,"data-sidebar":"menu-sub-button","data-size":a,"data-active":t,className:h("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});Rr.displayName="SidebarMenuSubButton";function Fr(){var o,d,g,x,D,l,v;const{signOut:s}=fn(),{user:a}=Hs(),t=jn(),n=[{name:"Dashboard",href:O.DASHBOARD,icon:ca},{name:"Members",href:O.MEMBERS,icon:ls},{name:"Plans",href:O.PLANS,icon:Fe},{name:"Memberships",href:O.MEMBERSHIPS,icon:Fe},{name:"Trainings",href:O.TRAININGS,icon:te},{name:"Profile",href:O.PROFILE,icon:$e}],r=u=>t.pathname===u;return e.jsx(Nt,{children:e.jsxs("div",{className:"flex min-h-screen w-full overflow-hidden",children:[e.jsxs(bt,{collapsible:"icon",children:[e.jsx(wt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-2",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:e.jsx(ca,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none group-data-[collapsible=icon]:hidden",children:[e.jsx("span",{className:"font-semibold",children:"Brofit 2.0"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Fitness Management"})]})]})}),e.jsx(Ct,{children:e.jsxs(At,{children:[e.jsx(Dt,{children:"Navigation"}),e.jsx(Pt,{children:e.jsx(qs,{children:n.map(u=>{const M=u.icon;return e.jsx(Vs,{children:e.jsx($s,{asChild:!0,isActive:r(u.href),tooltip:u.name,children:e.jsxs(Ie,{to:u.href,children:[e.jsx(M,{}),e.jsx("span",{children:u.name})]})})},u.name)})})})]})}),e.jsx(St,{children:e.jsx(qs,{children:e.jsx(Vs,{children:e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs($s,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(We,{className:"h-8 w-8 rounded-lg",children:[e.jsx(bs,{src:a==null?void 0:a.imageUrl,alt:(a==null?void 0:a.fullName)||""}),e.jsxs(Je,{className:"rounded-lg",children:[(o=a==null?void 0:a.firstName)==null?void 0:o[0],(d=a==null?void 0:a.lastName)==null?void 0:d[0]]})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:a==null?void 0:a.fullName}),e.jsx("span",{className:"truncate text-xs",children:(g=a==null?void 0:a.primaryEmailAddress)==null?void 0:g.emailAddress})]}),e.jsx(Oa,{className:"ml-auto size-4"})]})}),e.jsxs(Le,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:"bottom",align:"end",sideOffset:4,children:[e.jsx(Ws,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[e.jsxs(We,{className:"h-8 w-8 rounded-lg",children:[e.jsx(bs,{src:a==null?void 0:a.imageUrl,alt:(a==null?void 0:a.fullName)||""}),e.jsxs(Je,{className:"rounded-lg",children:[(x=a==null?void 0:a.firstName)==null?void 0:x[0],(D=a==null?void 0:a.lastName)==null?void 0:D[0]]})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:a==null?void 0:a.fullName}),e.jsx("span",{className:"truncate text-xs",children:(l=a==null?void 0:a.primaryEmailAddress)==null?void 0:l.emailAddress})]})]})}),e.jsx(Xe,{}),e.jsx(ae,{asChild:!0,children:e.jsxs(Ie,{to:O.PROFILE,className:"cursor-pointer",children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Profile"]})}),e.jsx(Xe,{}),e.jsxs(ae,{className:"cursor-pointer text-red-600",onClick:()=>s(),children:[e.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})})})})]}),e.jsxs(vt,{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 shrink-0 items-center gap-2 border-b bg-background px-4",children:[e.jsx(yt,{className:"-ml-1"}),e.jsx(se,{orientation:"vertical",className:"mr-2 h-4"}),e.jsxs("div",{className:"flex flex-1 items-center justify-between gap-2",children:[e.jsx("h1",{className:"truncate text-lg font-semibold",children:((v=n.find(u=>r(u.href)))==null?void 0:v.name)||"Brofit 2.0"}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(bn,{hidePersonal:!0,afterCreateOrganizationUrl:O.DASHBOARD,afterSelectOrganizationUrl:O.DASHBOARD,appearance:{elements:{rootBox:"flex items-center",organizationSwitcherTrigger:"px-2 py-1.5 md:px-3 md:py-2 rounded-md hover:bg-accent text-foreground text-sm"}}}),e.jsx(ut,{})]})]})]}),e.jsx("main",{className:"flex flex-1 flex-col gap-4 p-4 md:p-6",children:e.jsx(_s,{})})]})]})})}function xe({title:s,description:a,actions:t}){return e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s}),a&&e.jsx("p",{className:"text-muted-foreground mt-1",children:a})]}),t&&e.jsx("div",{className:"flex gap-2",children:t})]})}function Lr(){const{user:s}=Hs();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Dashboard",description:`Welcome back, ${(s==null?void 0:s.firstName)||"User"}!`}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(C,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Total Members"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:"--"})]}),e.jsxs(C,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Active Memberships"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:"--"})]}),e.jsxs(C,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Trainers"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:"--"})]})]}),e.jsxs(C,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsx("p",{className:"text-muted-foreground",children:"Your dashboard is ready! More features coming soon."})]})]})}function Er(){var a,t,n,r;const{user:s}=Hs();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Profile",description:"Manage your account settings"}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(We,{className:"h-24 w-24",children:[e.jsx(bs,{src:s==null?void 0:s.imageUrl,alt:(s==null?void 0:s.fullName)||""}),e.jsxs(Je,{className:"text-2xl",children:[(a=s==null?void 0:s.firstName)==null?void 0:a[0],(t=s==null?void 0:s.lastName)==null?void 0:t[0]]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s==null?void 0:s.fullName}),e.jsx("p",{className:"text-muted-foreground",children:(n=s==null?void 0:s.primaryEmailAddress)==null?void 0:n.emailAddress})]})]})}),e.jsxs(C,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),e.jsxs("dl",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Email"}),e.jsx("dd",{className:"font-medium",children:(r=s==null?void 0:s.primaryEmailAddress)==null?void 0:r.emailAddress})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Name"}),e.jsx("dd",{className:"font-medium",children:s==null?void 0:s.fullName})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Member Since"}),e.jsx("dd",{className:"font-medium",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString():"--"})]})]})]})]})}const Is=Ea,zr=Fa,kt=i.forwardRef(({className:s,...a},t)=>e.jsx(As,{ref:t,className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));kt.displayName=As.displayName;const ds=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(zr,{children:[e.jsx(kt,{}),e.jsxs(Ds,{ref:n,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(La,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ds.displayName=Ds.displayName;const cs=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});cs.displayName="DialogHeader";const sa=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});sa.displayName="DialogFooter";const os=i.forwardRef(({className:s,...a},t)=>e.jsx(Ps,{ref:t,className:h("text-lg font-semibold leading-none tracking-tight",s),...a}));os.displayName=Ps.displayName;const ms=i.forwardRef(({className:s,...a},t)=>e.jsx(ks,{ref:t,className:h("text-sm text-muted-foreground",s),...a}));ms.displayName=ks.displayName;const Or=is("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=i.forwardRef(({className:s,...a},t)=>e.jsx(qa,{ref:t,className:h(Or(),s),...a}));f.displayName=qa.displayName;const fe=i.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:h("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a}));fe.displayName="Textarea";const ss=An,as=Dn,Ge=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(Va,{ref:n,className:h("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(yn,{asChild:!0,children:e.jsx($a,{className:"h-4 w-4 opacity-50"})})]}));Ge.displayName=Va.displayName;const Mt=i.forwardRef(({className:s,...a},t)=>e.jsx(Ba,{ref:t,className:h("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Oa,{className:"h-4 w-4"})}));Mt.displayName=Ba.displayName;const Tt=i.forwardRef(({className:s,...a},t)=>e.jsx(_a,{ref:t,className:h("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx($a,{className:"h-4 w-4"})}));Tt.displayName=_a.displayName;const Qe=i.forwardRef(({className:s,children:a,position:t="popper",...n},r)=>e.jsx(vn,{children:e.jsxs(Ua,{ref:r,className:h("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(Mt,{}),e.jsx(wn,{className:h("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Tt,{})]})}));Qe.displayName=Ua.displayName;const qr=i.forwardRef(({className:s,...a},t)=>e.jsx(Ka,{ref:t,className:h("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));qr.displayName=Ka.displayName;const pe=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(Ha,{ref:n,className:h("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Sn,{children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsx(Cn,{children:a})]}));pe.displayName=Ha.displayName;const Vr=i.forwardRef(({className:s,...a},t)=>e.jsx(Ga,{ref:t,className:h("-mx-1 my-1 h-px bg-muted",s),...a}));Vr.displayName=Ga.displayName;const Me=i.forwardRef(({className:s,...a},t)=>e.jsx(Qa,{ref:t,className:h("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(Pn,{className:h("flex items-center justify-center text-current"),children:e.jsx(oe,{className:"h-4 w-4"})})}));Me.displayName=Qa.displayName;const P=kn.create({baseURL:Gn,headers:{"Content-Type":"application/json"},withCredentials:!0});P.interceptors.request.use(s=>s,s=>Promise.reject(s));P.interceptors.response.use(s=>s,s=>{var a,t,n;return((a=s.response)==null?void 0:a.status)===401?console.error("Unauthorized access"):((t=s.response)==null?void 0:t.status)===403?console.error("Access forbidden"):((n=s.response)==null?void 0:n.status)===500&&console.error("Server error:",s.response.data),Promise.reject(s)});const ts={getAllMembers:async(s=1,a=100)=>(await P.get("/members",{params:{page:s,limit:a}})).data,searchMembers:async s=>(await P.get("/members/search",{params:s})).data,getMemberStats:async()=>(await P.get("/members/stats")).data,getMemberById:async s=>(await P.get(`/members/${s}`)).data,createMember:async s=>(await P.post("/members",s)).data,updateMember:async(s,a)=>(await P.patch(`/members/${s}`,a)).data,deleteMember:async s=>(await P.delete(`/members/${s}`)).data};function aa(s=1,a=100){return ne({queryKey:["members",s,a],queryFn:()=>ts.getAllMembers(s,a)})}function $r(s){return ne({queryKey:["members","search",s],queryFn:()=>ts.searchMembers(s),enabled:!!s.q})}function Br(){return ne({queryKey:["members","stats"],queryFn:()=>ts.getMemberStats()})}function _r(){const s=J();return X({mutationFn:a=>ts.createMember(a),onSuccess:a=>{s.invalidateQueries({queryKey:["members"]}),E.success(a.message||"Member created successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create member")}})}function Ur(){const s=J();return X({mutationFn:({memberId:a,data:t})=>ts.updateMember(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["members"]}),s.invalidateQueries({queryKey:["members",t.memberId]}),E.success(a.message||"Member updated successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update member")}})}function Kr(){const s=J();return X({mutationFn:a=>ts.deleteMember(a),onSuccess:a=>{s.invalidateQueries({queryKey:["members"]}),E.success(a.message||"Member deleted successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to delete member")}})}const Hr=Ee({firstName:k().min(1,"First name is required"),lastName:k().min(1,"Last name is required"),email:k().email("Invalid email address"),phone:k().min(1,"Phone number is required"),dateOfBirth:k().min(1,"Date of birth is required"),gender:k().min(1,"Gender is required"),joinDate:k().min(1,"Join date is required"),notes:k().optional(),isActive:Pe().optional()});function Gr({member:s,open:a,onOpenChange:t}){const n=Ur(),[r,o]=i.useState(s.gender),[d,g]=i.useState(s.isActive),{register:x,handleSubmit:D,formState:{errors:l}}=ze({resolver:Oe(Hr),defaultValues:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,dateOfBirth:s.dateOfBirth.split("T")[0],gender:s.gender,joinDate:s.joinDate.split("T")[0],notes:s.notes||"",isActive:s.isActive}}),v=async u=>{n.mutate({memberId:s.id,data:{...u,gender:r,isActive:d}},{onSuccess:()=>{t(!1)}})};return e.jsx(Is,{open:a,onOpenChange:t,children:e.jsxs(ds,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(cs,{children:[e.jsx(os,{children:"Edit Member"}),e.jsx(ms,{children:"Update member information. All changes will be saved immediately."})]}),e.jsxs("form",{onSubmit:D(v),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"firstName",children:"First Name *"}),e.jsx(z,{id:"firstName",...x("firstName"),placeholder:"John"}),l.firstName&&e.jsx("p",{className:"text-sm text-destructive",children:l.firstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(z,{id:"lastName",...x("lastName"),placeholder:"Doe"}),l.lastName&&e.jsx("p",{className:"text-sm text-destructive",children:l.lastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"email",children:"Email *"}),e.jsx(z,{id:"email",type:"email",...x("email"),placeholder:"john.doe@example.com"}),l.email&&e.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(z,{id:"phone",type:"tel",...x("phone"),placeholder:"+1 (555) 000-0000"}),l.phone&&e.jsx("p",{className:"text-sm text-destructive",children:l.phone.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(z,{id:"dateOfBirth",type:"date",...x("dateOfBirth")}),l.dateOfBirth&&e.jsx("p",{className:"text-sm text-destructive",children:l.dateOfBirth.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"gender",children:"Gender *"}),e.jsxs(ss,{value:r,onValueChange:o,children:[e.jsx(Ge,{id:"gender",children:e.jsx(as,{placeholder:"Select gender"})}),e.jsxs(Qe,{children:[e.jsx(pe,{value:"Male",children:"Male"}),e.jsx(pe,{value:"Female",children:"Female"}),e.jsx(pe,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"joinDate",children:"Join Date *"}),e.jsx(z,{id:"joinDate",type:"date",...x("joinDate")}),l.joinDate&&e.jsx("p",{className:"text-sm text-destructive",children:l.joinDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...x("notes"),placeholder:"Any additional information about this member...",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"isActive",checked:d,onCheckedChange:u=>g(u)}),e.jsx(f,{htmlFor:"isActive",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Active Member"})]}),e.jsxs(sa,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n.isPending,children:"Cancel"}),e.jsx(w,{type:"submit",disabled:n.isPending,children:n.isPending?"Saving...":"Save Changes"})]})]})]})})}const ke=Tn,Qr=Mn,It=i.forwardRef(({className:s,...a},t)=>e.jsx(Ya,{className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));It.displayName=Ya.displayName;const be=i.forwardRef(({className:s,...a},t)=>e.jsxs(Qr,{children:[e.jsx(It,{}),e.jsx(Wa,{ref:t,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));be.displayName=Wa.displayName;const ye=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",s),...a});ye.displayName="AlertDialogHeader";const ve=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});ve.displayName="AlertDialogFooter";const we=i.forwardRef(({className:s,...a},t)=>e.jsx(Ja,{ref:t,className:h("text-lg font-semibold",s),...a}));we.displayName=Ja.displayName;const Se=i.forwardRef(({className:s,...a},t)=>e.jsx(Xa,{ref:t,className:h("text-sm text-muted-foreground",s),...a}));Se.displayName=Xa.displayName;const Ce=i.forwardRef(({className:s,...a},t)=>e.jsx(Za,{ref:t,className:h(Qs(),s),...a}));Ce.displayName=Za.displayName;const Ae=i.forwardRef(({className:s,...a},t)=>e.jsx(et,{ref:t,className:h(Qs({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Ae.displayName=et.displayName;const Ue=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:h("w-full caption-bottom text-sm",s),...a})}));Ue.displayName="Table";const Ke=i.forwardRef(({className:s,...a},t)=>e.jsx("thead",{ref:t,className:h("[&_tr]:border-b",s),...a}));Ke.displayName="TableHeader";const He=i.forwardRef(({className:s,...a},t)=>e.jsx("tbody",{ref:t,className:h("[&_tr:last-child]:border-0",s),...a}));He.displayName="TableBody";const Yr=i.forwardRef(({className:s,...a},t)=>e.jsx("tfoot",{ref:t,className:h("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a}));Yr.displayName="TableFooter";const me=i.forwardRef(({className:s,...a},t)=>e.jsx("tr",{ref:t,className:h("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a}));me.displayName="TableRow";const F=i.forwardRef(({className:s,...a},t)=>e.jsx("th",{ref:t,className:h("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a}));F.displayName="TableHead";const L=i.forwardRef(({className:s,...a},t)=>e.jsx("td",{ref:t,className:h("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a}));L.displayName="TableCell";const Wr=i.forwardRef(({className:s,...a},t)=>e.jsx("caption",{ref:t,className:h("mt-4 text-sm text-muted-foreground",s),...a}));Wr.displayName="TableCaption";function ma(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function xa(s){const a=["bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300","bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300","bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300","bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300","bg-rose-100 text-rose-700 dark:bg-rose-900/50 dark:text-rose-300","bg-cyan-100 text-cyan-700 dark:bg-cyan-900/50 dark:text-cyan-300","bg-fuchsia-100 text-fuchsia-700 dark:bg-fuchsia-900/50 dark:text-fuchsia-300","bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300"],t=s.split("").reduce((n,r)=>n+r.charCodeAt(0),0)%a.length;return a[t]}function Jr({members:s,isLoading:a}){const[t,n]=i.useState(null),[r,o]=i.useState(null),d=Kr(),g=()=>{r&&d.mutate(r.id,{onSuccess:()=>{o(null)}})},x=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=l=>{const v=new Date,u=new Date(l);let M=v.getFullYear()-u.getFullYear();const m=v.getMonth()-u.getMonth();return(m<0||m===0&&v.getDate()<u.getDate())&&M--,M};return a?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"hidden md:block",children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{children:[e.jsx(F,{children:"Member"}),e.jsx(F,{children:"Contact"}),e.jsx(F,{children:"Age/Gender"}),e.jsx(F,{children:"Join Date"}),e.jsx(F,{children:"Status"}),e.jsx(F,{className:"text-right",children:"Actions"})]})}),e.jsx(He,{children:Array.from({length:5}).map((l,v)=>e.jsxs(me,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-9 w-9 rounded-full"}),e.jsx(S,{className:"h-4 w-32"})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{className:"h-3.5 w-36"}),e.jsx(S,{className:"h-3.5 w-24"})]})}),e.jsx(L,{children:e.jsx(S,{className:"h-4 w-16"})}),e.jsx(L,{children:e.jsx(S,{className:"h-4 w-24"})}),e.jsx(L,{children:e.jsx(S,{className:"h-5 w-16 rounded-full"})}),e.jsx(L,{children:e.jsx(S,{className:"h-8 w-8 ml-auto rounded"})})]},v))})]})}),e.jsx("div",{className:"grid gap-3 md:hidden",children:Array.from({length:4}).map((l,v)=>e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"h-10 w-10 rounded-full shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(S,{className:"h-4 w-32"}),e.jsx(S,{className:"h-3 w-40"}),e.jsx(S,{className:"h-3 w-28"})]}),e.jsx(S,{className:"h-5 w-14 rounded-full"})]})},v))})]}):!s||s.length===0?e.jsxs(C,{className:"p-12 text-center border-dashed",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(ls,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"No members found"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm max-w-sm mx-auto",children:"Get started by registering your first member to begin managing your gym roster."}),e.jsx(w,{asChild:!0,className:"mt-6",children:e.jsx(Ie,{to:O.REGISTER_MEMBER,children:"Register Member"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"hidden md:block overflow-hidden",children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{className:"bg-muted/50",children:[e.jsx(F,{children:"Member"}),e.jsx(F,{children:"Contact"}),e.jsx(F,{children:"Age / Gender"}),e.jsx(F,{children:"Join Date"}),e.jsx(F,{children:"Status"}),e.jsx(F,{className:"text-right",children:"Actions"})]})}),e.jsx(He,{children:s.map(l=>e.jsxs(me,{className:"group transition-colors",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-9 w-9",children:e.jsx(Je,{className:`text-xs font-semibold ${xa(l.firstName+l.lastName)}`,children:ma(l.firstName,l.lastName)})}),e.jsxs("span",{className:"font-medium",children:[l.firstName," ",l.lastName]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(oa,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),e.jsx("span",{className:"truncate max-w-[200px]",children:l.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(fs,{className:"h-3.5 w-3.5 shrink-0"}),l.phone]})]})}),e.jsx(L,{children:e.jsxs("span",{className:"text-sm",children:[D(l.dateOfBirth)," yrs",e.jsx("span",{className:"text-muted-foreground",children:" / "}),e.jsx("span",{className:"capitalize",children:l.gender})]})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(rs,{className:"h-3.5 w-3.5 text-muted-foreground"}),x(l.joinDate)]})}),e.jsx(L,{children:e.jsxs(W,{variant:l.isActive?"default":"secondary",className:l.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/50 dark:text-emerald-300 border-0":"bg-gray-100 text-gray-600 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 border-0",children:[e.jsx("span",{className:`mr-1.5 h-1.5 w-1.5 rounded-full inline-block ${l.isActive?"bg-emerald-500":"bg-gray-400"}`}),l.isActive?"Active":"Inactive"]})}),e.jsx(L,{className:"text-right",children:e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity",children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsxs(ae,{onClick:()=>n(l),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Edit Member"]}),e.jsxs(ae,{onClick:()=>o(l),className:"text-destructive focus:text-destructive",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Delete Member"]})]})]})})]},l.id))})]})}),e.jsx("div",{className:"grid gap-3 md:hidden",children:s.map(l=>e.jsx(C,{className:"p-4 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(We,{className:"h-10 w-10 shrink-0",children:e.jsx(Je,{className:`text-sm font-semibold ${xa(l.firstName+l.lastName)}`,children:ma(l.firstName,l.lastName)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-sm leading-tight",children:[l.firstName," ",l.lastName]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[D(l.dateOfBirth)," yrs",e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{className:"capitalize",children:l.gender})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(W,{variant:l.isActive?"default":"secondary",className:`text-[10px] px-2 py-0 h-5 ${l.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/50 dark:text-emerald-300 border-0":"bg-gray-100 text-gray-600 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 border-0"}`,children:l.isActive?"Active":"Inactive"}),e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsxs(ae,{onClick:()=>n(l),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(ae,{onClick:()=>o(l),className:"text-destructive focus:text-destructive",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(oa,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"truncate",children:l.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(fs,{className:"h-3 w-3 shrink-0"}),l.phone]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(rs,{className:"h-3 w-3 shrink-0"}),"Joined ",x(l.joinDate)]})]})]})]})},l.id))}),t&&e.jsx(Gr,{member:t,open:!!t,onOpenChange:l=>!l&&n(null)}),e.jsx(ke,{open:!!r,onOpenChange:l=>!l&&o(null),children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Delete Member"}),e.jsxs(Se,{children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),"? This action will soft delete the member. They can be reactivated later if needed."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{disabled:d.isPending,children:"Cancel"}),e.jsx(Ce,{onClick:g,disabled:d.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:d.isPending?"Deleting...":"Delete"})]})]})})]})}const ua=[{value:"all",label:"All Members",icon:ls},{value:"active",label:"Active",icon:st},{value:"inactive",label:"Inactive",icon:at}],Xr=[{key:"total",label:"Total Members",shortLabel:"Total",icon:ls,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Members",shortLabel:"Active",icon:st,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"inactive",label:"Inactive Members",shortLabel:"Inactive",icon:at,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:Gs,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function Zr(){var b;const s=qe(),[a,t]=i.useState(""),[n,r]=i.useState(""),[o,d]=i.useState("all"),{data:g,isLoading:x}=aa(1,100),{data:D,isLoading:l}=$r({q:n,page:1,limit:100}),{data:v,isLoading:u}=Br();i.useEffect(()=>{const y=setTimeout(()=>{r(a)},300);return()=>clearTimeout(y)},[a]);const M=n?D==null?void 0:D.data:g==null?void 0:g.data,m=n?l:x,j=M==null?void 0:M.filter(y=>o==="all"?!0:o==="active"?y.isActive:o==="inactive"?!y.isActive:!0),N=v==null?void 0:v.data,A=o!=="all"||!!n,R=((b=ua.find(y=>y.value===o))==null?void 0:b.label)??"Filter";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Members",description:"Manage your gym members",actions:e.jsxs(w,{onClick:()=>s(O.REGISTER_MEMBER),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Member"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:u?Array.from({length:4}).map((y,B)=>e.jsxs(C,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(S,{className:"h-3 w-14"}),e.jsx(S,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"h-4 w-24"}),e.jsx(S,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(S,{className:"h-8 w-16 mb-1"}),e.jsx(S,{className:"h-3 w-20"})]})]})]},B)):N?Xr.map(({key:y,label:B,shortLabel:K,icon:Y,colorClass:Z,bgClass:U})=>{const ee=N[y],$=N.total>0&&y!=="total"&&y!=="newThisMonth"?Math.round(ee/N.total*100):null;return e.jsxs(C,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${U}`,children:e.jsx(Y,{className:`h-4 w-4 ${Z}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:K}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:ee})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium text-muted-foreground",children:B}),e.jsx("div",{className:`rounded-lg p-2 ${U}`,children:e.jsx(Y,{className:`h-4 w-4 ${Z}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:ee}),$!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[$,"% of total members"]}),y==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Joined this month"})]})]})]},y)}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(In,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),e.jsx(z,{type:"text",placeholder:"Search members...",value:a,onChange:y=>t(y.target.value),className:"pl-9 pr-8 h-9"}),a&&e.jsx("button",{onClick:()=>{t(""),r("")},className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(Ks,{className:"h-3.5 w-3.5"})})]}),e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"sm",className:"h-9 gap-2 shrink-0",children:[e.jsx(Rn,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:o==="all"?"Filter":R}),o!=="all"&&e.jsx(W,{variant:"secondary",className:"h-5 min-w-[20px] px-1 flex items-center justify-center rounded-full text-[10px] font-bold",children:"1"})]})}),e.jsxs(Le,{align:"end",className:"w-48",children:[e.jsx(Ws,{children:"Filter by status"}),e.jsx(Xe,{}),e.jsx(lr,{value:o,onValueChange:y=>d(y),children:ua.map(({value:y,label:B,icon:K})=>e.jsxs(ht,{value:y,className:"gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),B]},y))})]})]}),A&&e.jsx(w,{variant:"ghost",size:"sm",className:"h-9 text-xs text-muted-foreground shrink-0",onClick:()=>{t(""),r(""),d("all")},children:"Reset"}),!m&&j&&e.jsxs("p",{className:"text-sm text-muted-foreground ml-auto hidden sm:block tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:j.length})," ",j.length===1?"member":"members"]})]}),e.jsx(Jr,{members:j,isLoading:m})]})}function ei(){const s=_r();return{createMember:s.mutate,createMemberAsync:s.mutateAsync,isLoading:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}const si=Ee({firstName:k().min(1,"First name is required"),lastName:k().min(1,"Last name is required"),email:k().email("Invalid email format").optional().or(Fn("")).transform(s=>s||""),phone:k().min(1,"Phone number is required"),dateOfBirth:k().min(1,"Date of birth is required"),gender:k().min(1,"Gender is required"),joinDate:k().min(1,"Join date is required"),notes:k().optional()});function ai({onSuccess:s,onCancel:a}){const{createMember:t,isLoading:n}=ei(),[r,o]=i.useState(""),d=ze({resolver:Oe(si),defaultValues:{dateOfBirth:"2008-01-01",joinDate:new Date().toISOString().split("T")[0],email:""}}),g=d.watch("firstName"),x=d.watch("lastName");i.useEffect(()=>{if(g&&x){const l=`${g.toLowerCase()}.${x.toLowerCase()}@dummy.com`;d.setValue("email",l)}},[g,x,d]);const D=l=>{const v={firstName:l.firstName,lastName:l.lastName,email:l.email,phone:l.phone,dateOfBirth:l.dateOfBirth,gender:l.gender,joinDate:l.joinDate,notes:l.notes};t(v,{onSuccess:()=>{d.reset(),s==null||s()}})};return e.jsxs("form",{onSubmit:d.handleSubmit(D),className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"firstName",children:"First Name *"}),e.jsx(z,{id:"firstName",...d.register("firstName"),placeholder:"John"}),d.formState.errors.firstName&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.firstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(z,{id:"lastName",...d.register("lastName"),placeholder:"Doe"}),d.formState.errors.lastName&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.lastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"email",children:"Email (Auto-generated)"}),e.jsx(z,{id:"email",type:"email",...d.register("email"),placeholder:"john.doe@dummy.com",disabled:!0}),d.formState.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(z,{id:"phone",type:"tel",...d.register("phone"),placeholder:"+1 (555) 123-4567"}),d.formState.errors.phone&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.phone.message})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(z,{id:"dateOfBirth",type:"date",...d.register("dateOfBirth"),max:new Date().toISOString().split("T")[0]}),d.formState.errors.dateOfBirth&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.dateOfBirth.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"gender",children:"Gender *"}),e.jsxs(ss,{value:r,onValueChange:l=>{o(l),d.setValue("gender",l)},children:[e.jsx(Ge,{id:"gender",children:e.jsx(as,{placeholder:"Select gender"})}),e.jsxs(Qe,{children:[e.jsx(pe,{value:"Male",children:"Male"}),e.jsx(pe,{value:"Female",children:"Female"}),e.jsx(pe,{value:"Other",children:"Other"})]})]}),d.formState.errors.gender&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.gender.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"joinDate",children:"Join Date *"}),e.jsx(z,{id:"joinDate",type:"date",...d.register("joinDate")}),d.formState.errors.joinDate&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.joinDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...d.register("notes"),placeholder:"Any additional information about this member...",rows:4})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(w,{type:"submit",disabled:n,children:n?"Registering...":"Register Member"}),a&&e.jsx(w,{type:"button",variant:"outline",onClick:a,disabled:n,children:"Cancel"})]})]})}function ti(){const s=qe(),a=()=>{s(O.MEMBERS)},t=()=>{s(O.MEMBERS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Register New Member",description:"Add a new member to your gym. Membership and training plans can be assigned separately."}),e.jsx(C,{className:"max-w-3xl",children:e.jsx(ai,{onSuccess:a,onCancel:t})})]})}const xs={getActivePlanTypes:async s=>(await P.get("/plans/types",{params:s?{category:s}:void 0})).data,getAllPlanTypes:async()=>(await P.get("/plans/types/all")).data,getPlanTypeById:async s=>(await P.get(`/plans/types/${s}`)).data,createPlanType:async s=>(await P.post("/plans/types",s)).data,updatePlanType:async(s,a)=>(await P.patch(`/plans/types/${s}`,a)).data,deletePlanType:async s=>(await P.delete(`/plans/types/${s}`)).data,deactivatePlanType:async s=>(await P.put(`/plans/types/${s}/deactivate`)).data};function ni(){return ne({queryKey:["plan-types"],queryFn:async()=>(await xs.getActivePlanTypes()).data})}function Bs(s){return ne({queryKey:["plan-types","category",s],queryFn:async()=>(await xs.getActivePlanTypes(s)).data})}function ri(){const s=J();return X({mutationFn:a=>xs.createPlanType(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-types"]}),E.success("Plan type created successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create plan type";E.error(t)}})}function ii(){const s=J();return X({mutationFn:({id:a,data:t})=>xs.updatePlanType(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-types"]}),s.invalidateQueries({queryKey:["plan-types",t.id]}),E.success("Plan type updated successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to update plan type";E.error(t)}})}function li(){const s=J();return X({mutationFn:a=>xs.deletePlanType(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-types"]}),E.success("Plan type deleted successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete plan type";E.error(t)}})}const di=Ee({name:k().min(1,"Name is required").max(100,"Name is too long"),description:k().optional(),category:Ln(["membership","training"]),isActive:Pe().default(!0)});function ci({open:s,onOpenChange:a,planType:t}){const n=!!t,r=ri(),o=ii(),{register:d,handleSubmit:g,reset:x,setValue:D,watch:l,formState:{errors:v,isSubmitting:u}}=ze({resolver:Oe(di),defaultValues:{name:"",description:"",category:"membership",isActive:!0}}),M=l("isActive"),m=l("category");i.useEffect(()=>{s&&x(t?{name:t.name,description:t.description||"",category:t.category,isActive:t.isActive}:{name:"",description:"",category:"membership",isActive:!0})},[s,t,x]);const j=async N=>{try{n&&t?await o.mutateAsync({id:t.id,data:{name:N.name,description:N.description||void 0,category:N.category,isActive:N.isActive}}):await r.mutateAsync({name:N.name,description:N.description||void 0,category:N.category,isActive:N.isActive}),a(!1)}catch{}};return e.jsx(Is,{open:s,onOpenChange:a,children:e.jsxs(ds,{className:"sm:max-w-[500px]",children:[e.jsxs(cs,{children:[e.jsx(os,{children:n?"Edit Plan Type":"Create Plan Type"}),e.jsx(ms,{children:n?"Update the plan type details below.":`Add a new ${m==="training"?"training":"membership"} plan type.`})]}),e.jsxs("form",{onSubmit:g(j),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(z,{id:"name",placeholder:"e.g., Cardio, Strength Training, Yoga",...d("name"),className:v.name?"border-destructive":""}),v.name&&e.jsx("p",{className:"text-sm text-destructive",children:v.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"category",children:["Category ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ss,{value:m,onValueChange:N=>D("category",N),children:[e.jsx(Ge,{id:"category",className:v.category?"border-destructive":"",children:e.jsx(as,{placeholder:"Select category"})}),e.jsxs(Qe,{children:[e.jsx(pe,{value:"membership",children:"Membership"}),e.jsx(pe,{value:"training",children:"Training"})]})]}),v.category&&e.jsx("p",{className:"text-sm text-destructive",children:v.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(fe,{id:"description",placeholder:"Describe this plan type...",rows:3,...d("description"),className:v.description?"border-destructive":""}),v.description&&e.jsx("p",{className:"text-sm text-destructive",children:v.description.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"isActive",checked:M,onCheckedChange:N=>D("isActive",N)}),e.jsx(f,{htmlFor:"isActive",className:"text-sm font-normal cursor-pointer",children:"Active (visible to members)"})]}),e.jsxs(sa,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:u,children:"Cancel"}),e.jsx(w,{type:"submit",disabled:u,children:u?"Saving...":n?"Update":"Create"})]})]})]})})}const Rs={getVariantsByPlanType:async(s,a=!0)=>(await P.get(`/plans/types/${s}/variants`,{params:{includeInactive:a}})).data,getVariantById:async s=>(await P.get(`/plans/variants/${s}`)).data,createVariant:async(s,a)=>(await P.post(`/plans/types/${s}/variants`,a)).data,updateVariant:async(s,a)=>(await P.patch(`/plans/variants/${s}`,a)).data,deleteVariant:async s=>(await P.delete(`/plans/variants/${s}`)).data,deactivateVariant:async s=>(await P.put(`/plans/variants/${s}/deactivate`)).data};function ys(s,a=!0){return ne({queryKey:["plan-variants","by-type",s,a],queryFn:async()=>(await Rs.getVariantsByPlanType(s,a)).data,enabled:!!s})}function oi(){const s=J();return X({mutationFn:({planTypeId:a,data:t})=>Rs.createVariant(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-variants","by-type",t.planTypeId]}),s.invalidateQueries({queryKey:["plan-types",t.planTypeId]}),E.success("Plan variant created successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create plan variant";E.error(t)}})}function mi(){const s=J();return X({mutationFn:({id:a,data:t})=>Rs.updateVariant(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-variants"]}),a.data.planTypeId&&s.invalidateQueries({queryKey:["plan-types",a.data.planTypeId]}),E.success("Plan variant updated successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to update plan variant";E.error(t)}})}function xi(){const s=J();return X({mutationFn:a=>Rs.deleteVariant(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-variants"]}),s.invalidateQueries({queryKey:["plan-types"]}),E.success("Plan variant deleted successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete plan variant";E.error(t)}})}const ui=Ee({durationDays:Re().min(1,"Duration must be at least 1 day").max(3650,"Duration cannot exceed 10 years"),durationLabel:k().min(1,"Duration label is required").max(50,"Label is too long"),price:Re().min(0,"Price cannot be negative").max(1e6,"Price is too high"),isActive:Pe().default(!0)});function hi({planType:s,open:a,onOpenChange:t}){const[n,r]=i.useState("list"),[o,d]=i.useState(null),[g,x]=i.useState(!1),[D,l]=i.useState(null),{data:v,isLoading:u}=ys((s==null?void 0:s.id)||"",!0),M=xi(),m=oi(),j=mi(),{register:N,handleSubmit:A,reset:R,setValue:b,watch:y,formState:{errors:B,isSubmitting:K}}=ze({resolver:Oe(ui),defaultValues:{durationDays:30,durationLabel:"",price:0,isActive:!0}}),Y=y("isActive");i.useEffect(()=>{n==="create"?R({durationDays:30,durationLabel:"",price:0,isActive:!0}):n==="edit"&&o&&R({durationDays:o.durationDays,durationLabel:o.durationLabel,price:o.price,isActive:o.isActive})},[n,o,R]),i.useEffect(()=>{a||(r("list"),d(null))},[a]);const Z=q=>{d(q),r("edit")},U=q=>{l(q),x(!0)},ee=()=>{r("list"),d(null),R()},$=async q=>{if(s)try{n==="edit"&&o?await j.mutateAsync({id:o.id,data:{durationDays:q.durationDays,durationLabel:q.durationLabel,price:q.price,isActive:q.isActive}}):await m.mutateAsync({planTypeId:s.id,data:{durationDays:q.durationDays,durationLabel:q.durationLabel,price:q.price,isActive:q.isActive}}),ee()}catch{}},ue=()=>{D&&M.mutate(D.id,{onSuccess:()=>{x(!1),l(null)}})};return s?e.jsxs(e.Fragment,{children:[e.jsx(pt,{open:a,onOpenChange:t,children:e.jsxs(Js,{className:"w-full sm:max-w-lg overflow-y-auto",children:[e.jsx(Xs,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[n!=="list"&&e.jsx(w,{variant:"ghost",size:"icon",onClick:ee,className:"h-8 w-8",children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(Zs,{children:[n==="list"&&"Manage Pricing Variants",n==="create"&&"Add New Variant",n==="edit"&&"Edit Variant"]}),e.jsx(ea,{children:s.name})]})]})}),e.jsx("div",{className:"mt-6",children:n==="list"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(w,{onClick:()=>r("create"),className:"w-full",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Variant"]}),e.jsx(se,{}),u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ys,{})}):v&&v.length>0?e.jsx("div",{className:"space-y-3",children:v.map(q=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:q.durationLabel}),e.jsx(W,{variant:q.isActive?"default":"secondary",className:"mt-1",children:q.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>Z(q),children:e.jsx(tt,{className:"h-4 w-4"})}),e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>U(q),className:"text-destructive hover:text-destructive",children:e.jsx(Ns,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"text-sm font-medium",children:[q.durationDays," days"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-sm font-medium",children:["$",q.price]})]})]})]})]},q.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No variants yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add pricing variants to offer different durations and prices"})]})]}):e.jsxs("form",{onSubmit:A($),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"durationLabel",children:["Duration Label ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(z,{id:"durationLabel",placeholder:"e.g., 1 Month, 3 Months, 1 Year",...N("durationLabel"),className:B.durationLabel?"border-destructive":""}),B.durationLabel&&e.jsx("p",{className:"text-sm text-destructive",children:B.durationLabel.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'This is what members will see (e.g., "1 Month", "3 Months")'})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"durationDays",children:["Duration (days) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(z,{id:"durationDays",type:"number",placeholder:"30",...N("durationDays"),className:B.durationDays?"border-destructive":""}),B.durationDays&&e.jsx("p",{className:"text-sm text-destructive",children:B.durationDays.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"price",children:["Price ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(z,{id:"price",type:"number",step:"0.01",placeholder:"0.00",...N("price"),className:B.price?"border-destructive":""}),B.price&&e.jsx("p",{className:"text-sm text-destructive",children:B.price.message})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"isActive",checked:Y,onCheckedChange:q=>b("isActive",q)}),e.jsx(f,{htmlFor:"isActive",className:"text-sm font-normal cursor-pointer",children:"Active (visible to members)"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(w,{type:"button",variant:"outline",onClick:ee,disabled:K,className:"flex-1",children:"Cancel"}),e.jsx(w,{type:"submit",disabled:K,className:"flex-1",children:K?"Saving...":n==="edit"?"Update":"Create"})]})]})})]})}),e.jsx(ke,{open:g,onOpenChange:x,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Delete Variant?"}),e.jsxs(Se,{children:['This will permanently delete the "',D==null?void 0:D.durationLabel,'" variant for'," ",s.name,". This action cannot be undone."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:ue,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):null}function pi(){const[s,a]=i.useState(!1),[t,n]=i.useState(null),[r,o]=i.useState(null),[d,g]=i.useState(!1),[x,D]=i.useState(null),{data:l,isLoading:v}=ni(),u=li(),M=A=>{n(A)},m=A=>{D(A),g(!0)},j=()=>{x&&u.mutate(x.id,{onSuccess:()=>{g(!1),D(null)}})},N=A=>{o(A)};return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Ys,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Plans Management",description:"Manage plan types and their pricing variants",actions:e.jsxs(w,{onClick:()=>a(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Plan Type"]})}),l&&l.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(A=>e.jsxs(C,{className:"flex flex-col",children:[e.jsxs(de,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-xl",children:A.name}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx(W,{variant:A.isActive?"default":"secondary",children:A.isActive?"Active":"Inactive"}),e.jsx(W,{variant:"outline",className:"capitalize",children:A.category})]})]})]}),e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",children:e.jsx(En,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsxs(ae,{onClick:()=>M(A),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(ae,{onClick:()=>m(A),className:"text-destructive",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),A.description&&e.jsx(Ye,{className:"mt-2",children:A.description})]}),e.jsxs(V,{className:"flex-1 flex flex-col",children:[e.jsx(se,{className:"mb-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Pricing Variants"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>N(A),children:"Manage"})]}),A.variants&&A.variants.length>0?e.jsxs("div",{className:"space-y-2",children:[A.variants.slice(0,3).map(R=>e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:R.durationLabel})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold",children:R.price})]})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[R.durationDays," days"]})]},R.id)),A.variants.length>3&&e.jsxs(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>N(A),children:["View all ",A.variants.length," variants"]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No pricing variants yet"}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>N(A),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Variant"]})]})]})]})]},A.id))}):e.jsx(C,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(te,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No plan types yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first plan type to get started"}),e.jsxs(w,{onClick:()=>a(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Plan Type"]})]})}),e.jsx(ci,{open:s||!!t,onOpenChange:A=>{A||(a(!1),n(null))},planType:t}),e.jsx(hi,{planType:r,open:!!r,onOpenChange:A=>{A||o(null)}}),e.jsx(ke,{open:d,onOpenChange:g,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Are you sure?"}),e.jsxs(Se,{children:['This will permanently delete the plan type "',x==null?void 0:x.name,'" and all its variants. This action cannot be undone.']})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}const je={getAllMemberships:async(s=1,a=100)=>(await P.get("/memberships",{params:{page:s,limit:a}})).data,getMembershipById:async s=>(await P.get(`/memberships/${s}`)).data,getMemberMemberships:async s=>(await P.get(`/memberships/member/${s}`)).data,getActiveMembership:async s=>(await P.get(`/memberships/member/${s}/active`)).data,getMembershipStats:async()=>(await P.get("/memberships/stats")).data,createMembership:async s=>(await P.post("/memberships",s)).data,updateMembership:async(s,a)=>(await P.patch(`/memberships/${s}`,a)).data,cancelMembership:async s=>(await P.put(`/memberships/${s}/cancel`)).data,freezeMembership:async s=>(await P.put(`/memberships/${s}/freeze`)).data,unfreezeMembership:async s=>(await P.put(`/memberships/${s}/unfreeze`)).data,getMembershipDues:async s=>(await P.get(`/memberships/${s}/dues`)).data,recordPayment:async s=>(await P.post("/memberships/payments",s)).data,getExpiringMemberships:async(s=7)=>(await P.get("/memberships/expiring",{params:{days:s}})).data};function gi(s=1,a=100){return ne({queryKey:["memberships",s,a],queryFn:()=>je.getAllMemberships(s,a)})}function fi(s){return ne({queryKey:["memberships",s],queryFn:()=>je.getMembershipById(s),enabled:!!s})}function ji(s){return ne({queryKey:["memberships","member",s,"active"],queryFn:()=>je.getActiveMembership(s),enabled:!!s})}function Ni(){return ne({queryKey:["memberships","stats"],queryFn:()=>je.getMembershipStats()})}function bi(){const s=J();return X({mutationFn:a=>je.createMembership(a),onSuccess:a=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["members"]}),E.success(a.message||"Membership created successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create membership")}})}function yi(){const s=J();return X({mutationFn:({id:a,data:t})=>je.updateMembership(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t.id]}),E.success(a.message||"Membership updated successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update membership")}})}function vi(){const s=J();return X({mutationFn:a=>je.cancelMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),E.success(a.message||"Membership cancelled")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to cancel membership")}})}function wi(){const s=J();return X({mutationFn:a=>je.freezeMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),E.success(a.message||"Membership frozen")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to freeze membership")}})}function Si(){const s=J();return X({mutationFn:a=>je.unfreezeMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),E.success(a.message||"Membership unfrozen")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to unfreeze membership")}})}function Ci(s){return ne({queryKey:["memberships",s,"dues"],queryFn:()=>je.getMembershipDues(s),enabled:!!s})}function Ai(){const s=J();return X({mutationFn:a=>je.recordPayment(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),t.membershipId&&s.invalidateQueries({queryKey:["memberships",t.membershipId,"dues"]}),E.success(a.message||"Payment recorded successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to record payment")}})}const Rt={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},Di=[{key:"total",label:"Total Memberships",shortLabel:"Total",icon:Fe,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Memberships",shortLabel:"Active",icon:Ms,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"expired",label:"Expired",shortLabel:"Expired",icon:Us,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:Gs,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function vs(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Pi({membership:s,onClick:a}){var d,g,x;const t=Rt[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((g=(d=s.planVariant)==null?void 0:d.planType)==null?void 0:g.name)??"N/A",o=((x=s.planVariant)==null?void 0:x.durationLabel)??"";return e.jsxs(me,{className:"cursor-pointer hover:bg-muted/50",onClick:a,children:[e.jsx(L,{className:"font-medium",children:n}),e.jsx(L,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o})]})}),e.jsx(L,{children:e.jsx(W,{variant:t.variant,children:t.label})}),e.jsx(L,{className:"hidden md:table-cell",children:vs(s.startDate)}),e.jsx(L,{className:"hidden md:table-cell",children:vs(s.endDate)}),e.jsx(L,{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center font-medium",children:[e.jsx(T,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})})]})}function ki({membership:s,onClick:a}){var d,g,x;const t=Rt[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((g=(d=s.planVariant)==null?void 0:d.planType)==null?void 0:g.name)??"N/A",o=((x=s.planVariant)==null?void 0:x.durationLabel)??"";return e.jsx(C,{className:"cursor-pointer transition-shadow hover:shadow-md",onClick:a,children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r," - ",o]})]}),e.jsx(W,{variant:t.variant,children:t.label})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(es,{className:"h-3.5 w-3.5"}),vs(s.startDate)," - ",vs(s.endDate)]}),e.jsxs("span",{className:"inline-flex items-center font-semibold",children:[e.jsx(T,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})]})]})})}function Mi(){const s=qe(),{data:a,isLoading:t}=gi(),{data:n,isLoading:r}=Ni(),o=(a==null?void 0:a.data)??[],d=n==null?void 0:n.data;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Memberships",description:"Manage gym memberships",actions:e.jsxs(w,{onClick:()=>s(O.CREATE_MEMBERSHIP),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"New Membership"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:r?Array.from({length:4}).map((g,x)=>e.jsxs(C,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(S,{className:"h-3 w-14"}),e.jsx(S,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"h-4 w-24"}),e.jsx(S,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(S,{className:"h-8 w-16 mb-1"}),e.jsx(S,{className:"h-3 w-20"})]})]})]},x)):d?Di.map(({key:g,label:x,shortLabel:D,icon:l,colorClass:v,bgClass:u})=>{const M=d[g],m=d.total>0&&g!=="total"&&g!=="newThisMonth"?Math.round(M/d.total*100):null;return e.jsxs(C,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${u}`,children:e.jsx(l,{className:`h-4 w-4 ${v}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:D}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:M})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium text-muted-foreground",children:x}),e.jsx("div",{className:`rounded-lg p-2 ${u}`,children:e.jsx(l,{className:`h-4 w-4 ${v}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:M}),m!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m,"% of total"]}),g==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Created this month"})]})]})]},g)}):null}),!t&&e.jsxs("p",{className:"text-sm text-muted-foreground tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:o.length})," ",o.length===1?"membership":"memberships"]}),t?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((g,x)=>e.jsx(S,{className:"h-16 w-full rounded-lg"},x))}):o.length===0?e.jsx(C,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:e.jsx(Fe,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"No memberships yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a membership to assign a plan to a member."}),e.jsxs(w,{onClick:()=>s(O.CREATE_MEMBERSHIP),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Create First Membership"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(C,{children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{children:[e.jsx(F,{children:"Member"}),e.jsx(F,{children:"Plan"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Start Date"}),e.jsx(F,{children:"End Date"}),e.jsx(F,{className:"text-right",children:"Amount"})]})}),e.jsx(He,{children:o.map(g=>e.jsx(Pi,{membership:g,onClick:()=>s(`/memberships/${g.id}`)},g.id))})]})})}),e.jsx("div",{className:"space-y-3 md:hidden",children:o.map(g=>e.jsx(ki,{membership:g,onClick:()=>s(`/memberships/${g.id}`)},g.id))})]})]})}const Ft=i.forwardRef(({className:s,...a},t)=>e.jsx(rt,{className:h("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:e.jsx(zn,{className:h("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ft.displayName=rt.displayName;const Te={getAllTrainings:async(s=1,a=100)=>(await P.get("/trainings",{params:{page:s,limit:a}})).data,getTrainingById:async s=>(await P.get(`/trainings/${s}`)).data,getMemberTrainings:async s=>(await P.get(`/trainings/member/${s}`)).data,getActiveTraining:async s=>(await P.get(`/trainings/member/${s}/active`)).data,getTrainingStats:async()=>(await P.get("/trainings/stats")).data,createTraining:async s=>(await P.post("/trainings",s)).data,updateTraining:async(s,a)=>(await P.patch(`/trainings/${s}`,a)).data,cancelTraining:async s=>(await P.put(`/trainings/${s}/cancel`)).data,freezeTraining:async s=>(await P.put(`/trainings/${s}/freeze`)).data,unfreezeTraining:async s=>(await P.put(`/trainings/${s}/unfreeze`)).data,getTrainingDues:async s=>(await P.get(`/trainings/${s}/dues`)).data,recordPayment:async s=>(await P.post("/trainings/payments",s)).data,getExpiringTrainings:async(s=7)=>(await P.get("/trainings/expiring",{params:{days:s}})).data};function Ti(s=1,a=100){return ne({queryKey:["trainings",s,a],queryFn:()=>Te.getAllTrainings(s,a)})}function Ii(s){return ne({queryKey:["trainings",s],queryFn:()=>Te.getTrainingById(s),enabled:!!s})}function Ri(s){return ne({queryKey:["trainings","member",s,"active"],queryFn:()=>Te.getActiveTraining(s),enabled:!!s})}function Fi(){return ne({queryKey:["trainings","stats"],queryFn:()=>Te.getTrainingStats()})}function Lt(){const s=J();return X({mutationFn:a=>Te.createTraining(a),onSuccess:a=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["members"]}),E.success(a.message||"Training created successfully")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create training")}})}function Li(){const s=J();return X({mutationFn:a=>Te.cancelTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),E.success(a.message||"Training cancelled")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to cancel training")}})}function Ei(){const s=J();return X({mutationFn:a=>Te.freezeTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),E.success(a.message||"Training frozen")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to freeze training")}})}function zi(){const s=J();return X({mutationFn:a=>Te.unfreezeTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),E.success(a.message||"Training unfrozen")},onError:a=>{var t,n;E.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to unfreeze training")}})}function Oi(s){return ne({queryKey:["trainings",s,"dues"],queryFn:()=>Te.getTrainingDues(s),enabled:!!s})}const qi=Ee({memberId:k().min(1,"Please select a member"),planTypeId:k().min(1,"Please select a plan type"),planVariantId:k().min(1,"Please select a plan variant"),startDate:k().min(1,"Start date is required"),discountAmount:Re().min(0,"Discount cannot be negative").default(0),autoRenew:Pe().default(!1),notes:k().optional(),collectPayment:Pe().default(!1),paymentAmount:Re().optional(),paymentMethod:k().optional(),paymentReference:k().optional(),paymentNotes:k().optional(),addTraining:Pe().default(!1),trainingPlanTypeId:k().optional(),trainingPlanVariantId:k().optional(),trainerName:k().optional(),trainingDiscountAmount:Re().min(0).default(0),trainingNotes:k().optional()}).refine(s=>s.collectPayment?!!s.paymentMethod&&(s.paymentAmount??0)>0:!0,{message:"Payment amount and method are required when collecting payment",path:["paymentAmount"]}).refine(s=>s.addTraining?!!s.trainingPlanTypeId&&!!s.trainingPlanVariantId&&!!s.trainerName:!0,{message:"Training plan, variant, and trainer name are required",path:["trainerName"]}),zs=[{id:"member",label:"Select Member",icon:$e},{id:"plan",label:"Choose Plan",icon:te},{id:"details",label:"Details",icon:es},{id:"payment",label:"Payment",icon:Fe}],Vi={id:"training",label:"Training",icon:te},$i=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function Bi({onSuccess:s,onCancel:a}){var ta,na,ra,ia,la;const[t,n]=i.useState(0),[r,o]=i.useState(""),{data:d,isLoading:g}=aa(),{data:x,isLoading:D}=Bs("membership"),{data:l,isLoading:v}=Bs("training"),u=bi(),M=Lt(),m=ze({resolver:Oe(qi),defaultValues:{startDate:new Date().toISOString().split("T")[0],discountAmount:0,autoRenew:!1,collectPayment:!1,addTraining:!1,trainingDiscountAmount:0}}),j=m.watch("planTypeId"),N=m.watch("planVariantId"),A=m.watch("memberId"),R=m.watch("discountAmount")||0,b=m.watch("collectPayment"),y=m.watch("startDate"),B=m.watch("addTraining"),K=m.watch("trainingPlanTypeId"),Y=m.watch("trainingPlanVariantId"),Z=i.useMemo(()=>B?[...zs.slice(0,3),Vi,zs[3]]:[...zs],[B]),{data:U,isLoading:ee}=ys(j,!1),{data:$,isLoading:ue}=ys(K||"",!1),{data:q}=ji(A||""),ie=q==null?void 0:q.data,_=(d==null?void 0:d.data)??[],re=i.useMemo(()=>{if(!r.trim())return _;const c=r.toLowerCase();return _.filter(Q=>Q.firstName.toLowerCase().includes(c)||Q.lastName.toLowerCase().includes(c)||Q.email.toLowerCase().includes(c)||Q.phone.includes(c))},[_,r]),H=_.find(c=>c.id===A),De=x==null?void 0:x.find(c=>c.id===j),I=U==null?void 0:U.find(c=>c.id===N),le=I?Math.max(0,I.price-R):0,p=$==null?void 0:$.find(c=>c.id===Y),G=i.useMemo(()=>{if(!y||!I)return null;const c=new Date(y);return c.setDate(c.getDate()+I.durationDays),c.toISOString().split("T")[0]},[y,I]),Ne=(ta=Z[t])==null?void 0:ta.id,Ve=()=>{switch(Ne){case"member":return!!A;case"plan":return!!j&&!!N;case"details":return!!y;case"training":return!!K&&!!Y&&!!m.watch("trainerName");case"payment":return!0;default:return!1}},us=()=>{t<Z.length-1&&Ve()&&n(c=>c+1)},zt=()=>{t>0&&n(c=>c-1)},Ot=c=>{m.setValue("addTraining",c),c||(Ne==="training"&&n(Q=>Q-1),Ne==="payment"&&t===4&&n(3),m.setValue("trainingPlanTypeId",""),m.setValue("trainingPlanVariantId",""),m.setValue("trainerName",""),m.setValue("trainingDiscountAmount",0),m.setValue("trainingNotes",""))},Fs=u.isPending||M.isPending,qt=c=>{const Q={memberId:c.memberId,planVariantId:c.planVariantId,startDate:c.startDate,discountAmount:c.discountAmount||0,autoRenew:c.autoRenew,notes:c.notes};c.collectPayment&&c.paymentAmount&&c.paymentMethod&&(Q.paymentAmount=c.paymentAmount,Q.paymentMethod=c.paymentMethod,Q.paymentReference=c.paymentReference,Q.paymentNotes=c.paymentNotes),u.mutate(Q,{onSuccess:()=>{if(c.addTraining&&c.trainingPlanVariantId&&c.trainerName){const Ls={memberId:c.memberId,planVariantId:c.trainingPlanVariantId,trainerName:c.trainerName,startDate:c.startDate,discountAmount:c.trainingDiscountAmount||0,notes:c.trainingNotes};M.mutate(Ls,{onSuccess:()=>{m.reset(),s==null||s()}})}else m.reset(),s==null||s()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("nav",{"aria-label":"Progress",className:"px-6 pt-6",children:e.jsx("ol",{className:"flex items-center",children:Z.map((c,Q)=>{const Ls=c.icon,hs=Q<t,da=Q===t;return e.jsxs("li",{className:`flex items-center ${Q<Z.length-1?"flex-1":""}`,children:[e.jsxs("button",{type:"button",onClick:()=>{Q<t&&n(Q)},disabled:Q>t,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${da?"bg-primary text-primary-foreground":hs?"bg-primary/10 text-primary hover:bg-primary/20":"text-muted-foreground"}`,children:[e.jsx("span",{className:`flex h-7 w-7 items-center justify-center rounded-full ${da?"bg-primary-foreground/20":hs?"bg-primary/20":"bg-muted"}`,children:hs?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(Ls,{className:"h-4 w-4"})}),e.jsx("span",{className:"hidden sm:inline",children:c.label})]}),Q<Z.length-1&&e.jsx("div",{className:`mx-2 hidden h-px flex-1 sm:block ${hs?"bg-primary":"bg-border"}`})]},c.id)})})}),e.jsx(se,{}),e.jsxs("form",{onSubmit:m.handleSubmit(qt),children:[Ne==="member"&&e.jsxs("div",{className:"space-y-4 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select a Member"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the member who will receive this membership."})]}),e.jsx(z,{placeholder:"Search by name, email, or phone...",value:r,onChange:c=>o(c.target.value)}),g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):re.length===0?e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No members found. Try a different search term."}):e.jsx("div",{className:"grid gap-2 max-h-[400px] overflow-y-auto pr-1",children:re.map(c=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${A===c.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>m.setValue("memberId",c.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold",children:[c.firstName[0],c.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[c.firstName," ",c.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:c.isActive?"default":"secondary",children:c.isActive?"Active":"Inactive"}),A===c.id&&e.jsx(oe,{className:"h-5 w-5 text-primary"})]})]})},c.id))}),m.formState.errors.memberId&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.memberId.message}),A&&ie&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-900 dark:bg-amber-950/30",children:[e.jsx(it,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-400",children:"This member already has an active membership"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-500 mt-0.5",children:[(ra=(na=ie.planVariant)==null?void 0:na.planType)==null?void 0:ra.name," -"," ",(ia=ie.planVariant)==null?void 0:ia.durationLabel," (expires"," ",new Date(ie.endDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),"). Creating another will result in overlapping memberships."]})]})]})]}),Ne==="plan"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose a Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a plan type and duration for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[H==null?void 0:H.firstName," ",H==null?void 0:H.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Plan Type"}),D?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:x==null?void 0:x.map(c=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${j===c.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{m.setValue("planTypeId",c.id),m.setValue("planVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:c.name}),c.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:c.description})]}),j===c.id&&e.jsx(oe,{className:"h-5 w-5 text-primary shrink-0"})]})},c.id))}),m.formState.errors.planTypeId&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.planTypeId.message})]}),j&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Duration & Pricing"}),ee?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):U&&U.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:U.map(c=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${N===c.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>m.setValue("planVariantId",c.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(T,{className:"inline h-4 w-4"}),c.price.toLocaleString()]}),N===c.id&&e.jsx(oe,{className:"h-5 w-5 text-primary"})]})]})},c.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this plan type."}),m.formState.errors.planVariantId&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.planVariantId.message})]})]}),Ne==="details"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Membership Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure start date, discount, and other options."})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"startDate",children:"Start Date *"}),e.jsx(z,{id:"startDate",type:"date",...m.register("startDate")}),m.formState.errors.startDate&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.startDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"End Date"}),e.jsx(z,{type:"date",value:G||"",disabled:!0,className:"bg-muted"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Auto-calculated from plan duration (",I==null?void 0:I.durationDays," days)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"discountAmount",children:"Discount Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"discountAmount",type:"number",min:0,max:(I==null?void 0:I.price)||0,className:"pl-9",...m.register("discountAmount")})]}),m.formState.errors.discountAmount&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.discountAmount.message})]}),I&&e.jsx(C,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3 w-3"}),I.price.toLocaleString()]})]}),R>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(T,{className:"inline h-3 w-3"}),R.toLocaleString()]})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Final Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3.5 w-3.5"}),le.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"autoRenew",checked:m.watch("autoRenew"),onCheckedChange:c=>m.setValue("autoRenew",c===!0)}),e.jsx(f,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew membership when it expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...m.register("notes"),placeholder:"Any additional notes about this membership...",rows:3})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(f,{htmlFor:"addTraining",className:"text-sm font-medium",children:"Also assign training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optionally assign a personal training plan along with this membership."})]}),e.jsx(Ft,{id:"addTraining",checked:B,onCheckedChange:Ot})]})]}),Ne==="training"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Training Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a training plan and assign a trainer for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[H==null?void 0:H.firstName," ",H==null?void 0:H.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"trainerName",children:"Trainer Name *"}),e.jsx(z,{id:"trainerName",placeholder:"Enter trainer name",...m.register("trainerName")}),m.formState.errors.trainerName&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.trainerName.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Training Plan Type"}),v?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):l&&l.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:l.map(c=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${K===c.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{m.setValue("trainingPlanTypeId",c.id),m.setValue("trainingPlanVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:c.name}),c.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:c.description})]}),K===c.id&&e.jsx(oe,{className:"h-5 w-5 text-primary shrink-0"})]})},c.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No training plan types available. Please create a training plan type first."})]}),K&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Duration & Pricing"}),ue?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):$&&$.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:$.map(c=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${Y===c.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>m.setValue("trainingPlanVariantId",c.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(T,{className:"inline h-4 w-4"}),c.price.toLocaleString()]}),Y===c.id&&e.jsx(oe,{className:"h-5 w-5 text-primary"})]})]})},c.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this training plan type."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"trainingDiscountAmount",children:"Training Discount"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"trainingDiscountAmount",type:"number",min:0,max:(p==null?void 0:p.price)||0,className:"pl-9",...m.register("trainingDiscountAmount")})]})]}),p&&e.jsx(C,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3 w-3"}),p.price.toLocaleString()]})]}),(m.watch("trainingDiscountAmount")||0)>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(T,{className:"inline h-3 w-3"}),(m.watch("trainingDiscountAmount")||0).toLocaleString()]})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Training Final Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3.5 w-3.5"}),Math.max(0,p.price-(m.watch("trainingDiscountAmount")||0)).toLocaleString()]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"trainingNotes",children:"Training Notes"}),e.jsx(fe,{id:"trainingNotes",...m.register("trainingNotes"),placeholder:"Any additional notes about this training...",rows:2})]})]}),Ne==="payment"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optionally record an initial payment for this membership."})]}),e.jsx(C,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Membership Summary"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Member: "}),e.jsxs("span",{className:"font-medium",children:[H==null?void 0:H.firstName," ",H==null?void 0:H.lastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan: "}),e.jsxs("span",{className:"font-medium",children:[De==null?void 0:De.name," - ",I==null?void 0:I.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration: "}),e.jsxs("span",{className:"font-medium",children:[y," to ",G]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Due: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(T,{className:"inline h-3 w-3"}),le.toLocaleString()]})]})]}),B&&p&&e.jsxs(e.Fragment,{children:[e.jsx(se,{}),e.jsx("h4",{className:"font-semibold text-sm",children:"Training"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trainer: "}),e.jsx("span",{className:"font-medium",children:m.watch("trainerName")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Plan: "}),e.jsxs("span",{className:"font-medium",children:[(la=l==null?void 0:l.find(c=>c.id===K))==null?void 0:la.name," - ",p.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Amount: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(T,{className:"inline h-3 w-3"}),Math.max(0,p.price-(m.watch("trainingDiscountAmount")||0)).toLocaleString()]})]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"collectPayment",checked:b,onCheckedChange:c=>m.setValue("collectPayment",c===!0)}),e.jsx(f,{htmlFor:"collectPayment",className:"text-sm font-normal",children:"Record initial payment now"})]}),b&&e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentAmount",children:"Payment Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"paymentAmount",type:"number",min:0,className:"pl-9",defaultValue:le,...m.register("paymentAmount")})]}),m.formState.errors.paymentAmount&&e.jsx("p",{className:"text-sm text-destructive",children:m.formState.errors.paymentAmount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentMethod",children:"Payment Method *"}),e.jsxs(ss,{value:m.watch("paymentMethod")||"",onValueChange:c=>m.setValue("paymentMethod",c),children:[e.jsx(Ge,{id:"paymentMethod",children:e.jsx(as,{placeholder:"Select method"})}),e.jsx(Qe,{children:$i.map(c=>e.jsx(pe,{value:c.value,children:c.label},c.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentReference",children:"Payment Reference / Transaction ID"}),e.jsx(z,{id:"paymentReference",...m.register("paymentReference"),placeholder:"e.g., UPI transaction ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentNotes",children:"Payment Notes"}),e.jsx(fe,{id:"paymentNotes",...m.register("paymentNotes"),placeholder:"Any notes about this payment...",rows:2})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[e.jsx("div",{children:t>0?e.jsxs(w,{type:"button",variant:"outline",onClick:zt,children:[e.jsx(lt,{className:"mr-1 h-4 w-4"}),"Back"]}):a?e.jsx(w,{type:"button",variant:"outline",onClick:a,disabled:Fs,children:"Cancel"}):e.jsx("div",{})}),e.jsx("div",{children:t<Z.length-1?e.jsxs(w,{type:"button",onClick:us,disabled:!Ve(),children:["Next",e.jsx(Ss,{className:"ml-1 h-4 w-4"})]}):e.jsx(w,{type:"submit",disabled:Fs,children:Fs?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):B?"Create Membership & Training":"Create Membership"})})]})]})]})}function _i(){const s=qe(),a=()=>{s(O.MEMBERSHIPS)},t=()=>{s(O.MEMBERSHIPS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Create New Membership",description:"Assign a membership plan to a member with optional payment recording."}),e.jsx(C,{className:"max-w-4xl",children:e.jsx(Bi,{onSuccess:a,onCancel:t})})]})}const Ui=Ee({amount:Re().positive("Amount must be greater than 0"),method:k().min(1,"Payment method is required"),reference:k().optional(),notes:k().optional()}),Ki=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function Hi({open:s,onOpenChange:a,memberId:t,membershipId:n,dueAmount:r}){const o=Ai(),d=ze({resolver:Oe(Ui),defaultValues:{amount:r>0?r:void 0,method:"",reference:"",notes:""}}),g=x=>{o.mutate({memberId:t,membershipId:n,amount:x.amount,method:x.method,reference:x.reference,notes:x.notes},{onSuccess:()=>{d.reset(),a(!1)}})};return e.jsx(Is,{open:s,onOpenChange:a,children:e.jsxs(ds,{className:"sm:max-w-md",children:[e.jsxs(cs,{children:[e.jsx(os,{children:"Record Payment"}),e.jsxs(ms,{children:["Outstanding balance:"," ",e.jsxs("span",{className:"font-semibold text-foreground",children:[e.jsx(T,{className:"inline h-3 w-3"}),r.toLocaleString()]})]})]}),e.jsxs("form",{onSubmit:d.handleSubmit(g),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"amount",children:"Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"amount",type:"number",min:1,max:r,className:"pl-9",placeholder:"Enter amount",...d.register("amount")})]}),d.formState.errors.amount&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.amount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"method",children:"Payment Method *"}),e.jsxs(ss,{value:d.watch("method")||"",onValueChange:x=>d.setValue("method",x),children:[e.jsx(Ge,{id:"method",children:e.jsx(as,{placeholder:"Select method"})}),e.jsx(Qe,{children:Ki.map(x=>e.jsx(pe,{value:x.value,children:x.label},x.value))})]}),d.formState.errors.method&&e.jsx("p",{className:"text-sm text-destructive",children:d.formState.errors.method.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"reference",children:"Reference / Transaction ID"}),e.jsx(z,{id:"reference",...d.register("reference"),placeholder:"e.g., UPI ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...d.register("notes"),placeholder:"Any notes about this payment...",rows:2})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:o.isPending,children:"Cancel"}),e.jsx(w,{type:"submit",disabled:o.isPending,children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Recording..."]}):"Record Payment"})]})]})]})})}const Gi=Ee({endDate:k().min(1,"End date is required"),autoRenew:Pe(),notes:k().optional()});function Qi({open:s,onOpenChange:a,membership:t}){const n=yi(),r=ze({resolver:Oe(Gi),defaultValues:{endDate:t.endDate.split("T")[0],autoRenew:t.autoRenew,notes:t.notes||""}}),o=d=>{n.mutate({id:t.id,data:{endDate:d.endDate,autoRenew:d.autoRenew,notes:d.notes||void 0}},{onSuccess:()=>{a(!1)}})};return e.jsx(Is,{open:s,onOpenChange:a,children:e.jsxs(ds,{className:"sm:max-w-md",children:[e.jsxs(cs,{children:[e.jsx(os,{children:"Edit Membership"}),e.jsx(ms,{children:"Update end date, auto-renew, and notes. Plan and pricing cannot be changed."})]}),e.jsxs("form",{onSubmit:r.handleSubmit(o),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"endDate",children:"End Date"}),e.jsx(z,{id:"endDate",type:"date",...r.register("endDate")}),r.formState.errors.endDate&&e.jsx("p",{className:"text-sm text-destructive",children:r.formState.errors.endDate.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"autoRenew",checked:r.watch("autoRenew"),onCheckedChange:d=>r.setValue("autoRenew",d===!0)}),e.jsx(f,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew when membership expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...r.register("notes"),placeholder:"Any notes about this membership...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:n.isPending,children:"Cancel"}),e.jsx(w,{type:"submit",disabled:n.isPending,children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}const Yi={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},ha={paid:{label:"Paid",variant:"default"},pending:{label:"Pending",variant:"outline"},failed:{label:"Failed",variant:"destructive"},refunded:{label:"Refunded",variant:"secondary"}},pa={cash:"Cash",card:"Card",upi:"UPI",bank_transfer:"Bank Transfer",other:"Other"};function ps(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function ga(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Wi(){var ie,_,re,H,De;const{id:s}=dt(),a=qe(),[t,n]=i.useState(!1),[r,o]=i.useState(!1),[d,g]=i.useState(!1),[x,D]=i.useState(!1),[l,v]=i.useState(!1),{data:u,isLoading:M}=fi(s),{data:m,isLoading:j}=Ci(s),N=vi(),A=wi(),R=Si(),b=u==null?void 0:u.data,y=m==null?void 0:m.data;if(M)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{className:"h-10 w-64"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsx(S,{className:"h-48 lg:col-span-2"}),e.jsx(S,{className:"h-48"})]}),e.jsx(S,{className:"h-64"})]});if(!b)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Membership Not Found"}),e.jsx(C,{children:e.jsxs(V,{className:"flex flex-col items-center py-12",children:[e.jsx(ct,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The membership you're looking for doesn't exist."}),e.jsx(w,{onClick:()=>a(O.MEMBERSHIPS),children:"Back to Memberships"})]})})]});const B=Yi[b.status],K=b.member?`${b.member.firstName} ${b.member.lastName}`:"Unknown",Y=((_=(ie=b.planVariant)==null?void 0:ie.planType)==null?void 0:_.name)??"N/A",Z=((re=b.planVariant)==null?void 0:re.durationLabel)??"",U=y&&y.finalPrice>0?Math.min(100,Math.round(y.totalPaid/y.finalPrice*100)):0,ee=b.status!=="cancelled",$=b.status==="active",ue=b.status==="frozen",q=b.status==="active"||b.status==="frozen";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Membership Details",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>a(O.MEMBERSHIPS),children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Back"]}),ee&&e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"icon",children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[e.jsxs(ae,{onClick:()=>o(!0),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),$&&e.jsxs(ae,{onClick:()=>D(!0),children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Freeze Membership"]}),ue&&e.jsxs(ae,{onClick:()=>v(!0),children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Unfreeze Membership"]}),q&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),e.jsxs(ae,{className:"text-destructive focus:text-destructive",onClick:()=>g(!0),children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Cancel Membership"]})]})]})]})]})}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(C,{className:"lg:col-span-2",children:[e.jsx(de,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ge,{className:"text-lg",children:"Membership Info"}),e.jsx(W,{variant:B.variant,children:B.label})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx($e,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member"}),e.jsx("p",{className:"font-medium",children:K}),((H=b.member)==null?void 0:H.email)&&e.jsx("p",{className:"text-xs text-muted-foreground",children:b.member.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(te,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("p",{className:"font-medium",children:Y}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z," (",(De=b.planVariant)==null?void 0:De.durationDays," ","days)"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(es,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[ps(b.startDate)," -"," ",ps(b.endDate)]}),b.autoRenew&&e.jsx("p",{className:"text-xs text-emerald-600",children:"Auto-renew on"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(T,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),b.finalPrice.toLocaleString()]}),b.discountAmount>0&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",e.jsx(T,{className:"inline h-2.5 w-2.5"}),b.priceAtPurchase.toLocaleString()," -"," ",e.jsx(T,{className:"inline h-2.5 w-2.5"}),b.discountAmount.toLocaleString()," discount)"]})]})]})]})]}),b.notes&&e.jsxs(e.Fragment,{children:[e.jsx(se,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm",children:b.notes})]})]})]})]}),e.jsxs(C,{children:[e.jsxs(de,{children:[e.jsx(ge,{className:"text-lg",children:"Payment Status"}),e.jsx(Ye,{children:j?"Loading...":y!=null&&y.isFullyPaid?"Fully paid":"Outstanding balance"})]}),e.jsx(V,{children:j?e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"h-4 w-full"}),e.jsx(S,{className:"h-8 w-24"}),e.jsx(S,{className:"h-4 w-full"})]}):y?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[U,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${y.isFullyPaid?"bg-emerald-500":U>50?"bg-primary":"bg-amber-500"}`,style:{width:`${U}%`}})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),y.finalPrice.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-emerald-600",children:[e.jsx("span",{children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),y.totalPaid.toLocaleString()]})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:y.isFullyPaid?"text-emerald-600":"text-amber-600",children:y.isFullyPaid?"Fully Paid":"Balance Due"}),e.jsxs("span",{className:y.isFullyPaid?"text-emerald-600":"text-amber-600",children:[e.jsx(T,{className:"inline h-3 w-3"}),y.dueAmount.toLocaleString()]})]})]}),!y.isFullyPaid&&b.status!=="cancelled"&&e.jsxs(w,{className:"w-full",onClick:()=>n(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Record Payment"]}),y.isFullyPaid&&e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-emerald-50 p-3 text-sm font-medium text-emerald-700 dark:bg-emerald-950/30 dark:text-emerald-400",children:[e.jsx(Ms,{className:"h-4 w-4"}),"All dues cleared"]})]}):null})]})]}),e.jsxs(C,{children:[e.jsx(de,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:"Payment History"}),e.jsx(Ye,{children:"All payments recorded against this membership"})]}),y&&!y.isFullyPaid&&b.status!=="cancelled"&&e.jsxs(w,{size:"sm",onClick:()=>n(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Add Payment"]})]})}),e.jsx(V,{children:j?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((I,le)=>e.jsx(S,{className:"h-12 w-full"},le))}):y&&y.payments.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{children:[e.jsx(F,{children:"Date"}),e.jsx(F,{children:"Amount"}),e.jsx(F,{children:"Method"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Reference"}),e.jsx(F,{children:"Notes"})]})}),e.jsx(He,{children:y.payments.map(I=>{const le=ha[I.status];return e.jsxs(me,{children:[e.jsx(L,{className:"text-sm",children:I.paidAt?ga(I.paidAt):ga(I.createdAt)}),e.jsxs(L,{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),I.amount.toLocaleString()]}),e.jsx(L,{children:pa[I.method]||I.method}),e.jsx(L,{children:e.jsx(W,{variant:le.variant,children:le.label})}),e.jsx(L,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:I.reference||"-"}),e.jsx(L,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:I.notes||"-"})]},I.id)})})]})}),e.jsx("div",{className:"space-y-3 sm:hidden",children:y.payments.map(I=>{const le=ha[I.status];return e.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold inline-flex items-center",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),I.amount.toLocaleString()]}),e.jsx(W,{variant:le.variant,children:le.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:pa[I.method]||I.method}),e.jsx("span",{children:I.paidAt?ps(I.paidAt):ps(I.createdAt)})]}),I.reference&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ref: ",I.reference]})]},I.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Fe,{className:"h-8 w-8 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No payments recorded yet"}),y&&!y.isFullyPaid&&b.status!=="cancelled"&&e.jsxs(w,{size:"sm",variant:"outline",onClick:()=>n(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Record First Payment"]})]})})]}),b&&y&&e.jsx(Hi,{open:t,onOpenChange:n,memberId:b.memberId,membershipId:b.id,dueAmount:y.dueAmount}),b&&r&&e.jsx(Qi,{open:r,onOpenChange:o,membership:b}),e.jsx(ke,{open:d,onOpenChange:g,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Cancel this membership?"}),e.jsxs(Se,{children:["This will permanently cancel"," ",e.jsx("span",{className:"font-medium text-foreground",children:K}),"'s ",Y," membership. This action cannot be undone. If the wrong plan was selected, cancel this and create a new membership."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Keep Membership"}),e.jsx(Ce,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>N.mutate(b.id),disabled:N.isPending,children:N.isPending?"Cancelling...":"Yes, Cancel Membership"})]})]})}),e.jsx(ke,{open:x,onOpenChange:D,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Freeze this membership?"}),e.jsxs(Se,{children:["Freezing will temporarily pause"," ",e.jsx("span",{className:"font-medium text-foreground",children:K}),"'s membership. The member won't have active access until it's unfrozen. You can unfreeze it anytime."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:()=>A.mutate(b.id),disabled:A.isPending,children:A.isPending?"Freezing...":"Yes, Freeze Membership"})]})]})}),e.jsx(ke,{open:l,onOpenChange:v,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Unfreeze this membership?"}),e.jsxs(Se,{children:["This will reactivate"," ",e.jsx("span",{className:"font-medium text-foreground",children:K}),"'s membership and restore their access."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:()=>R.mutate(b.id),disabled:R.isPending,children:R.isPending?"Unfreezing...":"Yes, Unfreeze Membership"})]})]})})]})}const Et={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},Ji=[{key:"total",label:"Total Trainings",shortLabel:"Total",icon:te,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Trainings",shortLabel:"Active",icon:Ms,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"expired",label:"Expired",shortLabel:"Expired",icon:Us,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:Gs,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function ws(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Xi({training:s,onClick:a}){var d,g,x;const t=Et[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((g=(d=s.planVariant)==null?void 0:d.planType)==null?void 0:g.name)??"N/A",o=((x=s.planVariant)==null?void 0:x.durationLabel)??"";return e.jsxs(me,{className:"cursor-pointer hover:bg-muted/50",onClick:a,children:[e.jsx(L,{className:"font-medium",children:n}),e.jsx(L,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o})]})}),e.jsx(L,{children:s.trainerName}),e.jsx(L,{children:e.jsx(W,{variant:t.variant,children:t.label})}),e.jsx(L,{className:"hidden md:table-cell",children:ws(s.startDate)}),e.jsx(L,{className:"hidden md:table-cell",children:ws(s.endDate)}),e.jsx(L,{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center font-medium",children:[e.jsx(T,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})})]})}function Zi({training:s,onClick:a}){var d,g,x;const t=Et[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((g=(d=s.planVariant)==null?void 0:d.planType)==null?void 0:g.name)??"N/A",o=((x=s.planVariant)==null?void 0:x.durationLabel)??"";return e.jsx(C,{className:"cursor-pointer transition-shadow hover:shadow-md",onClick:a,children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r," - ",o]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Trainer: ",s.trainerName]})]}),e.jsx(W,{variant:t.variant,children:t.label})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(es,{className:"h-3.5 w-3.5"}),ws(s.startDate)," - ",ws(s.endDate)]}),e.jsxs("span",{className:"inline-flex items-center font-semibold",children:[e.jsx(T,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})]})]})})}function el(){const s=qe(),{data:a,isLoading:t}=Ti(),{data:n,isLoading:r}=Fi(),o=(a==null?void 0:a.data)??[],d=n==null?void 0:n.data;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Trainings",description:"Manage personal training assignments",actions:e.jsxs(w,{onClick:()=>s(O.CREATE_TRAINING),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"New Training"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:r?Array.from({length:4}).map((g,x)=>e.jsxs(C,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(S,{className:"h-3 w-14"}),e.jsx(S,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"h-4 w-24"}),e.jsx(S,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(S,{className:"h-8 w-16 mb-1"}),e.jsx(S,{className:"h-3 w-20"})]})]})]},x)):d?Ji.map(({key:g,label:x,shortLabel:D,icon:l,colorClass:v,bgClass:u})=>{const M=d[g],m=d.total>0&&g!=="total"&&g!=="newThisMonth"?Math.round(M/d.total*100):null;return e.jsxs(C,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${u}`,children:e.jsx(l,{className:`h-4 w-4 ${v}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:D}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:M})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ge,{className:"text-sm font-medium text-muted-foreground",children:x}),e.jsx("div",{className:`rounded-lg p-2 ${u}`,children:e.jsx(l,{className:`h-4 w-4 ${v}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:M}),m!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m,"% of total"]}),g==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Created this month"})]})]})]},g)}):null}),!t&&e.jsxs("p",{className:"text-sm text-muted-foreground tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:o.length})," ",o.length===1?"training":"trainings"]}),t?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((g,x)=>e.jsx(S,{className:"h-16 w-full rounded-lg"},x))}):o.length===0?e.jsx(C,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:e.jsx(te,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"No trainings yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a training to assign a trainer and plan to a member."}),e.jsxs(w,{onClick:()=>s(O.CREATE_TRAINING),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Create First Training"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(C,{children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{children:[e.jsx(F,{children:"Member"}),e.jsx(F,{children:"Plan"}),e.jsx(F,{children:"Trainer"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Start Date"}),e.jsx(F,{children:"End Date"}),e.jsx(F,{className:"text-right",children:"Amount"})]})}),e.jsx(He,{children:o.map(g=>e.jsx(Xi,{training:g,onClick:()=>s(`/trainings/${g.id}`)},g.id))})]})})}),e.jsx("div",{className:"space-y-3 md:hidden",children:o.map(g=>e.jsx(Zi,{training:g,onClick:()=>s(`/trainings/${g.id}`)},g.id))})]})]})}const sl=Ee({memberId:k().min(1,"Please select a member"),planTypeId:k().min(1,"Please select a plan type"),planVariantId:k().min(1,"Please select a plan variant"),trainerName:k().min(1,"Trainer name is required"),startDate:k().min(1,"Start date is required"),discountAmount:Re().min(0,"Discount cannot be negative").default(0),autoRenew:Pe().default(!1),notes:k().optional(),collectPayment:Pe().default(!1),paymentAmount:Re().optional(),paymentMethod:k().optional(),paymentReference:k().optional(),paymentNotes:k().optional()}).refine(s=>s.collectPayment?!!s.paymentMethod&&(s.paymentAmount??0)>0:!0,{message:"Payment amount and method are required when collecting payment",path:["paymentAmount"]}),ns=[{id:"member",label:"Select Member",icon:$e},{id:"plan",label:"Choose Plan",icon:te},{id:"details",label:"Details",icon:es},{id:"payment",label:"Payment",icon:Fe}],al=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function tl({onSuccess:s,onCancel:a,preselectedMemberId:t}){var De,I,le;const[n,r]=i.useState(t?1:0),[o,d]=i.useState(""),{data:g,isLoading:x}=aa(),{data:D,isLoading:l}=Bs("training"),v=Lt(),u=ze({resolver:Oe(sl),defaultValues:{memberId:t||"",startDate:new Date().toISOString().split("T")[0],discountAmount:0,autoRenew:!1,collectPayment:!1,trainerName:""}}),M=u.watch("planTypeId"),m=u.watch("planVariantId"),j=u.watch("memberId"),N=u.watch("discountAmount")||0,A=u.watch("collectPayment"),R=u.watch("startDate"),{data:b,isLoading:y}=ys(M,!1),{data:B}=Ri(j||""),K=B==null?void 0:B.data,Y=(g==null?void 0:g.data)??[],Z=i.useMemo(()=>{if(!o.trim())return Y;const p=o.toLowerCase();return Y.filter(G=>G.firstName.toLowerCase().includes(p)||G.lastName.toLowerCase().includes(p)||G.email.toLowerCase().includes(p)||G.phone.includes(p))},[Y,o]),U=Y.find(p=>p.id===j),ee=D==null?void 0:D.find(p=>p.id===M),$=b==null?void 0:b.find(p=>p.id===m),ue=$?Math.max(0,$.price-N):0,q=i.useMemo(()=>{if(!R||!$)return null;const p=new Date(R);return p.setDate(p.getDate()+$.durationDays),p.toISOString().split("T")[0]},[R,$]),ie=()=>{switch(n){case 0:return!!j;case 1:return!!M&&!!m;case 2:return!!R&&!!u.watch("trainerName");case 3:return!0;default:return!1}},_=()=>{n<ns.length-1&&ie()&&r(p=>p+1)},re=()=>{n>0&&r(p=>p-1)},H=p=>{const G={memberId:p.memberId,planVariantId:p.planVariantId,trainerName:p.trainerName,startDate:p.startDate,discountAmount:p.discountAmount||0,autoRenew:p.autoRenew,notes:p.notes};p.collectPayment&&p.paymentAmount&&p.paymentMethod&&(G.paymentAmount=p.paymentAmount,G.paymentMethod=p.paymentMethod,G.paymentReference=p.paymentReference,G.paymentNotes=p.paymentNotes),v.mutate(G,{onSuccess:()=>{u.reset(),s==null||s()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("nav",{"aria-label":"Progress",className:"px-6 pt-6",children:e.jsx("ol",{className:"flex items-center",children:ns.map((p,G)=>{const Ne=p.icon,Ve=G<n,us=G===n;return e.jsxs("li",{className:`flex items-center ${G<ns.length-1?"flex-1":""}`,children:[e.jsxs("button",{type:"button",onClick:()=>{G<n&&r(G)},disabled:G>n,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${us?"bg-primary text-primary-foreground":Ve?"bg-primary/10 text-primary hover:bg-primary/20":"text-muted-foreground"}`,children:[e.jsx("span",{className:`flex h-7 w-7 items-center justify-center rounded-full ${us?"bg-primary-foreground/20":Ve?"bg-primary/20":"bg-muted"}`,children:Ve?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("span",{className:"hidden sm:inline",children:p.label})]}),G<ns.length-1&&e.jsx("div",{className:`mx-2 hidden h-px flex-1 sm:block ${Ve?"bg-primary":"bg-border"}`})]},p.id)})})}),e.jsx(se,{}),e.jsxs("form",{onSubmit:u.handleSubmit(H),children:[n===0&&e.jsxs("div",{className:"space-y-4 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select a Member"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the member who will receive this training."})]}),e.jsx(z,{placeholder:"Search by name, email, or phone...",value:o,onChange:p=>d(p.target.value)}),x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):Z.length===0?e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No members found. Try a different search term."}):e.jsx("div",{className:"grid gap-2 max-h-[400px] overflow-y-auto pr-1",children:Z.map(p=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${j===p.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>u.setValue("memberId",p.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold",children:[p.firstName[0],p.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[p.firstName," ",p.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:p.isActive?"default":"secondary",children:p.isActive?"Active":"Inactive"}),j===p.id&&e.jsx(oe,{className:"h-5 w-5 text-primary"})]})]})},p.id))}),u.formState.errors.memberId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.memberId.message}),j&&K&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-900 dark:bg-amber-950/30",children:[e.jsx(it,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-400",children:"This member already has an active training"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-500 mt-0.5",children:[(I=(De=K.planVariant)==null?void 0:De.planType)==null?void 0:I.name," -"," ",(le=K.planVariant)==null?void 0:le.durationLabel," (expires"," ",new Date(K.endDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),"). Creating another will result in overlapping trainings."]})]})]})]}),n===1&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose a Training Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a training plan type and duration for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[U==null?void 0:U.firstName," ",U==null?void 0:U.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Training Plan Type"}),l?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):D&&D.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:D.map(p=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${M===p.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{u.setValue("planTypeId",p.id),u.setValue("planVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:p.name}),p.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:p.description})]}),M===p.id&&e.jsx(oe,{className:"h-5 w-5 text-primary shrink-0"})]})},p.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No training plan types available. Please create a training plan type first."}),u.formState.errors.planTypeId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.planTypeId.message})]}),M&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{className:"text-sm font-medium",children:"Duration & Pricing"}),y?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(ce,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):b&&b.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:b.map(p=>e.jsx(C,{className:`cursor-pointer transition-all hover:border-primary/50 ${m===p.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>u.setValue("planVariantId",p.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(T,{className:"inline h-4 w-4"}),p.price.toLocaleString()]}),m===p.id&&e.jsx(oe,{className:"h-5 w-5 text-primary"})]})]})},p.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this plan type."}),u.formState.errors.planVariantId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.planVariantId.message})]})]}),n===2&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Training Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure trainer, start date, discount, and other options."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"trainerName",children:"Trainer Name *"}),e.jsx(z,{id:"trainerName",placeholder:"Enter trainer name",...u.register("trainerName")}),u.formState.errors.trainerName&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.trainerName.message})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"startDate",children:"Start Date *"}),e.jsx(z,{id:"startDate",type:"date",...u.register("startDate")}),u.formState.errors.startDate&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.startDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"End Date"}),e.jsx(z,{type:"date",value:q||"",disabled:!0,className:"bg-muted"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Auto-calculated from plan duration (",$==null?void 0:$.durationDays," days)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"discountAmount",children:"Discount Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"discountAmount",type:"number",min:0,max:($==null?void 0:$.price)||0,className:"pl-9",...u.register("discountAmount")})]}),u.formState.errors.discountAmount&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.discountAmount.message})]}),$&&e.jsx(C,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3 w-3"}),$.price.toLocaleString()]})]}),N>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(T,{className:"inline h-3 w-3"}),N.toLocaleString()]})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Final Price"}),e.jsxs("span",{children:[e.jsx(T,{className:"inline h-3.5 w-3.5"}),ue.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"autoRenew",checked:u.watch("autoRenew"),onCheckedChange:p=>u.setValue("autoRenew",p===!0)}),e.jsx(f,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew training when it expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"notes",children:"Notes"}),e.jsx(fe,{id:"notes",...u.register("notes"),placeholder:"Any additional notes about this training...",rows:3})]})]}),n===3&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optionally record an initial payment for this training."})]}),e.jsx(C,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Training Summary"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Member: "}),e.jsxs("span",{className:"font-medium",children:[U==null?void 0:U.firstName," ",U==null?void 0:U.lastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan: "}),e.jsxs("span",{className:"font-medium",children:[ee==null?void 0:ee.name," - ",$==null?void 0:$.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trainer: "}),e.jsx("span",{className:"font-medium",children:u.watch("trainerName")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration: "}),e.jsxs("span",{className:"font-medium",children:[R," to ",q]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Due: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(T,{className:"inline h-3 w-3"}),ue.toLocaleString()]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{id:"collectPayment",checked:A,onCheckedChange:p=>u.setValue("collectPayment",p===!0)}),e.jsx(f,{htmlFor:"collectPayment",className:"text-sm font-normal",children:"Record initial payment now"})]}),A&&e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentAmount",children:"Payment Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{id:"paymentAmount",type:"number",min:0,className:"pl-9",defaultValue:ue,...u.register("paymentAmount")})]}),u.formState.errors.paymentAmount&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.paymentAmount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentMethod",children:"Payment Method *"}),e.jsxs(ss,{value:u.watch("paymentMethod")||"",onValueChange:p=>u.setValue("paymentMethod",p),children:[e.jsx(Ge,{id:"paymentMethod",children:e.jsx(as,{placeholder:"Select method"})}),e.jsx(Qe,{children:al.map(p=>e.jsx(pe,{value:p.value,children:p.label},p.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentReference",children:"Payment Reference / Transaction ID"}),e.jsx(z,{id:"paymentReference",...u.register("paymentReference"),placeholder:"e.g., UPI transaction ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"paymentNotes",children:"Payment Notes"}),e.jsx(fe,{id:"paymentNotes",...u.register("paymentNotes"),placeholder:"Any notes about this payment...",rows:2})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[e.jsx("div",{children:n>0?e.jsxs(w,{type:"button",variant:"outline",onClick:re,children:[e.jsx(lt,{className:"mr-1 h-4 w-4"}),"Back"]}):a?e.jsx(w,{type:"button",variant:"outline",onClick:a,disabled:v.isPending,children:"Cancel"}):e.jsx("div",{})}),e.jsx("div",{children:n<ns.length-1?e.jsxs(w,{type:"button",onClick:_,disabled:!ie(),children:["Next",e.jsx(Ss,{className:"ml-1 h-4 w-4"})]}):e.jsx(w,{type:"submit",disabled:v.isPending,children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Training"})})]})]})]})}function nl(){const s=qe(),a=()=>{s(O.TRAININGS)},t=()=>{s(O.TRAININGS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Create New Training",description:"Assign a training plan to a member with a trainer and optional payment recording."}),e.jsx(C,{className:"max-w-4xl",children:e.jsx(tl,{onSuccess:a,onCancel:t})})]})}const rl={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},fa={paid:{label:"Paid",variant:"default"},pending:{label:"Pending",variant:"outline"},failed:{label:"Failed",variant:"destructive"},refunded:{label:"Refunded",variant:"secondary"}},ja={cash:"Cash",card:"Card",upi:"UPI",bank_transfer:"Bank Transfer",other:"Other"};function gs(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Na(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function il(){var ee,$,ue,q,ie;const{id:s}=dt(),a=qe(),[t,n]=i.useState(!1),[r,o]=i.useState(!1),[d,g]=i.useState(!1),{data:x,isLoading:D}=Ii(s),{data:l,isLoading:v}=Oi(s),u=Li(),M=Ei(),m=zi(),j=x==null?void 0:x.data,N=l==null?void 0:l.data;if(D)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{className:"h-10 w-64"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsx(S,{className:"h-48 lg:col-span-2"}),e.jsx(S,{className:"h-48"})]}),e.jsx(S,{className:"h-64"})]});if(!j)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Training Not Found"}),e.jsx(C,{children:e.jsxs(V,{className:"flex flex-col items-center py-12",children:[e.jsx(ct,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The training you're looking for doesn't exist."}),e.jsx(w,{onClick:()=>a(O.TRAININGS),children:"Back to Trainings"})]})})]});const A=rl[j.status],R=j.member?`${j.member.firstName} ${j.member.lastName}`:"Unknown",b=(($=(ee=j.planVariant)==null?void 0:ee.planType)==null?void 0:$.name)??"N/A",y=((ue=j.planVariant)==null?void 0:ue.durationLabel)??"",B=N&&N.finalPrice>0?Math.min(100,Math.round(N.totalPaid/N.finalPrice*100)):0,K=j.status!=="cancelled",Y=j.status==="active",Z=j.status==="frozen",U=j.status==="active"||j.status==="frozen";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{title:"Training Details",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>a(O.TRAININGS),children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Back"]}),K&&e.jsxs(Be,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"icon",children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsxs(Le,{align:"end",children:[Y&&e.jsxs(ae,{onClick:()=>o(!0),children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Freeze Training"]}),Z&&e.jsxs(ae,{onClick:()=>g(!0),children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Unfreeze Training"]}),U&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),e.jsxs(ae,{className:"text-destructive focus:text-destructive",onClick:()=>n(!0),children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Cancel Training"]})]})]})]})]})}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(C,{className:"lg:col-span-2",children:[e.jsx(de,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ge,{className:"text-lg",children:"Training Info"}),e.jsx(W,{variant:A.variant,children:A.label})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx($e,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member"}),e.jsx("p",{className:"font-medium",children:R}),((q=j.member)==null?void 0:q.email)&&e.jsx("p",{className:"text-xs text-muted-foreground",children:j.member.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(te,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("p",{className:"font-medium",children:b}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[y," (",(ie=j.planVariant)==null?void 0:ie.durationDays," days)"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx($e,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trainer"}),e.jsx("p",{className:"font-medium",children:j.trainerName})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(es,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[gs(j.startDate)," -"," ",gs(j.endDate)]}),j.autoRenew&&e.jsx("p",{className:"text-xs text-emerald-600",children:"Auto-renew on"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(T,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),j.finalPrice.toLocaleString()]}),j.discountAmount>0&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",e.jsx(T,{className:"inline h-2.5 w-2.5"}),j.priceAtPurchase.toLocaleString()," -"," ",e.jsx(T,{className:"inline h-2.5 w-2.5"}),j.discountAmount.toLocaleString()," discount)"]})]})]})]})]}),j.notes&&e.jsxs(e.Fragment,{children:[e.jsx(se,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm",children:j.notes})]})]})]})]}),e.jsxs(C,{children:[e.jsxs(de,{children:[e.jsx(ge,{className:"text-lg",children:"Payment Status"}),e.jsx(Ye,{children:v?"Loading...":N!=null&&N.isFullyPaid?"Fully paid":"Outstanding balance"})]}),e.jsx(V,{children:v?e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"h-4 w-full"}),e.jsx(S,{className:"h-8 w-24"}),e.jsx(S,{className:"h-4 w-full"})]}):N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[B,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${N.isFullyPaid?"bg-emerald-500":B>50?"bg-primary":"bg-amber-500"}`,style:{width:`${B}%`}})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),N.finalPrice.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-emerald-600",children:[e.jsx("span",{children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),N.totalPaid.toLocaleString()]})]}),e.jsx(se,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:N.isFullyPaid?"text-emerald-600":"text-amber-600",children:N.isFullyPaid?"Fully Paid":"Balance Due"}),e.jsxs("span",{className:N.isFullyPaid?"text-emerald-600":"text-amber-600",children:[e.jsx(T,{className:"inline h-3 w-3"}),N.dueAmount.toLocaleString()]})]})]}),N.isFullyPaid&&e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-emerald-50 p-3 text-sm font-medium text-emerald-700 dark:bg-emerald-950/30 dark:text-emerald-400",children:[e.jsx(Ms,{className:"h-4 w-4"}),"All dues cleared"]})]}):null})]})]}),e.jsxs(C,{children:[e.jsxs(de,{children:[e.jsx(ge,{className:"text-lg",children:"Payment History"}),e.jsx(Ye,{children:"All payments recorded against this training"})]}),e.jsx(V,{children:v?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((_,re)=>e.jsx(S,{className:"h-12 w-full"},re))}):N&&N.payments.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Ue,{children:[e.jsx(Ke,{children:e.jsxs(me,{children:[e.jsx(F,{children:"Date"}),e.jsx(F,{children:"Amount"}),e.jsx(F,{children:"Method"}),e.jsx(F,{children:"Status"}),e.jsx(F,{children:"Reference"}),e.jsx(F,{children:"Notes"})]})}),e.jsx(He,{children:N.payments.map(_=>{const re=fa[_.status];return e.jsxs(me,{children:[e.jsx(L,{className:"text-sm",children:_.paidAt?Na(_.paidAt):Na(_.createdAt)}),e.jsxs(L,{className:"font-medium",children:[e.jsx(T,{className:"inline h-3 w-3"}),_.amount.toLocaleString()]}),e.jsx(L,{children:ja[_.method]||_.method}),e.jsx(L,{children:e.jsx(W,{variant:re.variant,children:re.label})}),e.jsx(L,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:_.reference||"-"}),e.jsx(L,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:_.notes||"-"})]},_.id)})})]})}),e.jsx("div",{className:"space-y-3 sm:hidden",children:N.payments.map(_=>{const re=fa[_.status];return e.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold inline-flex items-center",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),_.amount.toLocaleString()]}),e.jsx(W,{variant:re.variant,children:re.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:ja[_.method]||_.method}),e.jsx("span",{children:_.paidAt?gs(_.paidAt):gs(_.createdAt)})]}),_.reference&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ref: ",_.reference]})]},_.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Fe,{className:"h-8 w-8 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payments recorded yet"})]})})]}),e.jsx(ke,{open:t,onOpenChange:n,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Cancel this training?"}),e.jsxs(Se,{children:["This will permanently cancel"," ",e.jsx("span",{className:"font-medium text-foreground",children:R}),"'s ",b," training with ",j.trainerName,". This action cannot be undone."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Keep Training"}),e.jsx(Ce,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>u.mutate(j.id),disabled:u.isPending,children:u.isPending?"Cancelling...":"Yes, Cancel Training"})]})]})}),e.jsx(ke,{open:r,onOpenChange:o,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Freeze this training?"}),e.jsxs(Se,{children:["Freezing will temporarily pause"," ",e.jsx("span",{className:"font-medium text-foreground",children:R}),"'s training. You can unfreeze it anytime."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:()=>M.mutate(j.id),disabled:M.isPending,children:M.isPending?"Freezing...":"Yes, Freeze Training"})]})]})}),e.jsx(ke,{open:d,onOpenChange:g,children:e.jsxs(be,{children:[e.jsxs(ye,{children:[e.jsx(we,{children:"Unfreeze this training?"}),e.jsxs(Se,{children:["This will reactivate"," ",e.jsx("span",{className:"font-medium text-foreground",children:R}),"'s training sessions."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Ce,{onClick:()=>m.mutate(j.id),disabled:m.isPending,children:m.isPending?"Unfreezing...":"Yes, Unfreeze Training"})]})]})})]})}const ll=[{element:e.jsx(ir,{}),children:[{element:e.jsx(Fr,{}),children:[{path:"/dashboard",element:e.jsx(Lr,{})},{path:"/profile",element:e.jsx(Er,{})},{path:"/members",element:e.jsx(Zr,{})},{path:"/members/register",element:e.jsx(ti,{})},{path:"/plans",element:e.jsx(pi,{})},{path:"/memberships",element:e.jsx(Mi,{})},{path:"/memberships/create",element:e.jsx(_i,{})},{path:"/memberships/:id",element:e.jsx(Wi,{})},{path:"/trainings",element:e.jsx(el,{})},{path:"/trainings/create",element:e.jsx(nl,{})},{path:"/trainings/:id",element:e.jsx(il,{})}]}]}],dl=On([...rr,...ll]);function cl(){return e.jsx(qn,{router:dl})}Vn(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Un,{children:e.jsx(Hn,{children:e.jsx(cl,{})})})}));
