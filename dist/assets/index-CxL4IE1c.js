import{r as i,Q as Xt,j as e,a as Zt,R as en,t as sn,c as an,S as as,b as xs,J as tn,C as nn,z as rn,d as ln,M as dn,L as $e,D as W,O as aa,e as Ia,P as Cs,f as Fs,H as cn,g as on,h as La,U as Ke,F as mn,i as xn,k as un,l as us,m as hn,n as pn,A as Rs,o as gn,p as fn,q as xe,u as jn,N as Nn,s as Ea,I as za,v as $a,w as Va,x as qa,y as bn,B as Oa,E as Ba,G as _a,K as Ua,T as ue,V as Ka,W as yn,X as Ha,Y as Ga,Z as vn,_ as wn,$ as Sn,a0 as Is,a1 as Qa,a2 as Ls,a3 as Ya,a4 as ts,a5 as Es,a6 as zs,a7 as Wa,a8 as Ja,a9 as Cn,aa as kn,ab as An,ac as Dn,ad as Mn,ae as ta,af as Pn,ag as ba,ah as le,ai as He,aj as Xa,ak as Tn,al as Fn,am as Rn,an as ne,ao as se,ap as ae,aq as _,ar as ze,as as $s,at as P,au as We,av as na,aw as pe,ax as Qs,ay as ra,az as Za,aA as et,aB as In,aC as st,aD as at,aE as tt,aF as Ln,aG as nt,aH as En,aI as rt,aJ as it,aK as zn,aL as $n,aM as lt,aN as Vn,aO as qn,aP as dt,aQ as On,aR as qe,aS as Re,aT as I,aU as Oe,aV as Be,aW as ct,aX as Bn,aY as ot,aZ as mt,a_ as xt,a$ as ut,b0 as ht,b1 as _n,b2 as ya,b3 as os,b4 as ks,b5 as Js,b6 as As,b7 as pt,b8 as Vs,b9 as ms,ba as Un,bb as Kn,bc as Ve,bd as gt,be as ft,bf as Hn,bg as Gn,bh as ns,bi as qs,bj as Os,bk as jt,bl as Qn,bm as Nt,bn as bt,bo as yt,bp as vt,bq as Yn,br as Wn,bs as Jn}from"./vendor-BkKPjMzT.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const m of r)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const m={};return r.integrity&&(m.integrity=r.integrity),r.referrerPolicy&&(m.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?m.credentials="include":r.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function n(r){if(r.ep)return;r.ep=!0;const m=t(r);fetch(r.href,m)}})();function Xn({children:s}){const[a]=i.useState(()=>new Xt({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return e.jsxs(Zt,{client:a,children:[s,e.jsx(en,{initialIsOpen:!1})]})}function p(...s){return sn(an(s))}const ia=xs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=i.forwardRef(({className:s,variant:a,size:t,asChild:n=!1,...r},m)=>{const c=n?as:"button";return e.jsx(c,{className:p(ia({variant:a,size:t,className:s})),ref:m,...r})});v.displayName="Button";class Zn extends i.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,t){console.error("Error caught by boundary:",a,t)}render(){var a;return this.state.hasError?e.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),e.jsx("p",{className:"text-muted-foreground",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred"}),e.jsx(v,{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function er({children:s,...a}){return e.jsx(tn,{...a,children:s})}function sr({children:s}){return e.jsx(Zn,{children:e.jsx(er,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:e.jsx(Xn,{children:s})})})}const ar="pk_test_bGl0ZXJhdGUtc3dpZnQtMTguY2xlcmsuYWNjb3VudHMuZGV2JA";function tr({children:s}){return e.jsx(nn,{publishableKey:ar,appearance:{variables:{colorPrimary:"#000000"}},children:s})}const nr="http://localhost:5000/api/v1",L={HOME:"/",SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",DASHBOARD:"/dashboard",PROFILE:"/profile",MEMBERS:"/members",REGISTER_MEMBER:"/members/register",MEMBERSHIPS:"/memberships",CREATE_MEMBERSHIP:"/memberships/create",PLANS:"/plans",TRAININGS:"/trainings",CREATE_TRAINING:"/trainings/create"};function wt(){const{theme:s,setTheme:a}=rn();return e.jsxs(v,{variant:"ghost",size:"icon",onClick:()=>a(s==="light"?"dark":"light"),children:[e.jsx(ln,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(dn,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function rr(){return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx("header",{className:"border-b sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs($e,{to:L.HOME,className:"flex items-center gap-2 text-2xl font-bold",children:[e.jsx(W,{className:"h-6 w-6 text-primary"}),"Brofit 2.0"]}),e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("a",{href:"#facilities",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors px-3 py-2 hidden sm:inline-flex",children:"Facilities"}),e.jsx(wt,{})]})]})}),e.jsx("main",{className:"flex-1",children:e.jsx(aa,{})}),e.jsx("footer",{className:"border-t py-8 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4 text-center text-sm text-muted-foreground space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Brofit 2.0 — Train Hard, Stay Humble"}),e.jsx("p",{children:"© 2026 Brofit 2.0. All rights reserved."})]})})]})}const A=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));A.displayName="Card";const ee=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("flex flex-col space-y-1.5 p-6",s),...a}));ee.displayName="CardHeader";const de=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("text-2xl font-semibold leading-none tracking-tight",s),...a}));de.displayName="CardTitle";const Ze=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("text-sm text-muted-foreground",s),...a}));Ze.displayName="CardDescription";const V=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("p-6 pt-0",s),...a}));V.displayName="CardContent";const ir=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:p("flex items-center p-6 pt-0",s),...a}));ir.displayName="CardFooter";const lr=xs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Q({className:s,variant:a,...t}){return e.jsx("div",{className:p(lr({variant:a}),s),...t})}const te=i.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...n},r)=>e.jsx(Ia,{ref:r,decorative:t,orientation:a,className:p("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));te.displayName=Ia.displayName;const dr=[{icon:W,title:"Full Equipment Zone",description:"State-of-the-art machines, free weights, and functional training rigs for every fitness level."},{icon:cn,title:"Cardio Section",description:"Dedicated cardio area with treadmills, ellipticals, cycles, and rowing machines to keep your heart pumping."},{icon:on,title:"Clean Washrooms",description:"Hygienic, well-maintained washrooms available for all members. Freshness guaranteed."},{icon:La,title:"Changing Rooms",description:"Private, secure changing rooms with lockers so you can gear up comfortably before and after your workout."},{icon:Ke,title:"Separate Ladies Timing",description:"Dedicated time slots exclusively for women, ensuring a comfortable and private workout environment."},{icon:mn,title:"Expert Trainers",description:"Certified trainers who craft personalized plans and guide you every step of the way."}],cr=[{value:"500+",label:"Active Members"},{value:"5+",label:"Years Running"},{value:"6AM–10PM",label:"Open Daily"},{value:"100%",label:"Commitment"}],or=[{name:"Rahul S.",text:"Brofit changed my life. The trainers genuinely care and the equipment is top-notch. I've never felt more confident.",rating:5},{name:"Priya M.",text:"As a woman, the separate ladies timing is a game-changer. I feel safe and focused during my workouts. Love this place!",rating:5},{name:"Amit K.",text:"Clean facilities, great cardio section, and the changing rooms are always spotless. Best gym in the area, hands down.",rating:5}];function mr(){return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary/10 via-background to-primary/5",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-primary/20 via-transparent to-transparent opacity-60"}),e.jsx("div",{className:"container relative mx-auto px-4 py-24 md:py-36",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[e.jsx(Q,{variant:"secondary",className:"text-sm px-4 py-1",children:"Now Open — New Batch Starting Soon"}),e.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight leading-tight",children:["Your Body Deserves"," ",e.jsx("span",{className:"text-primary",children:"The Best Gym"})," in Town"]}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"At Brofit, we don't just build muscles — we build discipline, confidence, and a healthier you. Walk in unfit, walk out unstoppable."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center pt-4",children:[e.jsxs("a",{href:"tel:+919999999999",className:"inline-flex items-center gap-2 bg-primary text-primary-foreground px-8 py-3 rounded-lg font-semibold text-lg hover:bg-primary/90 transition-colors",children:[e.jsx(Cs,{className:"h-5 w-5"}),"Call Now"]}),e.jsxs("a",{href:"#facilities",className:"inline-flex items-center gap-2 border border-border px-8 py-3 rounded-lg font-semibold text-lg hover:bg-accent transition-colors",children:["Explore Facilities",e.jsx(Fs,{className:"h-5 w-5"})]})]})]})})]}),e.jsx("section",{className:"border-y bg-muted/50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:cr.map(s=>e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-primary",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.label})]},s.label))})})}),e.jsx("section",{id:"facilities",className:"py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Everything You Need, Under One Roof"}),e.jsx("p",{className:"text-muted-foreground mt-3 max-w-xl mx-auto text-lg",children:"From heavy lifting to peaceful cardio — Brofit is designed for every kind of fitness journey."})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:dr.map(s=>e.jsxs(A,{className:"p-6 hover:shadow-lg transition-shadow border-border/60 group",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors",children:e.jsx(s.icon,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]},s.title))})]})}),e.jsx(te,{}),e.jsx("section",{className:"py-20 md:py-28 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Why People Choose Brofit"}),e.jsxs("div",{className:"space-y-4 text-left text-muted-foreground text-lg leading-relaxed",children:[e.jsx("p",{children:"Brofit isn't just another gym — it's a community. We've spent years perfecting a space where everyone feels welcome, whether you're a first-timer or a seasoned lifter."}),e.jsx("p",{children:"Our separate ladies timing ensures women have their own dedicated, comfortable space. Our changing rooms and washrooms are cleaned multiple times a day. And our cardio section? It's got everything from treadmills to rowing machines, so you'll never wait for your turn."}),e.jsx("p",{children:"With certified trainers who know their craft and a vibe that keeps you coming back — Brofit is where results happen."})]})]})})}),e.jsx("section",{className:"py-20 md:py-28",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"text-center mb-14",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"What Our Members Say"})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:or.map(s=>e.jsxs(A,{className:"p-6",children:[e.jsx("div",{className:"flex gap-1 mb-3",children:Array.from({length:s.rating}).map((a,t)=>e.jsx(xn,{className:"h-4 w-4 fill-primary text-primary"},t))}),e.jsxs("p",{className:"text-muted-foreground leading-relaxed mb-4",children:['"',s.text,'"']}),e.jsx("p",{className:"font-semibold text-sm",children:s.name})]},s.name))})]})}),e.jsx(te,{}),e.jsx("section",{className:"py-20 md:py-28 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4 text-center space-y-6",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Come Visit Us"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-xl mx-auto",children:"Drop by anytime during our working hours. No appointment needed — just walk in and feel the energy."}),e.jsxs("div",{className:"flex flex-wrap gap-8 justify-center pt-4 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(un,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Your City, Your Area"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"+91 99999 99999"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"6:00 AM – 10:00 PM"})]})]})]})})]})}function xr(){return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary/10 px-4",children:[e.jsxs(A,{className:"w-full max-w-md p-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"mx-auto h-14 w-14 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(La,{className:"h-7 w-7 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Portal"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage members, plans, trainers, and gym operations."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx($e,{to:L.SIGN_IN,className:"block",children:e.jsxs(v,{size:"lg",className:"w-full gap-2",children:[e.jsx(hn,{className:"h-4 w-4"}),"Sign In"]})}),e.jsx($e,{to:L.SIGN_UP,className:"block",children:e.jsxs(v,{size:"lg",variant:"outline",className:"w-full gap-2",children:[e.jsx(pn,{className:"h-4 w-4"}),"Sign Up"]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs($e,{to:L.HOME,className:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Rs,{className:"h-3 w-3"}),"Back to Home"]})})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"Brofit 2.0"})]})]})}function ur(){return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(gn,{routing:"path",path:"/sign-in",signUpUrl:L.SIGN_UP,afterSignInUrl:L.DASHBOARD})})}function hr(){return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(fn,{routing:"path",path:L.SIGN_UP,signInUrl:L.SIGN_IN,afterSignUpUrl:L.DASHBOARD})})}function pr(){return e.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-4",children:[e.jsx("h1",{className:"text-6xl font-bold",children:"404"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Page not found"}),e.jsx($e,{to:L.HOME,children:e.jsx(v,{children:"Go Home"})})]})}const gr=[{element:e.jsx(rr,{}),children:[{path:"/",element:e.jsx(mr,{})}]},{path:"/admin",element:e.jsx(xr,{})},{path:"/sign-in/*",element:e.jsx(ur,{})},{path:"/sign-up/*",element:e.jsx(hr,{})},{path:"*",element:e.jsx(pr,{})}];function la(){return e.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:e.jsx(xe,{className:"h-8 w-8 animate-spin text-primary"})})}function fr(){const{isLoaded:s,isSignedIn:a}=jn();return s?a?e.jsx(aa,{}):e.jsx(Nn,{to:L.SIGN_IN,replace:!0}):e.jsx(la,{})}const es=i.forwardRef(({className:s,...a},t)=>e.jsx(Ea,{ref:t,className:p("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));es.displayName=Ea.displayName;const Ds=i.forwardRef(({className:s,...a},t)=>e.jsx(za,{ref:t,className:p("aspect-square h-full w-full",s),...a}));Ds.displayName=za.displayName;const ss=i.forwardRef(({className:s,...a},t)=>e.jsx($a,{ref:t,className:p("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));ss.displayName=$a.displayName;const Me=vn,Pe=wn,Bs=Sn,jr=i.forwardRef(({className:s,inset:a,children:t,...n},r)=>e.jsxs(Va,{ref:r,className:p("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...n,children:[t,e.jsx(Fs,{className:"ml-auto"})]}));jr.displayName=Va.displayName;const Nr=i.forwardRef(({className:s,...a},t)=>e.jsx(qa,{ref:t,className:p("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...a}));Nr.displayName=qa.displayName;const be=i.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(bn,{children:e.jsx(Oa,{ref:n,sideOffset:a,className:p("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t})}));be.displayName=Oa.displayName;const re=i.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(Ba,{ref:n,className:p("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...t}));re.displayName=Ba.displayName;const br=i.forwardRef(({className:s,children:a,checked:t,...n},r)=>e.jsxs(_a,{ref:r,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ua,{children:e.jsx(ue,{className:"h-4 w-4"})})}),a]}));br.displayName=_a.displayName;const hs=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(Ka,{ref:n,className:p("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ua,{children:e.jsx(yn,{className:"h-2 w-2 fill-current"})})}),a]}));hs.displayName=Ka.displayName;const rs=i.forwardRef(({className:s,inset:a,...t},n)=>e.jsx(Ha,{ref:n,className:p("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));rs.displayName=Ha.displayName;const Le=i.forwardRef(({className:s,...a},t)=>e.jsx(Ga,{ref:t,className:p("-mx-1 my-1 h-px bg-muted",s),...a}));Le.displayName=Ga.displayName;const Ys=768;function yr(){const[s,a]=i.useState(void 0);return i.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Ys-1}px)`),n=()=>{a(window.innerWidth<Ys)};return t.addEventListener("change",n),a(window.innerWidth<Ys),()=>t.removeEventListener("change",n)},[]),!!s}const q=i.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:p("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));q.displayName="Input";const St=Wa,vr=Qa,Ct=i.forwardRef(({className:s,...a},t)=>e.jsx(Is,{className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Ct.displayName=Is.displayName;const wr=xs("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),da=i.forwardRef(({side:s="right",className:a,children:t,...n},r)=>e.jsxs(vr,{children:[e.jsx(Ct,{}),e.jsxs(Ls,{ref:r,className:p(wr({side:s}),a),...n,children:[t,e.jsxs(Ya,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));da.displayName=Ls.displayName;const ca=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",s),...a});ca.displayName="SheetHeader";const oa=i.forwardRef(({className:s,...a},t)=>e.jsx(Es,{ref:t,className:p("text-lg font-semibold text-foreground",s),...a}));oa.displayName=Es.displayName;const ma=i.forwardRef(({className:s,...a},t)=>e.jsx(zs,{ref:t,className:p("text-sm text-muted-foreground",s),...a}));ma.displayName=zs.displayName;function k({className:s,...a}){return e.jsx("div",{className:p("animate-pulse rounded-md bg-muted",s),...a})}const Sr=Cn,Cr=kn,kr=An,kt=i.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(Ja,{ref:n,sideOffset:a,className:p("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...t}));kt.displayName=Ja.displayName;const Ar="sidebar_state",Dr=60*60*24*7,Mr="16rem",Pr="18rem",Tr="3rem",Fr="b",At=i.createContext(null);function _s(){const s=i.useContext(At);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}const Dt=i.forwardRef(({defaultOpen:s=!0,open:a,onOpenChange:t,className:n,style:r,children:m,...c},w)=>{const h=yr(),[D,l]=i.useState(!1),[N,o]=i.useState(s),M=a??N,u=i.useCallback(b=>{const f=typeof b=="function"?b(M):b;t?t(f):o(f),document.cookie=`${Ar}=${f}; path=/; max-age=${Dr}`},[t,M]),y=i.useCallback(()=>h?l(b=>!b):u(b=>!b),[h,u,l]);i.useEffect(()=>{const b=f=>{f.key===Fr&&(f.metaKey||f.ctrlKey)&&(f.preventDefault(),y())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[y]);const d=M?"expanded":"collapsed",T=i.useMemo(()=>({state:d,open:M,setOpen:u,isMobile:h,openMobile:D,setOpenMobile:l,toggleSidebar:y}),[d,M,u,h,D,l,y]);return e.jsx(At.Provider,{value:T,children:e.jsx(Sr,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":Mr,"--sidebar-width-icon":Tr,...r},className:p("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:w,...c,children:m})})})});Dt.displayName="SidebarProvider";const Mt=i.forwardRef(({side:s="left",variant:a="sidebar",collapsible:t="offcanvas",className:n,children:r,...m},c)=>{const{isMobile:w,state:h,openMobile:D,setOpenMobile:l}=_s();return t==="none"?e.jsx("div",{className:p("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:c,...m,children:r}):w?e.jsx(St,{open:D,onOpenChange:l,...m,children:e.jsxs(da,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] border-r bg-sidebar/95 p-0 text-sidebar-foreground backdrop-blur supports-[backdrop-filter]:bg-sidebar/80 [&>button]:hidden",style:{"--sidebar-width":Pr},side:s,children:[e.jsxs(ca,{className:"sr-only",children:[e.jsx(oa,{children:"Sidebar"}),e.jsx(ma,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})}):e.jsxs("div",{ref:c,className:"group peer hidden text-sidebar-foreground md:block","data-state":h,"data-collapsible":h==="collapsed"?t:"","data-variant":a,"data-side":s,children:[e.jsx("div",{className:p("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:p("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...m,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});Mt.displayName="Sidebar";const Pt=i.forwardRef(({className:s,onClick:a,...t},n)=>{const{toggleSidebar:r}=_s();return e.jsxs(v,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:p("h-7 w-7",s),onClick:m=>{a==null||a(m),r()},...t,children:[e.jsx(Dn,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Pt.displayName="SidebarTrigger";const Rr=i.forwardRef(({className:s,...a},t)=>{const{toggleSidebar:n}=_s();return e.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:p("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...a})});Rr.displayName="SidebarRail";const Tt=i.forwardRef(({className:s,...a},t)=>e.jsx("main",{ref:t,className:p("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...a}));Tt.displayName="SidebarInset";const Ir=i.forwardRef(({className:s,...a},t)=>e.jsx(q,{ref:t,"data-sidebar":"input",className:p("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...a}));Ir.displayName="SidebarInput";const Ft=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"header",className:p("flex flex-col gap-2 p-2",s),...a}));Ft.displayName="SidebarHeader";const Rt=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"footer",className:p("flex flex-col gap-2 p-2",s),...a}));Rt.displayName="SidebarFooter";const Lr=i.forwardRef(({className:s,...a},t)=>e.jsx(te,{ref:t,"data-sidebar":"separator",className:p("mx-2 w-auto bg-sidebar-border",s),...a}));Lr.displayName="SidebarSeparator";const It=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"content",className:p("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...a}));It.displayName="SidebarContent";const Lt=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group",className:p("relative flex w-full min-w-0 flex-col p-2",s),...a}));Lt.displayName="SidebarGroup";const Et=i.forwardRef(({className:s,asChild:a=!1,...t},n)=>{const r=a?as:"div";return e.jsx(r,{ref:n,"data-sidebar":"group-label",className:p("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...t})});Et.displayName="SidebarGroupLabel";const Er=i.forwardRef(({className:s,asChild:a=!1,...t},n)=>{const r=a?as:"button";return e.jsx(r,{ref:n,"data-sidebar":"group-action",className:p("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...t})});Er.displayName="SidebarGroupAction";const zt=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"group-content",className:p("w-full text-sm",s),...a}));zt.displayName="SidebarGroupContent";const Xs=i.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu",className:p("flex w-full min-w-0 flex-col gap-1",s),...a}));Xs.displayName="SidebarMenu";const Zs=i.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,"data-sidebar":"menu-item",className:p("group/menu-item relative",s),...a}));Zs.displayName="SidebarMenuItem";const zr=xs("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ea=i.forwardRef(({asChild:s=!1,isActive:a=!1,variant:t="default",size:n="default",tooltip:r,className:m,...c},w)=>{const h=s?as:"button",{isMobile:D,state:l}=_s(),N=e.jsx(h,{ref:w,"data-sidebar":"menu-button","data-size":n,"data-active":a,className:p(zr({variant:t,size:n}),m),...c});return r?(typeof r=="string"&&(r={children:r}),e.jsxs(Cr,{children:[e.jsx(kr,{asChild:!0,children:N}),e.jsx(kt,{side:"right",align:"center",hidden:l!=="collapsed"||D,...r})]})):N});ea.displayName="SidebarMenuButton";const $r=i.forwardRef(({className:s,asChild:a=!1,showOnHover:t=!1,...n},r)=>{const m=a?as:"button";return e.jsx(m,{ref:r,"data-sidebar":"menu-action",className:p("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...n})});$r.displayName="SidebarMenuAction";const Vr=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:p("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...a}));Vr.displayName="SidebarMenuBadge";const qr=i.forwardRef(({className:s,showIcon:a=!1,...t},n)=>{const r=i.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:p("flex h-8 items-center gap-2 rounded-md px-2",s),...t,children:[a&&e.jsx(k,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(k,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});qr.displayName="SidebarMenuSkeleton";const Or=i.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:p("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...a}));Or.displayName="SidebarMenuSub";const Br=i.forwardRef(({...s},a)=>e.jsx("li",{ref:a,...s}));Br.displayName="SidebarMenuSubItem";const _r=i.forwardRef(({asChild:s=!1,size:a="md",isActive:t,className:n,...r},m)=>{const c=s?as:"a";return e.jsx(c,{ref:m,"data-sidebar":"menu-sub-button","data-size":a,"data-active":t,className:p("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});_r.displayName="SidebarMenuSubButton";function Ur(){var m,c,w,h,D,l,N;const{signOut:s}=Mn(),{user:a}=ta(),t=Pn(),n=[{name:"Dashboard",href:L.DASHBOARD,icon:ba},{name:"Members",href:L.MEMBERS,icon:Ke},{name:"Plans",href:L.PLANS,icon:le},{name:"Memberships",href:L.MEMBERSHIPS,icon:le},{name:"Trainings",href:L.TRAININGS,icon:W},{name:"Profile",href:L.PROFILE,icon:He}],r=o=>t.pathname===o;return e.jsx(Dt,{children:e.jsxs("div",{className:"flex min-h-screen w-full overflow-hidden",children:[e.jsxs(Mt,{collapsible:"icon",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-2",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:e.jsx(ba,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none group-data-[collapsible=icon]:hidden",children:[e.jsx("span",{className:"font-semibold",children:"Brofit 2.0"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Fitness Management"})]})]})}),e.jsx(It,{children:e.jsxs(Lt,{children:[e.jsx(Et,{children:"Navigation"}),e.jsx(zt,{children:e.jsx(Xs,{children:n.map(o=>{const M=o.icon;return e.jsx(Zs,{children:e.jsx(ea,{asChild:!0,isActive:r(o.href),tooltip:o.name,children:e.jsxs($e,{to:o.href,children:[e.jsx(M,{}),e.jsx("span",{children:o.name})]})})},o.name)})})})]})}),e.jsx(Rt,{children:e.jsx(Xs,{children:e.jsx(Zs,{children:e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(ea,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(es,{className:"h-8 w-8 rounded-lg",children:[e.jsx(Ds,{src:a==null?void 0:a.imageUrl,alt:(a==null?void 0:a.fullName)||""}),e.jsxs(ss,{className:"rounded-lg",children:[(m=a==null?void 0:a.firstName)==null?void 0:m[0],(c=a==null?void 0:a.lastName)==null?void 0:c[0]]})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:a==null?void 0:a.fullName}),e.jsx("span",{className:"truncate text-xs",children:(w=a==null?void 0:a.primaryEmailAddress)==null?void 0:w.emailAddress})]}),e.jsx(Xa,{className:"ml-auto size-4"})]})}),e.jsxs(be,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:"bottom",align:"end",sideOffset:4,children:[e.jsx(rs,{className:"p-0 font-normal",children:e.jsxs("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[e.jsxs(es,{className:"h-8 w-8 rounded-lg",children:[e.jsx(Ds,{src:a==null?void 0:a.imageUrl,alt:(a==null?void 0:a.fullName)||""}),e.jsxs(ss,{className:"rounded-lg",children:[(h=a==null?void 0:a.firstName)==null?void 0:h[0],(D=a==null?void 0:a.lastName)==null?void 0:D[0]]})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:a==null?void 0:a.fullName}),e.jsx("span",{className:"truncate text-xs",children:(l=a==null?void 0:a.primaryEmailAddress)==null?void 0:l.emailAddress})]})]})}),e.jsx(Le,{}),e.jsx(re,{asChild:!0,children:e.jsxs($e,{to:L.PROFILE,className:"cursor-pointer",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Profile"]})}),e.jsx(Le,{}),e.jsxs(re,{className:"cursor-pointer text-red-600",onClick:()=>s(),children:[e.jsx(Tn,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})})})})]}),e.jsxs(Tt,{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 shrink-0 items-center gap-2 border-b bg-background px-4",children:[e.jsx(Pt,{className:"-ml-1"}),e.jsx(te,{orientation:"vertical",className:"mr-2 h-4"}),e.jsxs("div",{className:"flex flex-1 items-center justify-between gap-2",children:[e.jsx("h1",{className:"truncate text-lg font-semibold",children:((N=n.find(o=>r(o.href)))==null?void 0:N.name)||"Brofit 2.0"}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(Fn,{hidePersonal:!0,afterCreateOrganizationUrl:L.DASHBOARD,afterSelectOrganizationUrl:L.DASHBOARD,appearance:{elements:{rootBox:"flex items-center",organizationSwitcherTrigger:"px-2 py-1.5 md:px-3 md:py-2 rounded-md hover:bg-accent text-foreground text-sm"}}}),e.jsx(wt,{})]})]})]}),e.jsx("main",{className:"flex flex-1 flex-col gap-4 p-4 md:p-6",children:e.jsx(aa,{})})]})]})})}function ge({title:s,description:a,actions:t}){return e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s}),a&&e.jsx("p",{className:"text-muted-foreground mt-1",children:a})]}),t&&e.jsx("div",{className:"flex gap-2",children:t})]})}const F=Rn.create({baseURL:nr,headers:{"Content-Type":"application/json"},withCredentials:!0});F.interceptors.request.use(s=>s,s=>Promise.reject(s));F.interceptors.response.use(s=>s,s=>{var a,t,n;return((a=s.response)==null?void 0:a.status)===401?console.error("Unauthorized access"):((t=s.response)==null?void 0:t.status)===403?console.error("Access forbidden"):((n=s.response)==null?void 0:n.status)===500&&console.error("Server error:",s.response.data),Promise.reject(s)});const is={getAllMembers:async(s=1,a=100)=>(await F.get("/members",{params:{page:s,limit:a}})).data,searchMembers:async s=>(await F.get("/members/search",{params:s})).data,getMemberStats:async()=>(await F.get("/members/stats")).data,getMemberById:async s=>(await F.get(`/members/${s}`)).data,createMember:async s=>(await F.post("/members",s)).data,updateMember:async(s,a)=>(await F.patch(`/members/${s}`,a)).data,deleteMember:async s=>(await F.delete(`/members/${s}`)).data};function xa(s=1,a=100){return ne({queryKey:["members",s,a],queryFn:()=>is.getAllMembers(s,a)})}function Kr(s){return ne({queryKey:["members","search",s],queryFn:()=>is.searchMembers(s),enabled:!!s.q})}function $t(){return ne({queryKey:["members","stats"],queryFn:()=>is.getMemberStats()})}function Hr(){const s=se();return ae({mutationFn:a=>is.createMember(a),onSuccess:a=>{s.invalidateQueries({queryKey:["members"]}),_.success(a.message||"Member created successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create member")}})}function Gr(){const s=se();return ae({mutationFn:({memberId:a,data:t})=>is.updateMember(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["members"]}),s.invalidateQueries({queryKey:["members",t.memberId]}),_.success(a.message||"Member updated successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update member")}})}function Qr(){const s=se();return ae({mutationFn:a=>is.deleteMember(a),onSuccess:a=>{s.invalidateQueries({queryKey:["members"]}),_.success(a.message||"Member deleted successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to delete member")}})}const je={getAllMemberships:async(s=1,a=100)=>(await F.get("/memberships",{params:{page:s,limit:a}})).data,getMembershipById:async s=>(await F.get(`/memberships/${s}`)).data,getMemberMemberships:async s=>(await F.get(`/memberships/member/${s}`)).data,getActiveMembership:async s=>(await F.get(`/memberships/member/${s}/active`)).data,getMembershipStats:async()=>(await F.get("/memberships/stats")).data,createMembership:async s=>(await F.post("/memberships",s)).data,updateMembership:async(s,a)=>(await F.patch(`/memberships/${s}`,a)).data,cancelMembership:async s=>(await F.put(`/memberships/${s}/cancel`)).data,freezeMembership:async s=>(await F.put(`/memberships/${s}/freeze`)).data,unfreezeMembership:async s=>(await F.put(`/memberships/${s}/unfreeze`)).data,getMembershipDues:async s=>(await F.get(`/memberships/${s}/dues`)).data,recordPayment:async s=>(await F.post("/memberships/payments",s)).data,getExpiringMemberships:async(s=7)=>(await F.get("/memberships/expiring",{params:{days:s}})).data};function Yr(s=1,a=100){return ne({queryKey:["memberships",s,a],queryFn:()=>je.getAllMemberships(s,a)})}function Wr(s){return ne({queryKey:["memberships",s],queryFn:()=>je.getMembershipById(s),enabled:!!s})}function Jr(s){return ne({queryKey:["memberships","member",s,"active"],queryFn:()=>je.getActiveMembership(s),enabled:!!s})}function Vt(){return ne({queryKey:["memberships","stats"],queryFn:()=>je.getMembershipStats()})}function Xr(){const s=se();return ae({mutationFn:a=>je.createMembership(a),onSuccess:a=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["members"]}),_.success(a.message||"Membership created successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create membership")}})}function Zr(){const s=se();return ae({mutationFn:({id:a,data:t})=>je.updateMembership(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t.id]}),_.success(a.message||"Membership updated successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update membership")}})}function ei(){const s=se();return ae({mutationFn:a=>je.cancelMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),_.success(a.message||"Membership cancelled")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to cancel membership")}})}function si(){const s=se();return ae({mutationFn:a=>je.freezeMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),_.success(a.message||"Membership frozen")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to freeze membership")}})}function ai(){const s=se();return ae({mutationFn:a=>je.unfreezeMembership(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),s.invalidateQueries({queryKey:["memberships",t]}),_.success(a.message||"Membership unfrozen")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to unfreeze membership")}})}function ti(s){return ne({queryKey:["memberships",s,"dues"],queryFn:()=>je.getMembershipDues(s),enabled:!!s})}function ni(){const s=se();return ae({mutationFn:a=>je.recordPayment(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["memberships"]}),t.membershipId&&s.invalidateQueries({queryKey:["memberships",t.membershipId,"dues"]}),_.success(a.message||"Payment recorded successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to record payment")}})}function ri(s=7){return ne({queryKey:["memberships","expiring",s],queryFn:()=>je.getExpiringMemberships(s)})}const Te={getAllTrainings:async(s=1,a=100)=>(await F.get("/trainings",{params:{page:s,limit:a}})).data,getTrainingById:async s=>(await F.get(`/trainings/${s}`)).data,getMemberTrainings:async s=>(await F.get(`/trainings/member/${s}`)).data,getActiveTraining:async s=>(await F.get(`/trainings/member/${s}/active`)).data,getTrainingStats:async()=>(await F.get("/trainings/stats")).data,createTraining:async s=>(await F.post("/trainings",s)).data,updateTraining:async(s,a)=>(await F.patch(`/trainings/${s}`,a)).data,cancelTraining:async s=>(await F.put(`/trainings/${s}/cancel`)).data,freezeTraining:async s=>(await F.put(`/trainings/${s}/freeze`)).data,unfreezeTraining:async s=>(await F.put(`/trainings/${s}/unfreeze`)).data,getTrainingDues:async s=>(await F.get(`/trainings/${s}/dues`)).data,recordPayment:async s=>(await F.post("/trainings/payments",s)).data,getExpiringTrainings:async(s=7)=>(await F.get("/trainings/expiring",{params:{days:s}})).data};function ii(s=1,a=100){return ne({queryKey:["trainings",s,a],queryFn:()=>Te.getAllTrainings(s,a)})}function li(s){return ne({queryKey:["trainings",s],queryFn:()=>Te.getTrainingById(s),enabled:!!s})}function di(s){return ne({queryKey:["trainings","member",s,"active"],queryFn:()=>Te.getActiveTraining(s),enabled:!!s})}function qt(){return ne({queryKey:["trainings","stats"],queryFn:()=>Te.getTrainingStats()})}function Ot(){const s=se();return ae({mutationFn:a=>Te.createTraining(a),onSuccess:a=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["members"]}),_.success(a.message||"Training created successfully")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to create training")}})}function ci(){const s=se();return ae({mutationFn:a=>Te.cancelTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),_.success(a.message||"Training cancelled")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to cancel training")}})}function oi(){const s=se();return ae({mutationFn:a=>Te.freezeTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),_.success(a.message||"Training frozen")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to freeze training")}})}function mi(){const s=se();return ae({mutationFn:a=>Te.unfreezeTraining(a),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["trainings"]}),s.invalidateQueries({queryKey:["trainings",t]}),_.success(a.message||"Training unfrozen")},onError:a=>{var t,n;_.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to unfreeze training")}})}function xi(s){return ne({queryKey:["trainings",s,"dues"],queryFn:()=>Te.getTrainingDues(s),enabled:!!s})}function ui(s=7){return ne({queryKey:["trainings","expiring",s],queryFn:()=>Te.getExpiringTrainings(s)})}function Ue(s){return s.toLocaleString("en-IN")}function hi(s){const a=new Date(s).getTime()-Date.now();return Math.ceil(a/(1e3*60*60*24))}function vs({label:s,value:a,subtext:t,icon:n,colorClass:r,bgClass:m,isLoading:c,isCurrency:w}){return c?e.jsxs(A,{className:"overflow-hidden",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"h-4 w-24"}),e.jsx(k,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(k,{className:"h-8 w-20 mb-1"}),e.jsx(k,{className:"h-3 w-16"})]})]}):e.jsxs(A,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx("div",{className:`rounded-lg p-2 ${m}`,children:e.jsx(n,{className:`h-4 w-4 ${r}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:w?e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(P,{className:"h-5 w-5"}),Ue(a??0)]}):a??0}),t&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t})]})]})}function pi({name:s,plan:a,endDate:t,type:n,onClick:r}){const m=hi(t),c=m<=2;return e.jsxs("div",{className:"flex items-center justify-between py-3 cursor-pointer hover:bg-muted/50 -mx-2 px-2 rounded-lg transition-colors",onClick:r,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`rounded-full p-1.5 shrink-0 ${c?"bg-red-100 dark:bg-red-950/50":"bg-amber-100 dark:bg-amber-950/50"}`,children:e.jsx(ra,{className:`h-3.5 w-3.5 ${c?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-2",children:[e.jsx(Q,{variant:n==="membership"?"default":"secondary",className:"text-[10px] px-1.5 hidden sm:inline-flex",children:n==="membership"?"Membership":"Training"}),e.jsx("span",{className:`text-xs font-medium whitespace-nowrap ${c?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:m<=0?"Today":m===1?"Tomorrow":`${m} days`})]})]})}function gi(){const{user:s}=ta(),a=ze(),{data:t,isLoading:n}=$t(),{data:r,isLoading:m}=Vt(),{data:c,isLoading:w}=qt(),{data:h}=ri(7),{data:D}=ui(7),l=t==null?void 0:t.data,N=r==null?void 0:r.data,o=c==null?void 0:c.data,M=(h==null?void 0:h.data)??[],u=(D==null?void 0:D.data)??[],y=((N==null?void 0:N.totalCollected)??0)+((o==null?void 0:o.totalCollected)??0),d=((N==null?void 0:N.collectedThisMonth)??0)+((o==null?void 0:o.collectedThisMonth)??0),T=[...M.map(b=>{var f,j;return{id:b.id,name:b.member?`${b.member.firstName} ${b.member.lastName}`:"Unknown",plan:((j=(f=b.planVariant)==null?void 0:f.planType)==null?void 0:j.name)??"N/A",endDate:b.endDate,type:"membership",path:`/memberships/${b.id}`}}),...u.map(b=>{var f,j;return{id:b.id,name:b.member?`${b.member.firstName} ${b.member.lastName}`:"Unknown",plan:`${((j=(f=b.planVariant)==null?void 0:f.planType)==null?void 0:j.name)??"N/A"} (${b.trainerName})`,endDate:b.endDate,type:"training",path:`/trainings/${b.id}`}})].sort((b,f)=>new Date(b.endDate).getTime()-new Date(f.endDate).getTime());return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Dashboard",description:`Welcome back, ${(s==null?void 0:s.firstName)||"User"}!`}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:[e.jsx(vs,{label:"Total Members",value:l==null?void 0:l.total,subtext:l?`${l.active} active`:void 0,icon:Ke,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50",isLoading:n}),e.jsx(vs,{label:"Active Memberships",value:N==null?void 0:N.active,subtext:N?`${N.newThisMonth} new this month`:void 0,icon:le,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50",isLoading:m}),e.jsx(vs,{label:"Active Trainings",value:o==null?void 0:o.active,subtext:o?`${o.newThisMonth} new this month`:void 0,icon:W,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50",isLoading:w}),e.jsx(vs,{label:"Revenue This Month",value:d,subtext:`Total: ${Ue(y)}`,icon:$s,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50",isLoading:m||w,isCurrency:!0})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs(A,{children:[e.jsx(ee,{children:e.jsxs(de,{className:"text-base flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Revenue Breakdown"]})}),e.jsx(V,{className:"space-y-4",children:m||w?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((b,f)=>e.jsx(k,{className:"h-12 w-full"},f))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Membership Revenue"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold inline-flex items-center",children:[e.jsx(P,{className:"h-3 w-3"}),Ue((N==null?void 0:N.totalCollected)??0)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ue((N==null?void 0:N.collectedThisMonth)??0)," this month"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-violet-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Training Revenue"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold inline-flex items-center",children:[e.jsx(P,{className:"h-3 w-3"}),Ue((o==null?void 0:o.totalCollected)??0)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ue((o==null?void 0:o.collectedThisMonth)??0)," this month"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total Revenue"}),e.jsxs("p",{className:"text-lg font-bold inline-flex items-center",children:[e.jsx(P,{className:"h-4 w-4"}),Ue(y)]})]})]})})]}),e.jsxs(A,{children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs(de,{className:"text-base flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Expiring in 7 Days"]}),T.length>0&&e.jsx(Q,{variant:"secondary",children:T.length})]}),e.jsx(V,{children:T.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No memberships or trainings expiring in the next 7 days."}):e.jsx("div",{className:"divide-y max-h-[280px] overflow-y-auto",children:T.slice(0,10).map(b=>e.jsx(pi,{name:b.name,plan:b.plan,endDate:b.endDate,type:b.type,onClick:()=>a(b.path)},`${b.type}-${b.id}`))})})]})]}),e.jsxs(A,{children:[e.jsx(ee,{children:e.jsx(de,{className:"text-base",children:"Quick Actions"})}),e.jsx(V,{children:e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(v,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>a(L.REGISTER_MEMBER),children:[e.jsx("div",{className:"rounded-lg p-2 bg-blue-50 dark:bg-blue-950/50",children:e.jsx(na,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add Member"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new member"})]})]}),e.jsxs(v,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>a(L.CREATE_MEMBERSHIP),children:[e.jsx("div",{className:"rounded-lg p-2 bg-emerald-50 dark:bg-emerald-950/50",children:e.jsx(le,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:"New Membership"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a plan"})]})]}),e.jsxs(v,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>a(L.CREATE_TRAINING),children:[e.jsx("div",{className:"rounded-lg p-2 bg-violet-50 dark:bg-violet-950/50",children:e.jsx(W,{className:"h-4 w-4 text-violet-600 dark:text-violet-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:"New Training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a trainer"})]})]}),e.jsxs(v,{variant:"outline",className:"h-auto py-3 justify-start gap-3",onClick:()=>a(L.PLANS),children:[e.jsx("div",{className:"rounded-lg p-2 bg-amber-50 dark:bg-amber-950/50",children:e.jsx(pe,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:"Manage Plans"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Create or edit plans"})]})]})]})})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[e.jsxs(v,{variant:"outline",className:"h-auto py-4 justify-between",onClick:()=>a(L.MEMBERS),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"View All Members"})]}),e.jsx(Qs,{className:"h-4 w-4"})]}),e.jsxs(v,{variant:"outline",className:"h-auto py-4 justify-between",onClick:()=>a(L.MEMBERSHIPS),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"View Memberships"})]}),e.jsx(Qs,{className:"h-4 w-4"})]}),e.jsxs(v,{variant:"outline",className:"h-auto py-4 justify-between",onClick:()=>a(L.TRAININGS),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"View Trainings"})]}),e.jsx(Qs,{className:"h-4 w-4"})]})]})]})}function fi(){var a,t,n,r;const{user:s}=ta();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Profile",description:"Manage your account settings"}),e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(es,{className:"h-24 w-24",children:[e.jsx(Ds,{src:s==null?void 0:s.imageUrl,alt:(s==null?void 0:s.fullName)||""}),e.jsxs(ss,{className:"text-2xl",children:[(a=s==null?void 0:s.firstName)==null?void 0:a[0],(t=s==null?void 0:s.lastName)==null?void 0:t[0]]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s==null?void 0:s.fullName}),e.jsx("p",{className:"text-muted-foreground",children:(n=s==null?void 0:s.primaryEmailAddress)==null?void 0:n.emailAddress})]})]})}),e.jsxs(A,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),e.jsxs("dl",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Email"}),e.jsx("dd",{className:"font-medium",children:(r=s==null?void 0:s.primaryEmailAddress)==null?void 0:r.emailAddress})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Name"}),e.jsx("dd",{className:"font-medium",children:s==null?void 0:s.fullName})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Member Since"}),e.jsx("dd",{className:"font-medium",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString():"--"})]})]})]})]})}const Us=Wa,ji=Qa,Bt=i.forwardRef(({className:s,...a},t)=>e.jsx(Is,{ref:t,className:p("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Bt.displayName=Is.displayName;const ps=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(ji,{children:[e.jsx(Bt,{}),e.jsxs(Ls,{ref:n,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(Ya,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ps.displayName=Ls.displayName;const gs=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});gs.displayName="DialogHeader";const ua=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});ua.displayName="DialogFooter";const fs=i.forwardRef(({className:s,...a},t)=>e.jsx(Es,{ref:t,className:p("text-lg font-semibold leading-none tracking-tight",s),...a}));fs.displayName=Es.displayName;const js=i.forwardRef(({className:s,...a},t)=>e.jsx(zs,{ref:t,className:p("text-sm text-muted-foreground",s),...a}));js.displayName=zs.displayName;const Ni=xs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=i.forwardRef(({className:s,...a},t)=>e.jsx(Za,{ref:t,className:p(Ni(),s),...a}));S.displayName=Za.displayName;const Ne=i.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:p("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a}));Ne.displayName="Textarea";const ls=Vn,ds=qn,Je=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(et,{ref:n,className:p("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(In,{asChild:!0,children:e.jsx(st,{className:"h-4 w-4 opacity-50"})})]}));Je.displayName=et.displayName;const _t=i.forwardRef(({className:s,...a},t)=>e.jsx(at,{ref:t,className:p("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Xa,{className:"h-4 w-4"})}));_t.displayName=at.displayName;const Ut=i.forwardRef(({className:s,...a},t)=>e.jsx(tt,{ref:t,className:p("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(st,{className:"h-4 w-4"})}));Ut.displayName=tt.displayName;const Xe=i.forwardRef(({className:s,children:a,position:t="popper",...n},r)=>e.jsx(Ln,{children:e.jsxs(nt,{ref:r,className:p("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[e.jsx(_t,{}),e.jsx(En,{className:p("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Ut,{})]})}));Xe.displayName=nt.displayName;const bi=i.forwardRef(({className:s,...a},t)=>e.jsx(rt,{ref:t,className:p("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));bi.displayName=rt.displayName;const fe=i.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(it,{ref:n,className:p("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(zn,{children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx($n,{children:a})]}));fe.displayName=it.displayName;const yi=i.forwardRef(({className:s,...a},t)=>e.jsx(lt,{ref:t,className:p("-mx-1 my-1 h-px bg-muted",s),...a}));yi.displayName=lt.displayName;const Ee=i.forwardRef(({className:s,...a},t)=>e.jsx(dt,{ref:t,className:p("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(On,{className:p("flex items-center justify-center text-current"),children:e.jsx(ue,{className:"h-4 w-4"})})}));Ee.displayName=dt.displayName;const vi=qe({firstName:I().min(1,"First name is required"),lastName:I().min(1,"Last name is required"),email:I().email("Invalid email address"),phone:I().min(1,"Phone number is required"),dateOfBirth:I().min(1,"Date of birth is required"),gender:I().min(1,"Gender is required"),joinDate:I().min(1,"Join date is required"),notes:I().optional(),isActive:Re().optional()});function wi({member:s,open:a,onOpenChange:t}){const n=Gr(),[r,m]=i.useState(s.gender),[c,w]=i.useState(s.isActive),{register:h,handleSubmit:D,formState:{errors:l}}=Oe({resolver:Be(vi),defaultValues:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,dateOfBirth:s.dateOfBirth.split("T")[0],gender:s.gender,joinDate:s.joinDate.split("T")[0],notes:s.notes||"",isActive:s.isActive}}),N=async o=>{n.mutate({memberId:s.id,data:{...o,gender:r,isActive:c}},{onSuccess:()=>{t(!1)}})};return e.jsx(Us,{open:a,onOpenChange:t,children:e.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(gs,{children:[e.jsx(fs,{children:"Edit Member"}),e.jsx(js,{children:"Update member information. All changes will be saved immediately."})]}),e.jsxs("form",{onSubmit:D(N),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"firstName",children:"First Name *"}),e.jsx(q,{id:"firstName",...h("firstName"),placeholder:"John"}),l.firstName&&e.jsx("p",{className:"text-sm text-destructive",children:l.firstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(q,{id:"lastName",...h("lastName"),placeholder:"Doe"}),l.lastName&&e.jsx("p",{className:"text-sm text-destructive",children:l.lastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",children:"Email *"}),e.jsx(q,{id:"email",type:"email",...h("email"),placeholder:"john.doe@example.com"}),l.email&&e.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(q,{id:"phone",type:"tel",...h("phone"),placeholder:"+1 (555) 000-0000"}),l.phone&&e.jsx("p",{className:"text-sm text-destructive",children:l.phone.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(q,{id:"dateOfBirth",type:"date",...h("dateOfBirth")}),l.dateOfBirth&&e.jsx("p",{className:"text-sm text-destructive",children:l.dateOfBirth.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"gender",children:"Gender *"}),e.jsxs(ls,{value:r,onValueChange:m,children:[e.jsx(Je,{id:"gender",children:e.jsx(ds,{placeholder:"Select gender"})}),e.jsxs(Xe,{children:[e.jsx(fe,{value:"Male",children:"Male"}),e.jsx(fe,{value:"Female",children:"Female"}),e.jsx(fe,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"joinDate",children:"Join Date *"}),e.jsx(q,{id:"joinDate",type:"date",...h("joinDate")}),l.joinDate&&e.jsx("p",{className:"text-sm text-destructive",children:l.joinDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...h("notes"),placeholder:"Any additional information about this member...",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"isActive",checked:c,onCheckedChange:o=>w(o)}),e.jsx(S,{htmlFor:"isActive",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Active Member"})]}),e.jsxs(ua,{children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n.isPending,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:n.isPending,children:n.isPending?"Saving...":"Save Changes"})]})]})]})})}const Ie=_n,Si=Bn,Kt=i.forwardRef(({className:s,...a},t)=>e.jsx(ct,{className:p("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Kt.displayName=ct.displayName;const ve=i.forwardRef(({className:s,...a},t)=>e.jsxs(Si,{children:[e.jsx(Kt,{}),e.jsx(ot,{ref:t,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));ve.displayName=ot.displayName;const we=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",s),...a});we.displayName="AlertDialogHeader";const Se=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Se.displayName="AlertDialogFooter";const Ce=i.forwardRef(({className:s,...a},t)=>e.jsx(mt,{ref:t,className:p("text-lg font-semibold",s),...a}));Ce.displayName=mt.displayName;const ke=i.forwardRef(({className:s,...a},t)=>e.jsx(xt,{ref:t,className:p("text-sm text-muted-foreground",s),...a}));ke.displayName=xt.displayName;const Ae=i.forwardRef(({className:s,...a},t)=>e.jsx(ut,{ref:t,className:p(ia(),s),...a}));Ae.displayName=ut.displayName;const De=i.forwardRef(({className:s,...a},t)=>e.jsx(ht,{ref:t,className:p(ia({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));De.displayName=ht.displayName;const Ge=i.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:p("w-full caption-bottom text-sm",s),...a})}));Ge.displayName="Table";const Qe=i.forwardRef(({className:s,...a},t)=>e.jsx("thead",{ref:t,className:p("[&_tr]:border-b",s),...a}));Qe.displayName="TableHeader";const Ye=i.forwardRef(({className:s,...a},t)=>e.jsx("tbody",{ref:t,className:p("[&_tr:last-child]:border-0",s),...a}));Ye.displayName="TableBody";const Ci=i.forwardRef(({className:s,...a},t)=>e.jsx("tfoot",{ref:t,className:p("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a}));Ci.displayName="TableFooter";const he=i.forwardRef(({className:s,...a},t)=>e.jsx("tr",{ref:t,className:p("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a}));he.displayName="TableRow";const O=i.forwardRef(({className:s,...a},t)=>e.jsx("th",{ref:t,className:p("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a}));O.displayName="TableHead";const B=i.forwardRef(({className:s,...a},t)=>e.jsx("td",{ref:t,className:p("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a}));B.displayName="TableCell";const ki=i.forwardRef(({className:s,...a},t)=>e.jsx("caption",{ref:t,className:p("mt-4 text-sm text-muted-foreground",s),...a}));ki.displayName="TableCaption";function va(s,a){return`${s.charAt(0)}${a.charAt(0)}`.toUpperCase()}function wa(s){const a=["bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300","bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300","bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300","bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300","bg-rose-100 text-rose-700 dark:bg-rose-900/50 dark:text-rose-300","bg-cyan-100 text-cyan-700 dark:bg-cyan-900/50 dark:text-cyan-300","bg-fuchsia-100 text-fuchsia-700 dark:bg-fuchsia-900/50 dark:text-fuchsia-300","bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300"],t=s.split("").reduce((n,r)=>n+r.charCodeAt(0),0)%a.length;return a[t]}function Ai({members:s,isLoading:a}){const[t,n]=i.useState(null),[r,m]=i.useState(null),c=Qr(),w=()=>{r&&c.mutate(r.id,{onSuccess:()=>{m(null)}})},h=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=l=>{const N=new Date,o=new Date(l);let M=N.getFullYear()-o.getFullYear();const u=N.getMonth()-o.getMonth();return(u<0||u===0&&N.getDate()<o.getDate())&&M--,M};return a?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"hidden md:block",children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{children:[e.jsx(O,{children:"Member"}),e.jsx(O,{children:"Contact"}),e.jsx(O,{children:"Age/Gender"}),e.jsx(O,{children:"Join Date"}),e.jsx(O,{children:"Status"}),e.jsx(O,{className:"text-right",children:"Actions"})]})}),e.jsx(Ye,{children:Array.from({length:5}).map((l,N)=>e.jsxs(he,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-9 w-9 rounded-full"}),e.jsx(k,{className:"h-4 w-32"})]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(k,{className:"h-3.5 w-36"}),e.jsx(k,{className:"h-3.5 w-24"})]})}),e.jsx(B,{children:e.jsx(k,{className:"h-4 w-16"})}),e.jsx(B,{children:e.jsx(k,{className:"h-4 w-24"})}),e.jsx(B,{children:e.jsx(k,{className:"h-5 w-16 rounded-full"})}),e.jsx(B,{children:e.jsx(k,{className:"h-8 w-8 ml-auto rounded"})})]},N))})]})}),e.jsx("div",{className:"grid gap-3 md:hidden",children:Array.from({length:4}).map((l,N)=>e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"h-10 w-10 rounded-full shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(k,{className:"h-4 w-32"}),e.jsx(k,{className:"h-3 w-40"}),e.jsx(k,{className:"h-3 w-28"})]}),e.jsx(k,{className:"h-5 w-14 rounded-full"})]})},N))})]}):!s||s.length===0?e.jsxs(A,{className:"p-12 text-center border-dashed",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(Ke,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"No members found"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm max-w-sm mx-auto",children:"Get started by registering your first member to begin managing your gym roster."}),e.jsx(v,{asChild:!0,className:"mt-6",children:e.jsx($e,{to:L.REGISTER_MEMBER,children:"Register Member"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"hidden md:block overflow-hidden",children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{className:"bg-muted/50",children:[e.jsx(O,{children:"Member"}),e.jsx(O,{children:"Contact"}),e.jsx(O,{children:"Age / Gender"}),e.jsx(O,{children:"Join Date"}),e.jsx(O,{children:"Status"}),e.jsx(O,{className:"text-right",children:"Actions"})]})}),e.jsx(Ye,{children:s.map(l=>e.jsxs(he,{className:"group transition-colors",children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(es,{className:"h-9 w-9",children:e.jsx(ss,{className:`text-xs font-semibold ${wa(l.firstName+l.lastName)}`,children:va(l.firstName,l.lastName)})}),e.jsxs("span",{className:"font-medium",children:[l.firstName," ",l.lastName]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(ya,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0"}),e.jsx("span",{className:"truncate max-w-[200px]",children:l.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(Cs,{className:"h-3.5 w-3.5 shrink-0"}),l.phone]})]})}),e.jsx(B,{children:e.jsxs("span",{className:"text-sm",children:[D(l.dateOfBirth)," yrs",e.jsx("span",{className:"text-muted-foreground",children:" / "}),e.jsx("span",{className:"capitalize",children:l.gender})]})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx(os,{className:"h-3.5 w-3.5 text-muted-foreground"}),h(l.joinDate)]})}),e.jsx(B,{children:e.jsxs(Q,{variant:l.isActive?"default":"secondary",className:l.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/50 dark:text-emerald-300 border-0":"bg-gray-100 text-gray-600 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 border-0",children:[e.jsx("span",{className:`mr-1.5 h-1.5 w-1.5 rounded-full inline-block ${l.isActive?"bg-emerald-500":"bg-gray-400"}`}),l.isActive?"Active":"Inactive"]})}),e.jsx(B,{className:"text-right",children:e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity",children:e.jsx(ks,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(re,{onClick:()=>n(l),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit Member"]}),e.jsxs(re,{onClick:()=>m(l),className:"text-destructive focus:text-destructive",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Delete Member"]})]})]})})]},l.id))})]})}),e.jsx("div",{className:"grid gap-3 md:hidden",children:s.map(l=>e.jsx(A,{className:"p-4 transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(es,{className:"h-10 w-10 shrink-0",children:e.jsx(ss,{className:`text-sm font-semibold ${wa(l.firstName+l.lastName)}`,children:va(l.firstName,l.lastName)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-sm leading-tight",children:[l.firstName," ",l.lastName]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[D(l.dateOfBirth)," yrs",e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{className:"capitalize",children:l.gender})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Q,{variant:l.isActive?"default":"secondary",className:`text-[10px] px-2 py-0 h-5 ${l.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/50 dark:text-emerald-300 border-0":"bg-gray-100 text-gray-600 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 border-0"}`,children:l.isActive?"Active":"Inactive"}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",children:e.jsx(ks,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(re,{onClick:()=>n(l),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(re,{onClick:()=>m(l),className:"text-destructive focus:text-destructive",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(ya,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"truncate",children:l.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(Cs,{className:"h-3 w-3 shrink-0"}),l.phone]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(os,{className:"h-3 w-3 shrink-0"}),"Joined ",h(l.joinDate)]})]})]})]})},l.id))}),t&&e.jsx(wi,{member:t,open:!!t,onOpenChange:l=>!l&&n(null)}),e.jsx(Ie,{open:!!r,onOpenChange:l=>!l&&m(null),children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Delete Member"}),e.jsxs(ke,{children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),"? This action will soft delete the member. They can be reactivated later if needed."]})]}),e.jsxs(Se,{children:[e.jsx(De,{disabled:c.isPending,children:"Cancel"}),e.jsx(Ae,{onClick:w,disabled:c.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:c.isPending?"Deleting...":"Delete"})]})]})})]})}const Sa=[{value:"all",label:"All Members",icon:Ke},{value:"active",label:"Active",icon:na},{value:"inactive",label:"Inactive",icon:pt}],Di=[{key:"total",label:"Total Members",shortLabel:"Total",icon:Ke,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Members",shortLabel:"Active",icon:na,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"inactive",label:"Inactive Members",shortLabel:"Inactive",icon:pt,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:$s,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function Mi(){var f;const s=ze(),[a,t]=i.useState(""),[n,r]=i.useState(""),[m,c]=i.useState("all"),{data:w,isLoading:h}=xa(1,100),{data:D,isLoading:l}=Kr({q:n,page:1,limit:100}),{data:N,isLoading:o}=$t();i.useEffect(()=>{const j=setTimeout(()=>{r(a)},300);return()=>clearTimeout(j)},[a]);const M=n?D==null?void 0:D.data:w==null?void 0:w.data,u=n?l:h,y=M==null?void 0:M.filter(j=>m==="all"?!0:m==="active"?j.isActive:m==="inactive"?!j.isActive:!0),d=N==null?void 0:N.data,T=m!=="all"||!!n,b=((f=Sa.find(j=>j.value===m))==null?void 0:f.label)??"Filter";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Members",description:"Manage your gym members",actions:e.jsxs(v,{onClick:()=>s(L.REGISTER_MEMBER),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Member"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:o?Array.from({length:4}).map((j,R)=>e.jsxs(A,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(k,{className:"h-3 w-14"}),e.jsx(k,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"h-4 w-24"}),e.jsx(k,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(k,{className:"h-8 w-16 mb-1"}),e.jsx(k,{className:"h-3 w-20"})]})]})]},R)):d?Di.map(({key:j,label:R,shortLabel:E,icon:G,colorClass:X,bgClass:K})=>{const C=d[j],$=d.total>0&&j!=="total"&&j!=="newThisMonth"?Math.round(C/d.total*100):null;return e.jsxs(A,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${K}`,children:e.jsx(G,{className:`h-4 w-4 ${X}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:E}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:C})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-muted-foreground",children:R}),e.jsx("div",{className:`rounded-lg p-2 ${K}`,children:e.jsx(G,{className:`h-4 w-4 ${X}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:C}),$!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[$,"% of total members"]}),j==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Joined this month"})]})]})]},j)}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),e.jsx(q,{type:"text",placeholder:"Search members...",value:a,onChange:j=>t(j.target.value),className:"pl-9 pr-8 h-9"}),a&&e.jsx("button",{onClick:()=>{t(""),r("")},className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(ts,{className:"h-3.5 w-3.5"})})]}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"h-9 gap-2 shrink-0",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:m==="all"?"Filter":b}),m!=="all"&&e.jsx(Q,{variant:"secondary",className:"h-5 min-w-[20px] px-1 flex items-center justify-center rounded-full text-[10px] font-bold",children:"1"})]})}),e.jsxs(be,{align:"end",className:"w-48",children:[e.jsx(rs,{children:"Filter by status"}),e.jsx(Le,{}),e.jsx(Bs,{value:m,onValueChange:j=>c(j),children:Sa.map(({value:j,label:R,icon:E})=>e.jsxs(hs,{value:j,className:"gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),R]},j))})]})]}),T&&e.jsx(v,{variant:"ghost",size:"sm",className:"h-9 text-xs text-muted-foreground shrink-0",onClick:()=>{t(""),r(""),c("all")},children:"Reset"}),!u&&y&&e.jsxs("p",{className:"text-sm text-muted-foreground ml-auto hidden sm:block tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:y.length})," ",y.length===1?"member":"members"]})]}),e.jsx(Ai,{members:y,isLoading:u})]})}function Pi(){const s=Hr();return{createMember:s.mutate,createMemberAsync:s.mutateAsync,isLoading:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}const Ti=qe({firstName:I().min(1,"First name is required"),lastName:I().min(1,"Last name is required"),email:I().email("Invalid email format").optional().or(Un("")).transform(s=>s||""),phone:I().min(1,"Phone number is required"),dateOfBirth:I().min(1,"Date of birth is required"),gender:I().min(1,"Gender is required"),joinDate:I().min(1,"Join date is required"),notes:I().optional()});function Fi({onSuccess:s,onCancel:a}){const{createMember:t,isLoading:n}=Pi(),[r,m]=i.useState(""),c=Oe({resolver:Be(Ti),defaultValues:{dateOfBirth:"2008-01-01",joinDate:new Date().toISOString().split("T")[0],email:""}}),w=c.watch("firstName"),h=c.watch("lastName");i.useEffect(()=>{if(w&&h){const l=`${w.toLowerCase()}.${h.toLowerCase()}@dummy.com`;c.setValue("email",l)}},[w,h,c]);const D=l=>{const N={firstName:l.firstName,lastName:l.lastName,email:l.email,phone:l.phone,dateOfBirth:l.dateOfBirth,gender:l.gender,joinDate:l.joinDate,notes:l.notes};t(N,{onSuccess:()=>{c.reset(),s==null||s()}})};return e.jsxs("form",{onSubmit:c.handleSubmit(D),className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"firstName",children:"First Name *"}),e.jsx(q,{id:"firstName",...c.register("firstName"),placeholder:"John"}),c.formState.errors.firstName&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.firstName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(q,{id:"lastName",...c.register("lastName"),placeholder:"Doe"}),c.formState.errors.lastName&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.lastName.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",children:"Email (Auto-generated)"}),e.jsx(q,{id:"email",type:"email",...c.register("email"),placeholder:"john.doe@dummy.com",disabled:!0}),c.formState.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(q,{id:"phone",type:"tel",...c.register("phone"),placeholder:"+1 (555) 123-4567"}),c.formState.errors.phone&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.phone.message})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(q,{id:"dateOfBirth",type:"date",...c.register("dateOfBirth"),max:new Date().toISOString().split("T")[0]}),c.formState.errors.dateOfBirth&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.dateOfBirth.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"gender",children:"Gender *"}),e.jsxs(ls,{value:r,onValueChange:l=>{m(l),c.setValue("gender",l)},children:[e.jsx(Je,{id:"gender",children:e.jsx(ds,{placeholder:"Select gender"})}),e.jsxs(Xe,{children:[e.jsx(fe,{value:"Male",children:"Male"}),e.jsx(fe,{value:"Female",children:"Female"}),e.jsx(fe,{value:"Other",children:"Other"})]})]}),c.formState.errors.gender&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.gender.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"joinDate",children:"Join Date *"}),e.jsx(q,{id:"joinDate",type:"date",...c.register("joinDate")}),c.formState.errors.joinDate&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.joinDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...c.register("notes"),placeholder:"Any additional information about this member...",rows:4})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"submit",disabled:n,children:n?"Registering...":"Register Member"}),a&&e.jsx(v,{type:"button",variant:"outline",onClick:a,disabled:n,children:"Cancel"})]})]})}function Ri(){const s=ze(),a=()=>{s(L.MEMBERS)},t=()=>{s(L.MEMBERS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Register New Member",description:"Add a new member to your gym. Membership and training plans can be assigned separately."}),e.jsx(A,{className:"max-w-3xl",children:e.jsx(Fi,{onSuccess:a,onCancel:t})})]})}const Ns={getActivePlanTypes:async s=>(await F.get("/plans/types",{params:s?{category:s}:void 0})).data,getAllPlanTypes:async()=>(await F.get("/plans/types/all")).data,getPlanTypeById:async s=>(await F.get(`/plans/types/${s}`)).data,createPlanType:async s=>(await F.post("/plans/types",s)).data,updatePlanType:async(s,a)=>(await F.patch(`/plans/types/${s}`,a)).data,deletePlanType:async s=>(await F.delete(`/plans/types/${s}`)).data,deactivatePlanType:async s=>(await F.put(`/plans/types/${s}/deactivate`)).data};function Ii(){return ne({queryKey:["plan-types"],queryFn:async()=>(await Ns.getActivePlanTypes()).data})}function sa(s){return ne({queryKey:["plan-types","category",s],queryFn:async()=>(await Ns.getActivePlanTypes(s)).data})}function Li(){const s=se();return ae({mutationFn:a=>Ns.createPlanType(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-types"]}),_.success("Plan type created successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create plan type";_.error(t)}})}function Ei(){const s=se();return ae({mutationFn:({id:a,data:t})=>Ns.updatePlanType(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-types"]}),s.invalidateQueries({queryKey:["plan-types",t.id]}),_.success("Plan type updated successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to update plan type";_.error(t)}})}function zi(){const s=se();return ae({mutationFn:a=>Ns.deletePlanType(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-types"]}),_.success("Plan type deleted successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete plan type";_.error(t)}})}const $i=qe({name:I().min(1,"Name is required").max(100,"Name is too long"),description:I().optional(),category:Kn(["membership","training"]),isActive:Re().default(!0)});function Vi({open:s,onOpenChange:a,planType:t}){const n=!!t,r=Li(),m=Ei(),{register:c,handleSubmit:w,reset:h,setValue:D,watch:l,formState:{errors:N,isSubmitting:o}}=Oe({resolver:Be($i),defaultValues:{name:"",description:"",category:"membership",isActive:!0}}),M=l("isActive"),u=l("category");i.useEffect(()=>{s&&h(t?{name:t.name,description:t.description||"",category:t.category,isActive:t.isActive}:{name:"",description:"",category:"membership",isActive:!0})},[s,t,h]);const y=async d=>{try{n&&t?await m.mutateAsync({id:t.id,data:{name:d.name,description:d.description||void 0,category:d.category,isActive:d.isActive}}):await r.mutateAsync({name:d.name,description:d.description||void 0,category:d.category,isActive:d.isActive}),a(!1)}catch{}};return e.jsx(Us,{open:s,onOpenChange:a,children:e.jsxs(ps,{className:"sm:max-w-[500px]",children:[e.jsxs(gs,{children:[e.jsx(fs,{children:n?"Edit Plan Type":"Create Plan Type"}),e.jsx(js,{children:n?"Update the plan type details below.":`Add a new ${u==="training"?"training":"membership"} plan type.`})]}),e.jsxs("form",{onSubmit:w(y),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(q,{id:"name",placeholder:"e.g., Cardio, Strength Training, Yoga",...c("name"),className:N.name?"border-destructive":""}),N.name&&e.jsx("p",{className:"text-sm text-destructive",children:N.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"category",children:["Category ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ls,{value:u,onValueChange:d=>D("category",d),children:[e.jsx(Je,{id:"category",className:N.category?"border-destructive":"",children:e.jsx(ds,{placeholder:"Select category"})}),e.jsxs(Xe,{children:[e.jsx(fe,{value:"membership",children:"Membership"}),e.jsx(fe,{value:"training",children:"Training"})]})]}),N.category&&e.jsx("p",{className:"text-sm text-destructive",children:N.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"description",children:"Description"}),e.jsx(Ne,{id:"description",placeholder:"Describe this plan type...",rows:3,...c("description"),className:N.description?"border-destructive":""}),N.description&&e.jsx("p",{className:"text-sm text-destructive",children:N.description.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"isActive",checked:M,onCheckedChange:d=>D("isActive",d)}),e.jsx(S,{htmlFor:"isActive",className:"text-sm font-normal cursor-pointer",children:"Active (visible to members)"})]}),e.jsxs(ua,{children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:o,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:o,children:o?"Saving...":n?"Update":"Create"})]})]})]})})}const Ks={getVariantsByPlanType:async(s,a=!0)=>(await F.get(`/plans/types/${s}/variants`,{params:{includeInactive:a}})).data,getVariantById:async s=>(await F.get(`/plans/variants/${s}`)).data,createVariant:async(s,a)=>(await F.post(`/plans/types/${s}/variants`,a)).data,updateVariant:async(s,a)=>(await F.patch(`/plans/variants/${s}`,a)).data,deleteVariant:async s=>(await F.delete(`/plans/variants/${s}`)).data,deactivateVariant:async s=>(await F.put(`/plans/variants/${s}/deactivate`)).data};function Ms(s,a=!0){return ne({queryKey:["plan-variants","by-type",s,a],queryFn:async()=>(await Ks.getVariantsByPlanType(s,a)).data,enabled:!!s})}function qi(){const s=se();return ae({mutationFn:({planTypeId:a,data:t})=>Ks.createVariant(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-variants","by-type",t.planTypeId]}),s.invalidateQueries({queryKey:["plan-types",t.planTypeId]}),_.success("Plan variant created successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to create plan variant";_.error(t)}})}function Oi(){const s=se();return ae({mutationFn:({id:a,data:t})=>Ks.updateVariant(a,t),onSuccess:(a,t)=>{s.invalidateQueries({queryKey:["plan-variants"]}),a.data.planTypeId&&s.invalidateQueries({queryKey:["plan-types",a.data.planTypeId]}),_.success("Plan variant updated successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to update plan variant";_.error(t)}})}function Bi(){const s=se();return ae({mutationFn:a=>Ks.deleteVariant(a),onSuccess:()=>{s.invalidateQueries({queryKey:["plan-variants"]}),s.invalidateQueries({queryKey:["plan-types"]}),_.success("Plan variant deleted successfully")},onError:a=>{var n,r;const t=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to delete plan variant";_.error(t)}})}const _i=qe({durationDays:Ve().min(1,"Duration must be at least 1 day").max(3650,"Duration cannot exceed 10 years"),durationLabel:I().min(1,"Duration label is required").max(50,"Label is too long"),price:Ve().min(0,"Price cannot be negative").max(1e6,"Price is too high"),isActive:Re().default(!0)});function Ui({planType:s,open:a,onOpenChange:t}){const[n,r]=i.useState("list"),[m,c]=i.useState(null),[w,h]=i.useState(!1),[D,l]=i.useState(null),{data:N,isLoading:o}=Ms((s==null?void 0:s.id)||"",!0),M=Bi(),u=qi(),y=Oi(),{register:d,handleSubmit:T,reset:b,setValue:f,watch:j,formState:{errors:R,isSubmitting:E}}=Oe({resolver:Be(_i),defaultValues:{durationDays:30,durationLabel:"",price:0,isActive:!0}}),G=j("isActive");i.useEffect(()=>{n==="create"?b({durationDays:30,durationLabel:"",price:0,isActive:!0}):n==="edit"&&m&&b({durationDays:m.durationDays,durationLabel:m.durationLabel,price:m.price,isActive:m.isActive})},[n,m,b]),i.useEffect(()=>{a||(r("list"),c(null))},[a]);const X=U=>{c(U),r("edit")},K=U=>{l(U),h(!0)},C=()=>{r("list"),c(null),b()},$=async U=>{if(s)try{n==="edit"&&m?await y.mutateAsync({id:m.id,data:{durationDays:U.durationDays,durationLabel:U.durationLabel,price:U.price,isActive:U.isActive}}):await u.mutateAsync({planTypeId:s.id,data:{durationDays:U.durationDays,durationLabel:U.durationLabel,price:U.price,isActive:U.isActive}}),C()}catch{}},ce=()=>{D&&M.mutate(D.id,{onSuccess:()=>{h(!1),l(null)}})};return s?e.jsxs(e.Fragment,{children:[e.jsx(St,{open:a,onOpenChange:t,children:e.jsxs(da,{className:"w-full sm:max-w-lg overflow-y-auto",children:[e.jsx(ca,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[n!=="list"&&e.jsx(v,{variant:"ghost",size:"icon",onClick:C,className:"h-8 w-8",children:e.jsx(Rs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(oa,{children:[n==="list"&&"Manage Pricing Variants",n==="create"&&"Add New Variant",n==="edit"&&"Edit Variant"]}),e.jsx(ma,{children:s.name})]})]})}),e.jsx("div",{className:"mt-6",children:n==="list"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{onClick:()=>r("create"),className:"w-full",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Variant"]}),e.jsx(te,{}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(la,{})}):N&&N.length>0?e.jsx("div",{className:"space-y-3",children:N.map(U=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:U.durationLabel}),e.jsx(Q,{variant:U.isActive?"default":"secondary",className:"mt-1",children:U.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>X(U),children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>K(U),className:"text-destructive hover:text-destructive",children:e.jsx(As,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[e.jsx(os,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"text-sm font-medium",children:[U.durationDays," days"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/50",children:[e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-sm font-medium",children:["$",U.price]})]})]})]})]},U.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No variants yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add pricing variants to offer different durations and prices"})]})]}):e.jsxs("form",{onSubmit:T($),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"durationLabel",children:["Duration Label ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(q,{id:"durationLabel",placeholder:"e.g., 1 Month, 3 Months, 1 Year",...d("durationLabel"),className:R.durationLabel?"border-destructive":""}),R.durationLabel&&e.jsx("p",{className:"text-sm text-destructive",children:R.durationLabel.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'This is what members will see (e.g., "1 Month", "3 Months")'})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"durationDays",children:["Duration (days) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(q,{id:"durationDays",type:"number",placeholder:"30",...d("durationDays"),className:R.durationDays?"border-destructive":""}),R.durationDays&&e.jsx("p",{className:"text-sm text-destructive",children:R.durationDays.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"price",children:["Price ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(q,{id:"price",type:"number",step:"0.01",placeholder:"0.00",...d("price"),className:R.price?"border-destructive":""}),R.price&&e.jsx("p",{className:"text-sm text-destructive",children:R.price.message})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"isActive",checked:G,onCheckedChange:U=>f("isActive",U)}),e.jsx(S,{htmlFor:"isActive",className:"text-sm font-normal cursor-pointer",children:"Active (visible to members)"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:C,disabled:E,className:"flex-1",children:"Cancel"}),e.jsx(v,{type:"submit",disabled:E,className:"flex-1",children:E?"Saving...":n==="edit"?"Update":"Create"})]})]})})]})}),e.jsx(Ie,{open:w,onOpenChange:h,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Delete Variant?"}),e.jsxs(ke,{children:['This will permanently delete the "',D==null?void 0:D.durationLabel,'" variant for'," ",s.name,". This action cannot be undone."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:ce,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):null}const Ca=[{value:"all",label:"All Plans",icon:Hn},{value:"membership",label:"Membership",icon:le},{value:"training",label:"Training",icon:W}];function Ki(){var K;const[s,a]=i.useState(!1),[t,n]=i.useState(null),[r,m]=i.useState(null),[c,w]=i.useState(!1),[h,D]=i.useState(null),[l,N]=i.useState("all"),[o,M]=i.useState(""),{data:u,isLoading:y}=Ii(),d=zi(),T=C=>{n(C)},b=C=>{D(C),w(!0)},f=()=>{h&&d.mutate(h.id,{onSuccess:()=>{w(!1),D(null)}})},j=C=>{m(C)},R=o.toLowerCase(),E=(u??[]).filter(C=>l==="all"||C.category===l?o?C.name.toLowerCase().includes(R)||(C.description??"").toLowerCase().includes(R):!0:!1),G=l!=="all"||!!o,X=((K=Ca.find(C=>C.value===l))==null?void 0:K.label)??"Filter";return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(la,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Plans Management",description:"Manage plan types and their pricing variants",actions:e.jsxs(v,{onClick:()=>a(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Plan Type"]})}),u&&u.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),e.jsx(q,{type:"text",placeholder:"Search plans...",value:o,onChange:C=>M(C.target.value),className:"pl-9 pr-8 h-9"}),o&&e.jsx("button",{onClick:()=>M(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(ts,{className:"h-3.5 w-3.5"})})]}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"h-9 gap-2 shrink-0",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:l==="all"?"Category":X}),l!=="all"&&e.jsx(Q,{variant:"secondary",className:"h-5 min-w-[20px] px-1 flex items-center justify-center rounded-full text-[10px] font-bold",children:"1"})]})}),e.jsxs(be,{align:"end",className:"w-48",children:[e.jsx(rs,{children:"Filter by category"}),e.jsx(Le,{}),e.jsx(Bs,{value:l,onValueChange:C=>N(C),children:Ca.map(({value:C,label:$,icon:ce})=>e.jsxs(hs,{value:C,className:"gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),$]},C))})]})]}),G&&e.jsx(v,{variant:"ghost",size:"sm",className:"h-9 text-xs text-muted-foreground shrink-0",onClick:()=>{M(""),N("all")},children:"Reset"}),e.jsxs("p",{className:"text-sm text-muted-foreground ml-auto hidden sm:block tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:E.length})," ",E.length===1?"plan":"plans"]})]}),u&&u.length>0?E.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:E.map(C=>e.jsxs(A,{className:"flex flex-col",children:[e.jsxs(ee,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:C.category==="training"?e.jsx(W,{className:"h-5 w-5 text-primary"}):e.jsx(le,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:C.name}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx(Q,{variant:C.isActive?"default":"secondary",children:C.isActive?"Active":"Inactive"}),e.jsx(Q,{variant:"outline",className:"capitalize",children:C.category})]})]})]}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",children:e.jsx(Gn,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(re,{onClick:()=>T(C),children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(re,{onClick:()=>b(C),className:"text-destructive",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),C.description&&e.jsx(Ze,{className:"mt-2",children:C.description})]}),e.jsxs(V,{className:"flex-1 flex flex-col",children:[e.jsx(te,{className:"mb-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Pricing Variants"}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>j(C),children:"Manage"})]}),C.variants&&C.variants.length>0?e.jsxs("div",{className:"space-y-2",children:[C.variants.slice(0,3).map($=>e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:$.durationLabel})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold",children:$.price})]})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[$.durationDays," days"]})]},$.id)),C.variants.length>3&&e.jsxs(v,{variant:"outline",size:"sm",className:"w-full",onClick:()=>j(C),children:["View all ",C.variants.length," variants"]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No pricing variants yet"}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>j(C),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Variant"]})]})]})]})]},C.id))}):e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ms,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No plans match your filters"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your search or category filter."}),e.jsx(v,{variant:"outline",onClick:()=>{M(""),N("all")},children:"Clear Filters"})]})}):e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(W,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No plan types yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first plan type to get started"}),e.jsxs(v,{onClick:()=>a(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Plan Type"]})]})}),e.jsx(Vi,{open:s||!!t,onOpenChange:C=>{C||(a(!1),n(null))},planType:t}),e.jsx(Ui,{planType:r,open:!!r,onOpenChange:C=>{C||m(null)}}),e.jsx(Ie,{open:c,onOpenChange:w,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Are you sure?"}),e.jsxs(ke,{children:['This will permanently delete the plan type "',h==null?void 0:h.name,'" and all its variants. This action cannot be undone.']})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:f,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}const Ht={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},ka=[{value:"all",label:"All Memberships",icon:le},{value:"active",label:"Active",icon:ns},{value:"expired",label:"Expired",icon:us},{value:"cancelled",label:"Cancelled",icon:qs},{value:"frozen",label:"Frozen",icon:Os}],Hi=[{key:"total",label:"Total Memberships",shortLabel:"Total",icon:le,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Memberships",shortLabel:"Active",icon:ns,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"expired",label:"Expired",shortLabel:"Expired",icon:us,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:$s,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function Ps(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Gi({membership:s,onClick:a}){var c,w,h;const t=Ht[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((w=(c=s.planVariant)==null?void 0:c.planType)==null?void 0:w.name)??"N/A",m=((h=s.planVariant)==null?void 0:h.durationLabel)??"";return e.jsxs(he,{className:"cursor-pointer hover:bg-muted/50",onClick:a,children:[e.jsx(B,{className:"font-medium",children:n}),e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m})]})}),e.jsx(B,{children:e.jsx(Q,{variant:t.variant,children:t.label})}),e.jsx(B,{className:"hidden md:table-cell",children:Ps(s.startDate)}),e.jsx(B,{className:"hidden md:table-cell",children:Ps(s.endDate)}),e.jsx(B,{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center font-medium",children:[e.jsx(P,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})})]})}function Qi({membership:s,onClick:a}){var c,w,h;const t=Ht[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((w=(c=s.planVariant)==null?void 0:c.planType)==null?void 0:w.name)??"N/A",m=((h=s.planVariant)==null?void 0:h.durationLabel)??"";return e.jsx(A,{className:"cursor-pointer transition-shadow hover:shadow-md",onClick:a,children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r," - ",m]})]}),e.jsx(Q,{variant:t.variant,children:t.label})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(We,{className:"h-3.5 w-3.5"}),Ps(s.startDate)," - ",Ps(s.endDate)]}),e.jsxs("span",{className:"inline-flex items-center font-semibold",children:[e.jsx(P,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})]})]})})}function Yi(){var y;const s=ze(),[a,t]=i.useState("all"),[n,r]=i.useState(""),{data:m,isLoading:c}=Yr(),{data:w,isLoading:h}=Vt(),D=(m==null?void 0:m.data)??[],l=w==null?void 0:w.data,N=n.toLowerCase(),o=D.filter(d=>{var j,R;if(!(a==="all"||d.status===a))return!1;if(!n)return!0;const b=d.member?`${d.member.firstName} ${d.member.lastName}`.toLowerCase():"",f=(((R=(j=d.planVariant)==null?void 0:j.planType)==null?void 0:R.name)??"").toLowerCase();return b.includes(N)||f.includes(N)}),M=a!=="all"||!!n,u=((y=ka.find(d=>d.value===a))==null?void 0:y.label)??"Filter";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Memberships",description:"Manage gym memberships",actions:e.jsxs(v,{onClick:()=>s(L.CREATE_MEMBERSHIP),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"New Membership"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:h?Array.from({length:4}).map((d,T)=>e.jsxs(A,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(k,{className:"h-3 w-14"}),e.jsx(k,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"h-4 w-24"}),e.jsx(k,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(k,{className:"h-8 w-16 mb-1"}),e.jsx(k,{className:"h-3 w-20"})]})]})]},T)):l?Hi.map(({key:d,label:T,shortLabel:b,icon:f,colorClass:j,bgClass:R})=>{const E=l[d],G=l.total>0&&d!=="total"&&d!=="newThisMonth"?Math.round(E/l.total*100):null;return e.jsxs(A,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${R}`,children:e.jsx(f,{className:`h-4 w-4 ${j}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:b}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:E})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-muted-foreground",children:T}),e.jsx("div",{className:`rounded-lg p-2 ${R}`,children:e.jsx(f,{className:`h-4 w-4 ${j}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:E}),G!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[G,"% of total"]}),d==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Created this month"})]})]})]},d)}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),e.jsx(q,{type:"text",placeholder:"Search by member or plan...",value:n,onChange:d=>r(d.target.value),className:"pl-9 pr-8 h-9"}),n&&e.jsx("button",{onClick:()=>r(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(ts,{className:"h-3.5 w-3.5"})})]}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"h-9 gap-2 shrink-0",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="all"?"Filter":u}),a!=="all"&&e.jsx(Q,{variant:"secondary",className:"h-5 min-w-[20px] px-1 flex items-center justify-center rounded-full text-[10px] font-bold",children:"1"})]})}),e.jsxs(be,{align:"end",className:"w-48",children:[e.jsx(rs,{children:"Filter by status"}),e.jsx(Le,{}),e.jsx(Bs,{value:a,onValueChange:d=>t(d),children:ka.map(({value:d,label:T,icon:b})=>e.jsxs(hs,{value:d,className:"gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),T]},d))})]})]}),M&&e.jsx(v,{variant:"ghost",size:"sm",className:"h-9 text-xs text-muted-foreground shrink-0",onClick:()=>{r(""),t("all")},children:"Reset"}),!c&&e.jsxs("p",{className:"text-sm text-muted-foreground ml-auto hidden sm:block tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:o.length})," ",o.length===1?"membership":"memberships"]})]}),c?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((d,T)=>e.jsx(k,{className:"h-16 w-full rounded-lg"},T))}):o.length===0?e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:e.jsx(le,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:M?"No memberships match your filters":"No memberships yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:M?"Try adjusting your search or filter criteria.":"Create a membership to assign a plan to a member."}),M?e.jsx(v,{variant:"outline",onClick:()=>{r(""),t("all")},children:"Clear Filters"}):e.jsxs(v,{onClick:()=>s(L.CREATE_MEMBERSHIP),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create First Membership"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(A,{children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{children:[e.jsx(O,{children:"Member"}),e.jsx(O,{children:"Plan"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Start Date"}),e.jsx(O,{children:"End Date"}),e.jsx(O,{className:"text-right",children:"Amount"})]})}),e.jsx(Ye,{children:o.map(d=>e.jsx(Gi,{membership:d,onClick:()=>s(`/memberships/${d.id}`)},d.id))})]})})}),e.jsx("div",{className:"space-y-3 md:hidden",children:o.map(d=>e.jsx(Qi,{membership:d,onClick:()=>s(`/memberships/${d.id}`)},d.id))})]})]})}const Gt=i.forwardRef(({className:s,...a},t)=>e.jsx(jt,{className:p("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:e.jsx(Qn,{className:p("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Gt.displayName=jt.displayName;const Wi=qe({memberId:I().min(1,"Please select a member"),planTypeId:I().min(1,"Please select a plan type"),planVariantId:I().min(1,"Please select a plan variant"),startDate:I().min(1,"Start date is required"),discountAmount:Ve().min(0,"Discount cannot be negative").default(0),autoRenew:Re().default(!1),notes:I().optional(),collectPayment:Re().default(!1),paymentAmount:Ve().optional(),paymentMethod:I().optional(),paymentReference:I().optional(),paymentNotes:I().optional(),addTraining:Re().default(!1),trainingPlanTypeId:I().optional(),trainingPlanVariantId:I().optional(),trainerName:I().optional(),trainingDiscountAmount:Ve().min(0).default(0),trainingNotes:I().optional()}).refine(s=>s.collectPayment?!!s.paymentMethod&&(s.paymentAmount??0)>0:!0,{message:"Payment amount and method are required when collecting payment",path:["paymentAmount"]}).refine(s=>s.addTraining?!!s.trainingPlanTypeId&&!!s.trainingPlanVariantId&&!!s.trainerName:!0,{message:"Training plan, variant, and trainer name are required",path:["trainerName"]}),Ws=[{id:"member",label:"Select Member",icon:He},{id:"plan",label:"Choose Plan",icon:W},{id:"details",label:"Details",icon:We},{id:"payment",label:"Payment",icon:le}],Ji={id:"training",label:"Training",icon:W},Xi=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function Zi({onSuccess:s,onCancel:a}){var ha,pa,ga,fa,ja;const[t,n]=i.useState(0),[r,m]=i.useState(""),{data:c,isLoading:w}=xa(),{data:h,isLoading:D}=sa("membership"),{data:l,isLoading:N}=sa("training"),o=Xr(),M=Ot(),u=Oe({resolver:Be(Wi),defaultValues:{startDate:new Date().toISOString().split("T")[0],discountAmount:0,autoRenew:!1,collectPayment:!1,addTraining:!1,trainingDiscountAmount:0}}),y=u.watch("planTypeId"),d=u.watch("planVariantId"),T=u.watch("memberId"),b=u.watch("discountAmount")||0,f=u.watch("collectPayment"),j=u.watch("startDate"),R=u.watch("addTraining"),E=u.watch("trainingPlanTypeId"),G=u.watch("trainingPlanVariantId"),X=i.useMemo(()=>R?[...Ws.slice(0,3),Ji,Ws[3]]:[...Ws],[R]),{data:K,isLoading:C}=Ms(y,!1),{data:$,isLoading:ce}=Ms(E||"",!1),{data:U}=Jr(T||""),oe=U==null?void 0:U.data,H=(c==null?void 0:c.data)??[],ie=i.useMemo(()=>{if(!r.trim())return H;const x=r.toLowerCase();return H.filter(Z=>Z.firstName.toLowerCase().includes(x)||Z.lastName.toLowerCase().includes(x)||Z.email.toLowerCase().includes(x)||Z.phone.includes(x))},[H,r]),Y=H.find(x=>x.id===T),Fe=h==null?void 0:h.find(x=>x.id===y),z=K==null?void 0:K.find(x=>x.id===d),me=z?Math.max(0,z.price-b):0,g=$==null?void 0:$.find(x=>x.id===G),J=i.useMemo(()=>{if(!j||!z)return null;const x=new Date(j);return x.setDate(x.getDate()+z.durationDays),x.toISOString().split("T")[0]},[j,z]),ye=(ha=X[t])==null?void 0:ha.id,_e=()=>{switch(ye){case"member":return!!T;case"plan":return!!y&&!!d;case"details":return!!j;case"training":return!!E&&!!G&&!!u.watch("trainerName");case"payment":return!0;default:return!1}},bs=()=>{t<X.length-1&&_e()&&n(x=>x+1)},Yt=()=>{t>0&&n(x=>x-1)},Wt=x=>{u.setValue("addTraining",x),x||(ye==="training"&&n(Z=>Z-1),ye==="payment"&&t===4&&n(3),u.setValue("trainingPlanTypeId",""),u.setValue("trainingPlanVariantId",""),u.setValue("trainerName",""),u.setValue("trainingDiscountAmount",0),u.setValue("trainingNotes",""))},Hs=o.isPending||M.isPending,Jt=x=>{const Z={memberId:x.memberId,planVariantId:x.planVariantId,startDate:x.startDate,discountAmount:x.discountAmount||0,autoRenew:x.autoRenew,notes:x.notes};x.collectPayment&&x.paymentAmount&&x.paymentMethod&&(Z.paymentAmount=x.paymentAmount,Z.paymentMethod=x.paymentMethod,Z.paymentReference=x.paymentReference,Z.paymentNotes=x.paymentNotes),o.mutate(Z,{onSuccess:()=>{if(x.addTraining&&x.trainingPlanVariantId&&x.trainerName){const Gs={memberId:x.memberId,planVariantId:x.trainingPlanVariantId,trainerName:x.trainerName,startDate:x.startDate,discountAmount:x.trainingDiscountAmount||0,notes:x.trainingNotes};M.mutate(Gs,{onSuccess:()=>{u.reset(),s==null||s()}})}else u.reset(),s==null||s()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("nav",{"aria-label":"Progress",className:"px-6 pt-6",children:e.jsx("ol",{className:"flex items-center",children:X.map((x,Z)=>{const Gs=x.icon,ys=Z<t,Na=Z===t;return e.jsxs("li",{className:`flex items-center ${Z<X.length-1?"flex-1":""}`,children:[e.jsxs("button",{type:"button",onClick:()=>{Z<t&&n(Z)},disabled:Z>t,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${Na?"bg-primary text-primary-foreground":ys?"bg-primary/10 text-primary hover:bg-primary/20":"text-muted-foreground"}`,children:[e.jsx("span",{className:`flex h-7 w-7 items-center justify-center rounded-full ${Na?"bg-primary-foreground/20":ys?"bg-primary/20":"bg-muted"}`,children:ys?e.jsx(ue,{className:"h-4 w-4"}):e.jsx(Gs,{className:"h-4 w-4"})}),e.jsx("span",{className:"hidden sm:inline",children:x.label})]}),Z<X.length-1&&e.jsx("div",{className:`mx-2 hidden h-px flex-1 sm:block ${ys?"bg-primary":"bg-border"}`})]},x.id)})})}),e.jsx(te,{}),e.jsxs("form",{onSubmit:u.handleSubmit(Jt),children:[ye==="member"&&e.jsxs("div",{className:"space-y-4 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select a Member"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the member who will receive this membership."})]}),e.jsx(q,{placeholder:"Search by name, email, or phone...",value:r,onChange:x=>m(x.target.value)}),w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):ie.length===0?e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No members found. Try a different search term."}):e.jsx("div",{className:"grid gap-2 max-h-[400px] overflow-y-auto pr-1",children:ie.map(x=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${T===x.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>u.setValue("memberId",x.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold",children:[x.firstName[0],x.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[x.firstName," ",x.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:x.isActive?"default":"secondary",children:x.isActive?"Active":"Inactive"}),T===x.id&&e.jsx(ue,{className:"h-5 w-5 text-primary"})]})]})},x.id))}),u.formState.errors.memberId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.memberId.message}),T&&oe&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-900 dark:bg-amber-950/30",children:[e.jsx(ra,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-400",children:"This member already has an active membership"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-500 mt-0.5",children:[(ga=(pa=oe.planVariant)==null?void 0:pa.planType)==null?void 0:ga.name," -"," ",(fa=oe.planVariant)==null?void 0:fa.durationLabel," (expires"," ",new Date(oe.endDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),"). Creating another will result in overlapping memberships."]})]})]})]}),ye==="plan"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose a Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a plan type and duration for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[Y==null?void 0:Y.firstName," ",Y==null?void 0:Y.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Plan Type"}),D?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:h==null?void 0:h.map(x=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${y===x.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{u.setValue("planTypeId",x.id),u.setValue("planVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(W,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:x.name}),x.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:x.description})]}),y===x.id&&e.jsx(ue,{className:"h-5 w-5 text-primary shrink-0"})]})},x.id))}),u.formState.errors.planTypeId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.planTypeId.message})]}),y&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Duration & Pricing"}),C?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):K&&K.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:K.map(x=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${d===x.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>u.setValue("planVariantId",x.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(P,{className:"inline h-4 w-4"}),x.price.toLocaleString()]}),d===x.id&&e.jsx(ue,{className:"h-5 w-5 text-primary"})]})]})},x.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this plan type."}),u.formState.errors.planVariantId&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.planVariantId.message})]})]}),ye==="details"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Membership Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure start date, discount, and other options."})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"startDate",children:"Start Date *"}),e.jsx(q,{id:"startDate",type:"date",...u.register("startDate")}),u.formState.errors.startDate&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.startDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"End Date"}),e.jsx(q,{type:"date",value:J||"",disabled:!0,className:"bg-muted"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Auto-calculated from plan duration (",z==null?void 0:z.durationDays," days)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"discountAmount",children:"Discount Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"discountAmount",type:"number",min:0,max:(z==null?void 0:z.price)||0,className:"pl-9",...u.register("discountAmount")})]}),u.formState.errors.discountAmount&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.discountAmount.message})]}),z&&e.jsx(A,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3 w-3"}),z.price.toLocaleString()]})]}),b>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(P,{className:"inline h-3 w-3"}),b.toLocaleString()]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Final Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3.5 w-3.5"}),me.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"autoRenew",checked:u.watch("autoRenew"),onCheckedChange:x=>u.setValue("autoRenew",x===!0)}),e.jsx(S,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew membership when it expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...u.register("notes"),placeholder:"Any additional notes about this membership...",rows:3})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"addTraining",className:"text-sm font-medium",children:"Also assign training"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optionally assign a personal training plan along with this membership."})]}),e.jsx(Gt,{id:"addTraining",checked:R,onCheckedChange:Wt})]})]}),ye==="training"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Training Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a training plan and assign a trainer for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[Y==null?void 0:Y.firstName," ",Y==null?void 0:Y.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"trainerName",children:"Trainer Name *"}),e.jsx(q,{id:"trainerName",placeholder:"Enter trainer name",...u.register("trainerName")}),u.formState.errors.trainerName&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.trainerName.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Training Plan Type"}),N?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):l&&l.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:l.map(x=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${E===x.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{u.setValue("trainingPlanTypeId",x.id),u.setValue("trainingPlanVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(W,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:x.name}),x.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:x.description})]}),E===x.id&&e.jsx(ue,{className:"h-5 w-5 text-primary shrink-0"})]})},x.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No training plan types available. Please create a training plan type first."})]}),E&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Duration & Pricing"}),ce?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):$&&$.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:$.map(x=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${G===x.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>u.setValue("trainingPlanVariantId",x.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(P,{className:"inline h-4 w-4"}),x.price.toLocaleString()]}),G===x.id&&e.jsx(ue,{className:"h-5 w-5 text-primary"})]})]})},x.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this training plan type."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"trainingDiscountAmount",children:"Training Discount"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"trainingDiscountAmount",type:"number",min:0,max:(g==null?void 0:g.price)||0,className:"pl-9",...u.register("trainingDiscountAmount")})]})]}),g&&e.jsx(A,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3 w-3"}),g.price.toLocaleString()]})]}),(u.watch("trainingDiscountAmount")||0)>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(P,{className:"inline h-3 w-3"}),(u.watch("trainingDiscountAmount")||0).toLocaleString()]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Training Final Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3.5 w-3.5"}),Math.max(0,g.price-(u.watch("trainingDiscountAmount")||0)).toLocaleString()]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"trainingNotes",children:"Training Notes"}),e.jsx(Ne,{id:"trainingNotes",...u.register("trainingNotes"),placeholder:"Any additional notes about this training...",rows:2})]})]}),ye==="payment"&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optionally record an initial payment for this membership."})]}),e.jsx(A,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Membership Summary"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Member: "}),e.jsxs("span",{className:"font-medium",children:[Y==null?void 0:Y.firstName," ",Y==null?void 0:Y.lastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan: "}),e.jsxs("span",{className:"font-medium",children:[Fe==null?void 0:Fe.name," - ",z==null?void 0:z.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration: "}),e.jsxs("span",{className:"font-medium",children:[j," to ",J]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Due: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(P,{className:"inline h-3 w-3"}),me.toLocaleString()]})]})]}),R&&g&&e.jsxs(e.Fragment,{children:[e.jsx(te,{}),e.jsx("h4",{className:"font-semibold text-sm",children:"Training"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trainer: "}),e.jsx("span",{className:"font-medium",children:u.watch("trainerName")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Plan: "}),e.jsxs("span",{className:"font-medium",children:[(ja=l==null?void 0:l.find(x=>x.id===E))==null?void 0:ja.name," - ",g.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Training Amount: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(P,{className:"inline h-3 w-3"}),Math.max(0,g.price-(u.watch("trainingDiscountAmount")||0)).toLocaleString()]})]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"collectPayment",checked:f,onCheckedChange:x=>u.setValue("collectPayment",x===!0)}),e.jsx(S,{htmlFor:"collectPayment",className:"text-sm font-normal",children:"Record initial payment now"})]}),f&&e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentAmount",children:"Payment Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"paymentAmount",type:"number",min:0,className:"pl-9",defaultValue:me,...u.register("paymentAmount")})]}),u.formState.errors.paymentAmount&&e.jsx("p",{className:"text-sm text-destructive",children:u.formState.errors.paymentAmount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentMethod",children:"Payment Method *"}),e.jsxs(ls,{value:u.watch("paymentMethod")||"",onValueChange:x=>u.setValue("paymentMethod",x),children:[e.jsx(Je,{id:"paymentMethod",children:e.jsx(ds,{placeholder:"Select method"})}),e.jsx(Xe,{children:Xi.map(x=>e.jsx(fe,{value:x.value,children:x.label},x.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentReference",children:"Payment Reference / Transaction ID"}),e.jsx(q,{id:"paymentReference",...u.register("paymentReference"),placeholder:"e.g., UPI transaction ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentNotes",children:"Payment Notes"}),e.jsx(Ne,{id:"paymentNotes",...u.register("paymentNotes"),placeholder:"Any notes about this payment...",rows:2})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[e.jsx("div",{children:t>0?e.jsxs(v,{type:"button",variant:"outline",onClick:Yt,children:[e.jsx(Nt,{className:"mr-1 h-4 w-4"}),"Back"]}):a?e.jsx(v,{type:"button",variant:"outline",onClick:a,disabled:Hs,children:"Cancel"}):e.jsx("div",{})}),e.jsx("div",{children:t<X.length-1?e.jsxs(v,{type:"button",onClick:bs,disabled:!_e(),children:["Next",e.jsx(Fs,{className:"ml-1 h-4 w-4"})]}):e.jsx(v,{type:"submit",disabled:Hs,children:Hs?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):R?"Create Membership & Training":"Create Membership"})})]})]})]})}function el(){const s=ze(),a=()=>{s(L.MEMBERSHIPS)},t=()=>{s(L.MEMBERSHIPS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Create New Membership",description:"Assign a membership plan to a member with optional payment recording."}),e.jsx(A,{className:"max-w-4xl",children:e.jsx(Zi,{onSuccess:a,onCancel:t})})]})}const sl=qe({amount:Ve().positive("Amount must be greater than 0"),method:I().min(1,"Payment method is required"),reference:I().optional(),notes:I().optional()}),al=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function tl({open:s,onOpenChange:a,memberId:t,membershipId:n,dueAmount:r}){const m=ni(),c=Oe({resolver:Be(sl),defaultValues:{amount:r>0?r:void 0,method:"",reference:"",notes:""}}),w=h=>{m.mutate({memberId:t,membershipId:n,amount:h.amount,method:h.method,reference:h.reference,notes:h.notes},{onSuccess:()=>{c.reset(),a(!1)}})};return e.jsx(Us,{open:s,onOpenChange:a,children:e.jsxs(ps,{className:"sm:max-w-md",children:[e.jsxs(gs,{children:[e.jsx(fs,{children:"Record Payment"}),e.jsxs(js,{children:["Outstanding balance:"," ",e.jsxs("span",{className:"font-semibold text-foreground",children:[e.jsx(P,{className:"inline h-3 w-3"}),r.toLocaleString()]})]})]}),e.jsxs("form",{onSubmit:c.handleSubmit(w),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"amount",children:"Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"amount",type:"number",min:1,max:r,className:"pl-9",placeholder:"Enter amount",...c.register("amount")})]}),c.formState.errors.amount&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.amount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"method",children:"Payment Method *"}),e.jsxs(ls,{value:c.watch("method")||"",onValueChange:h=>c.setValue("method",h),children:[e.jsx(Je,{id:"method",children:e.jsx(ds,{placeholder:"Select method"})}),e.jsx(Xe,{children:al.map(h=>e.jsx(fe,{value:h.value,children:h.label},h.value))})]}),c.formState.errors.method&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.method.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"reference",children:"Reference / Transaction ID"}),e.jsx(q,{id:"reference",...c.register("reference"),placeholder:"e.g., UPI ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...c.register("notes"),placeholder:"Any notes about this payment...",rows:2})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:m.isPending,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),"Recording..."]}):"Record Payment"})]})]})]})})}const nl=qe({endDate:I().min(1,"End date is required"),autoRenew:Re(),notes:I().optional()});function rl({open:s,onOpenChange:a,membership:t}){const n=Zr(),r=Oe({resolver:Be(nl),defaultValues:{endDate:t.endDate.split("T")[0],autoRenew:t.autoRenew,notes:t.notes||""}}),m=c=>{n.mutate({id:t.id,data:{endDate:c.endDate,autoRenew:c.autoRenew,notes:c.notes||void 0}},{onSuccess:()=>{a(!1)}})};return e.jsx(Us,{open:s,onOpenChange:a,children:e.jsxs(ps,{className:"sm:max-w-md",children:[e.jsxs(gs,{children:[e.jsx(fs,{children:"Edit Membership"}),e.jsx(js,{children:"Update end date, auto-renew, and notes. Plan and pricing cannot be changed."})]}),e.jsxs("form",{onSubmit:r.handleSubmit(m),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"endDate",children:"End Date"}),e.jsx(q,{id:"endDate",type:"date",...r.register("endDate")}),r.formState.errors.endDate&&e.jsx("p",{className:"text-sm text-destructive",children:r.formState.errors.endDate.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"autoRenew",checked:r.watch("autoRenew"),onCheckedChange:c=>r.setValue("autoRenew",c===!0)}),e.jsx(S,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew when membership expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...r.register("notes"),placeholder:"Any notes about this membership...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:n.isPending,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:n.isPending,children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}const il={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},Aa={paid:{label:"Paid",variant:"default"},pending:{label:"Pending",variant:"outline"},failed:{label:"Failed",variant:"destructive"},refunded:{label:"Refunded",variant:"secondary"}},Da={cash:"Cash",card:"Card",upi:"UPI",bank_transfer:"Bank Transfer",other:"Other"};function ws(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Ma(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function ll(){var oe,H,ie,Y,Fe;const{id:s}=bt(),a=ze(),[t,n]=i.useState(!1),[r,m]=i.useState(!1),[c,w]=i.useState(!1),[h,D]=i.useState(!1),[l,N]=i.useState(!1),{data:o,isLoading:M}=Wr(s),{data:u,isLoading:y}=ti(s),d=ei(),T=si(),b=ai(),f=o==null?void 0:o.data,j=u==null?void 0:u.data;if(M)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{className:"h-10 w-64"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsx(k,{className:"h-48 lg:col-span-2"}),e.jsx(k,{className:"h-48"})]}),e.jsx(k,{className:"h-64"})]});if(!f)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Membership Not Found"}),e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center py-12",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The membership you're looking for doesn't exist."}),e.jsx(v,{onClick:()=>a(L.MEMBERSHIPS),children:"Back to Memberships"})]})})]});const R=il[f.status],E=f.member?`${f.member.firstName} ${f.member.lastName}`:"Unknown",G=((H=(oe=f.planVariant)==null?void 0:oe.planType)==null?void 0:H.name)??"N/A",X=((ie=f.planVariant)==null?void 0:ie.durationLabel)??"",K=j&&j.finalPrice>0?Math.min(100,Math.round(j.totalPaid/j.finalPrice*100)):0,C=f.status!=="cancelled",$=f.status==="active",ce=f.status==="frozen",U=f.status==="active"||f.status==="frozen";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Membership Details",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",onClick:()=>a(L.MEMBERSHIPS),children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Back"]}),C&&e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"outline",size:"icon",children:e.jsx(ks,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(re,{onClick:()=>m(!0),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),$&&e.jsxs(re,{onClick:()=>D(!0),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Freeze Membership"]}),ce&&e.jsxs(re,{onClick:()=>N(!0),children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Unfreeze Membership"]}),U&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{}),e.jsxs(re,{className:"text-destructive focus:text-destructive",onClick:()=>w(!0),children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Cancel Membership"]})]})]})]})]})}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(A,{className:"lg:col-span-2",children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(de,{className:"text-lg",children:"Membership Info"}),e.jsx(Q,{variant:R.variant,children:R.label})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(He,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member"}),e.jsx("p",{className:"font-medium",children:E}),((Y=f.member)==null?void 0:Y.email)&&e.jsx("p",{className:"text-xs text-muted-foreground",children:f.member.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(W,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("p",{className:"font-medium",children:G}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[X," (",(Fe=f.planVariant)==null?void 0:Fe.durationDays," ","days)"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(We,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[ws(f.startDate)," -"," ",ws(f.endDate)]}),f.autoRenew&&e.jsx("p",{className:"text-xs text-emerald-600",children:"Auto-renew on"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(P,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),f.finalPrice.toLocaleString()]}),f.discountAmount>0&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",e.jsx(P,{className:"inline h-2.5 w-2.5"}),f.priceAtPurchase.toLocaleString()," -"," ",e.jsx(P,{className:"inline h-2.5 w-2.5"}),f.discountAmount.toLocaleString()," discount)"]})]})]})]})]}),f.notes&&e.jsxs(e.Fragment,{children:[e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm",children:f.notes})]})]})]})]}),e.jsxs(A,{children:[e.jsxs(ee,{children:[e.jsx(de,{className:"text-lg",children:"Payment Status"}),e.jsx(Ze,{children:y?"Loading...":j!=null&&j.isFullyPaid?"Fully paid":"Outstanding balance"})]}),e.jsx(V,{children:y?e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{className:"h-4 w-full"}),e.jsx(k,{className:"h-8 w-24"}),e.jsx(k,{className:"h-4 w-full"})]}):j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[K,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${j.isFullyPaid?"bg-emerald-500":K>50?"bg-primary":"bg-amber-500"}`,style:{width:`${K}%`}})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),j.finalPrice.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-emerald-600",children:[e.jsx("span",{children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),j.totalPaid.toLocaleString()]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:j.isFullyPaid?"text-emerald-600":"text-amber-600",children:j.isFullyPaid?"Fully Paid":"Balance Due"}),e.jsxs("span",{className:j.isFullyPaid?"text-emerald-600":"text-amber-600",children:[e.jsx(P,{className:"inline h-3 w-3"}),j.dueAmount.toLocaleString()]})]})]}),!j.isFullyPaid&&f.status!=="cancelled"&&e.jsxs(v,{className:"w-full",onClick:()=>n(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Record Payment"]}),j.isFullyPaid&&e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-emerald-50 p-3 text-sm font-medium text-emerald-700 dark:bg-emerald-950/30 dark:text-emerald-400",children:[e.jsx(ns,{className:"h-4 w-4"}),"All dues cleared"]})]}):null})]})]}),e.jsxs(A,{children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-lg",children:"Payment History"}),e.jsx(Ze,{children:"All payments recorded against this membership"})]}),j&&!j.isFullyPaid&&f.status!=="cancelled"&&e.jsxs(v,{size:"sm",onClick:()=>n(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Payment"]})]})}),e.jsx(V,{children:y?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((z,me)=>e.jsx(k,{className:"h-12 w-full"},me))}):j&&j.payments.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{children:[e.jsx(O,{children:"Date"}),e.jsx(O,{children:"Amount"}),e.jsx(O,{children:"Method"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Reference"}),e.jsx(O,{children:"Notes"})]})}),e.jsx(Ye,{children:j.payments.map(z=>{const me=Aa[z.status];return e.jsxs(he,{children:[e.jsx(B,{className:"text-sm",children:z.paidAt?Ma(z.paidAt):Ma(z.createdAt)}),e.jsxs(B,{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),z.amount.toLocaleString()]}),e.jsx(B,{children:Da[z.method]||z.method}),e.jsx(B,{children:e.jsx(Q,{variant:me.variant,children:me.label})}),e.jsx(B,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:z.reference||"-"}),e.jsx(B,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:z.notes||"-"})]},z.id)})})]})}),e.jsx("div",{className:"space-y-3 sm:hidden",children:j.payments.map(z=>{const me=Aa[z.status];return e.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold inline-flex items-center",children:[e.jsx(P,{className:"h-3.5 w-3.5"}),z.amount.toLocaleString()]}),e.jsx(Q,{variant:me.variant,children:me.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:Da[z.method]||z.method}),e.jsx("span",{children:z.paidAt?ws(z.paidAt):ws(z.createdAt)})]}),z.reference&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ref: ",z.reference]})]},z.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(le,{className:"h-8 w-8 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No payments recorded yet"}),j&&!j.isFullyPaid&&f.status!=="cancelled"&&e.jsxs(v,{size:"sm",variant:"outline",onClick:()=>n(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Record First Payment"]})]})})]}),f&&j&&e.jsx(tl,{open:t,onOpenChange:n,memberId:f.memberId,membershipId:f.id,dueAmount:j.dueAmount}),f&&r&&e.jsx(rl,{open:r,onOpenChange:m,membership:f}),e.jsx(Ie,{open:c,onOpenChange:w,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Cancel this membership?"}),e.jsxs(ke,{children:["This will permanently cancel"," ",e.jsx("span",{className:"font-medium text-foreground",children:E}),"'s ",G," membership. This action cannot be undone. If the wrong plan was selected, cancel this and create a new membership."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Keep Membership"}),e.jsx(Ae,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>d.mutate(f.id),disabled:d.isPending,children:d.isPending?"Cancelling...":"Yes, Cancel Membership"})]})]})}),e.jsx(Ie,{open:h,onOpenChange:D,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Freeze this membership?"}),e.jsxs(ke,{children:["Freezing will temporarily pause"," ",e.jsx("span",{className:"font-medium text-foreground",children:E}),"'s membership. The member won't have active access until it's unfrozen. You can unfreeze it anytime."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>T.mutate(f.id),disabled:T.isPending,children:T.isPending?"Freezing...":"Yes, Freeze Membership"})]})]})}),e.jsx(Ie,{open:l,onOpenChange:N,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Unfreeze this membership?"}),e.jsxs(ke,{children:["This will reactivate"," ",e.jsx("span",{className:"font-medium text-foreground",children:E}),"'s membership and restore their access."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>b.mutate(f.id),disabled:b.isPending,children:b.isPending?"Unfreezing...":"Yes, Unfreeze Membership"})]})]})})]})}const Qt={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},Pa=[{value:"all",label:"All Trainings",icon:W},{value:"active",label:"Active",icon:ns},{value:"expired",label:"Expired",icon:us},{value:"cancelled",label:"Cancelled",icon:qs},{value:"frozen",label:"Frozen",icon:Os}],dl=[{key:"total",label:"Total Trainings",shortLabel:"Total",icon:W,colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-50 dark:bg-blue-950/50"},{key:"active",label:"Active Trainings",shortLabel:"Active",icon:ns,colorClass:"text-emerald-600 dark:text-emerald-400",bgClass:"bg-emerald-50 dark:bg-emerald-950/50"},{key:"expired",label:"Expired",shortLabel:"Expired",icon:us,colorClass:"text-amber-600 dark:text-amber-400",bgClass:"bg-amber-50 dark:bg-amber-950/50"},{key:"newThisMonth",label:"New This Month",shortLabel:"New",icon:$s,colorClass:"text-violet-600 dark:text-violet-400",bgClass:"bg-violet-50 dark:bg-violet-950/50"}];function Ts(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function cl({training:s,onClick:a}){var c,w,h;const t=Qt[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((w=(c=s.planVariant)==null?void 0:c.planType)==null?void 0:w.name)??"N/A",m=((h=s.planVariant)==null?void 0:h.durationLabel)??"";return e.jsxs(he,{className:"cursor-pointer hover:bg-muted/50",onClick:a,children:[e.jsx(B,{className:"font-medium",children:n}),e.jsx(B,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m})]})}),e.jsx(B,{children:s.trainerName}),e.jsx(B,{children:e.jsx(Q,{variant:t.variant,children:t.label})}),e.jsx(B,{className:"hidden md:table-cell",children:Ts(s.startDate)}),e.jsx(B,{className:"hidden md:table-cell",children:Ts(s.endDate)}),e.jsx(B,{className:"text-right",children:e.jsxs("span",{className:"inline-flex items-center font-medium",children:[e.jsx(P,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})})]})}function ol({training:s,onClick:a}){var c,w,h;const t=Qt[s.status],n=s.member?`${s.member.firstName} ${s.member.lastName}`:"Unknown",r=((w=(c=s.planVariant)==null?void 0:c.planType)==null?void 0:w.name)??"N/A",m=((h=s.planVariant)==null?void 0:h.durationLabel)??"";return e.jsx(A,{className:"cursor-pointer transition-shadow hover:shadow-md",onClick:a,children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r," - ",m]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Trainer: ",s.trainerName]})]}),e.jsx(Q,{variant:t.variant,children:t.label})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(We,{className:"h-3.5 w-3.5"}),Ts(s.startDate)," - ",Ts(s.endDate)]}),e.jsxs("span",{className:"inline-flex items-center font-semibold",children:[e.jsx(P,{className:"h-3 w-3"}),s.finalPrice.toLocaleString()]})]})]})})}function ml(){var y;const s=ze(),[a,t]=i.useState("all"),[n,r]=i.useState(""),{data:m,isLoading:c}=ii(),{data:w,isLoading:h}=qt(),D=(m==null?void 0:m.data)??[],l=w==null?void 0:w.data,N=n.toLowerCase(),o=D.filter(d=>{var R,E;if(!(a==="all"||d.status===a))return!1;if(!n)return!0;const b=d.member?`${d.member.firstName} ${d.member.lastName}`.toLowerCase():"",f=(((E=(R=d.planVariant)==null?void 0:R.planType)==null?void 0:E.name)??"").toLowerCase(),j=d.trainerName.toLowerCase();return b.includes(N)||f.includes(N)||j.includes(N)}),M=a!=="all"||!!n,u=((y=Pa.find(d=>d.value===a))==null?void 0:y.label)??"Filter";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Trainings",description:"Manage personal training assignments",actions:e.jsxs(v,{onClick:()=>s(L.CREATE_TRAINING),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"New Training"]})}),e.jsx("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 lg:gap-4",children:h?Array.from({length:4}).map((d,T)=>e.jsxs(A,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-8 w-8 rounded-lg shrink-0"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(k,{className:"h-3 w-14"}),e.jsx(k,{className:"h-5 w-10"})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"h-4 w-24"}),e.jsx(k,{className:"h-8 w-8 rounded-lg"})]}),e.jsxs(V,{children:[e.jsx(k,{className:"h-8 w-16 mb-1"}),e.jsx(k,{className:"h-3 w-20"})]})]})]},T)):l?dl.map(({key:d,label:T,shortLabel:b,icon:f,colorClass:j,bgClass:R})=>{const E=l[d],G=l.total>0&&d!=="total"&&d!=="newThisMonth"?Math.round(E/l.total*100):null;return e.jsxs(A,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[e.jsx("div",{className:"p-3 lg:hidden",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`rounded-lg p-2 shrink-0 ${R}`,children:e.jsx(f,{className:`h-4 w-4 ${j}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-muted-foreground leading-tight truncate",children:b}),e.jsx("p",{className:"text-lg font-bold leading-tight tracking-tight",children:E})]})]})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-muted-foreground",children:T}),e.jsx("div",{className:`rounded-lg p-2 ${R}`,children:e.jsx(f,{className:`h-4 w-4 ${j}`})})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight",children:E}),G!==null&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[G,"% of total"]}),d==="newThisMonth"&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Created this month"})]})]})]},d)}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),e.jsx(q,{type:"text",placeholder:"Search by member, plan, or trainer...",value:n,onChange:d=>r(d.target.value),className:"pl-9 pr-8 h-9"}),n&&e.jsx("button",{onClick:()=>r(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(ts,{className:"h-3.5 w-3.5"})})]}),e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"h-9 gap-2 shrink-0",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="all"?"Filter":u}),a!=="all"&&e.jsx(Q,{variant:"secondary",className:"h-5 min-w-[20px] px-1 flex items-center justify-center rounded-full text-[10px] font-bold",children:"1"})]})}),e.jsxs(be,{align:"end",className:"w-48",children:[e.jsx(rs,{children:"Filter by status"}),e.jsx(Le,{}),e.jsx(Bs,{value:a,onValueChange:d=>t(d),children:Pa.map(({value:d,label:T,icon:b})=>e.jsxs(hs,{value:d,className:"gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),T]},d))})]})]}),M&&e.jsx(v,{variant:"ghost",size:"sm",className:"h-9 text-xs text-muted-foreground shrink-0",onClick:()=>{r(""),t("all")},children:"Reset"}),!c&&e.jsxs("p",{className:"text-sm text-muted-foreground ml-auto hidden sm:block tabular-nums",children:[e.jsx("span",{className:"font-medium text-foreground",children:o.length})," ",o.length===1?"training":"trainings"]})]}),c?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((d,T)=>e.jsx(k,{className:"h-16 w-full rounded-lg"},T))}):o.length===0?e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:e.jsx(W,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-1",children:M?"No trainings match your filters":"No trainings yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:M?"Try adjusting your search or filter criteria.":"Create a training to assign a trainer and plan to a member."}),M?e.jsx(v,{variant:"outline",onClick:()=>{r(""),t("all")},children:"Clear Filters"}):e.jsxs(v,{onClick:()=>s(L.CREATE_TRAINING),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create First Training"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(A,{children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{children:[e.jsx(O,{children:"Member"}),e.jsx(O,{children:"Plan"}),e.jsx(O,{children:"Trainer"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Start Date"}),e.jsx(O,{children:"End Date"}),e.jsx(O,{className:"text-right",children:"Amount"})]})}),e.jsx(Ye,{children:o.map(d=>e.jsx(cl,{training:d,onClick:()=>s(`/trainings/${d.id}`)},d.id))})]})})}),e.jsx("div",{className:"space-y-3 md:hidden",children:o.map(d=>e.jsx(ol,{training:d,onClick:()=>s(`/trainings/${d.id}`)},d.id))})]})]})}const xl=qe({memberId:I().min(1,"Please select a member"),planTypeId:I().min(1,"Please select a plan type"),planVariantId:I().min(1,"Please select a plan variant"),trainerName:I().min(1,"Trainer name is required"),startDate:I().min(1,"Start date is required"),discountAmount:Ve().min(0,"Discount cannot be negative").default(0),autoRenew:Re().default(!1),notes:I().optional(),collectPayment:Re().default(!1),paymentAmount:Ve().optional(),paymentMethod:I().optional(),paymentReference:I().optional(),paymentNotes:I().optional()}).refine(s=>s.collectPayment?!!s.paymentMethod&&(s.paymentAmount??0)>0:!0,{message:"Payment amount and method are required when collecting payment",path:["paymentAmount"]}),cs=[{id:"member",label:"Select Member",icon:He},{id:"plan",label:"Choose Plan",icon:W},{id:"details",label:"Details",icon:We},{id:"payment",label:"Payment",icon:le}],ul=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"},{value:"other",label:"Other"}];function hl({onSuccess:s,onCancel:a,preselectedMemberId:t}){var Fe,z,me;const[n,r]=i.useState(t?1:0),[m,c]=i.useState(""),{data:w,isLoading:h}=xa(),{data:D,isLoading:l}=sa("training"),N=Ot(),o=Oe({resolver:Be(xl),defaultValues:{memberId:t||"",startDate:new Date().toISOString().split("T")[0],discountAmount:0,autoRenew:!1,collectPayment:!1,trainerName:""}}),M=o.watch("planTypeId"),u=o.watch("planVariantId"),y=o.watch("memberId"),d=o.watch("discountAmount")||0,T=o.watch("collectPayment"),b=o.watch("startDate"),{data:f,isLoading:j}=Ms(M,!1),{data:R}=di(y||""),E=R==null?void 0:R.data,G=(w==null?void 0:w.data)??[],X=i.useMemo(()=>{if(!m.trim())return G;const g=m.toLowerCase();return G.filter(J=>J.firstName.toLowerCase().includes(g)||J.lastName.toLowerCase().includes(g)||J.email.toLowerCase().includes(g)||J.phone.includes(g))},[G,m]),K=G.find(g=>g.id===y),C=D==null?void 0:D.find(g=>g.id===M),$=f==null?void 0:f.find(g=>g.id===u),ce=$?Math.max(0,$.price-d):0,U=i.useMemo(()=>{if(!b||!$)return null;const g=new Date(b);return g.setDate(g.getDate()+$.durationDays),g.toISOString().split("T")[0]},[b,$]),oe=()=>{switch(n){case 0:return!!y;case 1:return!!M&&!!u;case 2:return!!b&&!!o.watch("trainerName");case 3:return!0;default:return!1}},H=()=>{n<cs.length-1&&oe()&&r(g=>g+1)},ie=()=>{n>0&&r(g=>g-1)},Y=g=>{const J={memberId:g.memberId,planVariantId:g.planVariantId,trainerName:g.trainerName,startDate:g.startDate,discountAmount:g.discountAmount||0,autoRenew:g.autoRenew,notes:g.notes};g.collectPayment&&g.paymentAmount&&g.paymentMethod&&(J.paymentAmount=g.paymentAmount,J.paymentMethod=g.paymentMethod,J.paymentReference=g.paymentReference,J.paymentNotes=g.paymentNotes),N.mutate(J,{onSuccess:()=>{o.reset(),s==null||s()}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("nav",{"aria-label":"Progress",className:"px-6 pt-6",children:e.jsx("ol",{className:"flex items-center",children:cs.map((g,J)=>{const ye=g.icon,_e=J<n,bs=J===n;return e.jsxs("li",{className:`flex items-center ${J<cs.length-1?"flex-1":""}`,children:[e.jsxs("button",{type:"button",onClick:()=>{J<n&&r(J)},disabled:J>n,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${bs?"bg-primary text-primary-foreground":_e?"bg-primary/10 text-primary hover:bg-primary/20":"text-muted-foreground"}`,children:[e.jsx("span",{className:`flex h-7 w-7 items-center justify-center rounded-full ${bs?"bg-primary-foreground/20":_e?"bg-primary/20":"bg-muted"}`,children:_e?e.jsx(ue,{className:"h-4 w-4"}):e.jsx(ye,{className:"h-4 w-4"})}),e.jsx("span",{className:"hidden sm:inline",children:g.label})]}),J<cs.length-1&&e.jsx("div",{className:`mx-2 hidden h-px flex-1 sm:block ${_e?"bg-primary":"bg-border"}`})]},g.id)})})}),e.jsx(te,{}),e.jsxs("form",{onSubmit:o.handleSubmit(Y),children:[n===0&&e.jsxs("div",{className:"space-y-4 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Select a Member"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the member who will receive this training."})]}),e.jsx(q,{placeholder:"Search by name, email, or phone...",value:m,onChange:g=>c(g.target.value)}),h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):X.length===0?e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No members found. Try a different search term."}):e.jsx("div",{className:"grid gap-2 max-h-[400px] overflow-y-auto pr-1",children:X.map(g=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${y===g.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>o.setValue("memberId",g.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold",children:[g.firstName[0],g.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[g.firstName," ",g.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:g.isActive?"default":"secondary",children:g.isActive?"Active":"Inactive"}),y===g.id&&e.jsx(ue,{className:"h-5 w-5 text-primary"})]})]})},g.id))}),o.formState.errors.memberId&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.memberId.message}),y&&E&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-amber-200 bg-amber-50 p-3 dark:border-amber-900 dark:bg-amber-950/30",children:[e.jsx(ra,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-400",children:"This member already has an active training"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-500 mt-0.5",children:[(z=(Fe=E.planVariant)==null?void 0:Fe.planType)==null?void 0:z.name," -"," ",(me=E.planVariant)==null?void 0:me.durationLabel," (expires"," ",new Date(E.endDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),"). Creating another will result in overlapping trainings."]})]})]})]}),n===1&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose a Training Plan"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a training plan type and duration for"," ",e.jsxs("span",{className:"font-medium text-foreground",children:[K==null?void 0:K.firstName," ",K==null?void 0:K.lastName]}),"."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Training Plan Type"}),l?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):D&&D.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:D.map(g=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${M===g.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>{o.setValue("planTypeId",g.id),o.setValue("planVariantId","")},children:e.jsxs(V,{className:"flex items-center gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(W,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:g.name}),g.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:g.description})]}),M===g.id&&e.jsx(ue,{className:"h-5 w-5 text-primary shrink-0"})]})},g.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No training plan types available. Please create a training plan type first."}),o.formState.errors.planTypeId&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.planTypeId.message})]}),M&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{className:"text-sm font-medium",children:"Duration & Pricing"}),j?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(xe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):f&&f.length>0?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:f.map(g=>e.jsx(A,{className:`cursor-pointer transition-all hover:border-primary/50 ${u===g.id?"border-primary bg-primary/5 ring-1 ring-primary":""}`,onClick:()=>o.setValue("planVariantId",g.id),children:e.jsxs(V,{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.durationLabel}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.durationDays," days"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[e.jsx(P,{className:"inline h-4 w-4"}),g.price.toLocaleString()]}),u===g.id&&e.jsx(ue,{className:"h-5 w-5 text-primary"})]})]})},g.id))}):e.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No active variants available for this plan type."}),o.formState.errors.planVariantId&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.planVariantId.message})]})]}),n===2&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Training Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure trainer, start date, discount, and other options."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"trainerName",children:"Trainer Name *"}),e.jsx(q,{id:"trainerName",placeholder:"Enter trainer name",...o.register("trainerName")}),o.formState.errors.trainerName&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.trainerName.message})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"startDate",children:"Start Date *"}),e.jsx(q,{id:"startDate",type:"date",...o.register("startDate")}),o.formState.errors.startDate&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.startDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"End Date"}),e.jsx(q,{type:"date",value:U||"",disabled:!0,className:"bg-muted"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Auto-calculated from plan duration (",$==null?void 0:$.durationDays," days)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"discountAmount",children:"Discount Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"discountAmount",type:"number",min:0,max:($==null?void 0:$.price)||0,className:"pl-9",...o.register("discountAmount")})]}),o.formState.errors.discountAmount&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.discountAmount.message})]}),$&&e.jsx(A,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3 w-3"}),$.price.toLocaleString()]})]}),d>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ",e.jsx(P,{className:"inline h-3 w-3"}),d.toLocaleString()]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Final Price"}),e.jsxs("span",{children:[e.jsx(P,{className:"inline h-3.5 w-3.5"}),ce.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"autoRenew",checked:o.watch("autoRenew"),onCheckedChange:g=>o.setValue("autoRenew",g===!0)}),e.jsx(S,{htmlFor:"autoRenew",className:"text-sm font-normal",children:"Auto-renew training when it expires"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ne,{id:"notes",...o.register("notes"),placeholder:"Any additional notes about this training...",rows:3})]})]}),n===3&&e.jsxs("div",{className:"space-y-6 px-6 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Optionally record an initial payment for this training."})]}),e.jsx(A,{className:"bg-muted/50",children:e.jsxs(V,{className:"p-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Training Summary"}),e.jsxs("div",{className:"grid gap-2 text-sm sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Member: "}),e.jsxs("span",{className:"font-medium",children:[K==null?void 0:K.firstName," ",K==null?void 0:K.lastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan: "}),e.jsxs("span",{className:"font-medium",children:[C==null?void 0:C.name," - ",$==null?void 0:$.durationLabel]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trainer: "}),e.jsx("span",{className:"font-medium",children:o.watch("trainerName")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration: "}),e.jsxs("span",{className:"font-medium",children:[b," to ",U]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Due: "}),e.jsxs("span",{className:"font-bold",children:[e.jsx(P,{className:"inline h-3 w-3"}),ce.toLocaleString()]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{id:"collectPayment",checked:T,onCheckedChange:g=>o.setValue("collectPayment",g===!0)}),e.jsx(S,{htmlFor:"collectPayment",className:"text-sm font-normal",children:"Record initial payment now"})]}),T&&e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentAmount",children:"Payment Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{id:"paymentAmount",type:"number",min:0,className:"pl-9",defaultValue:ce,...o.register("paymentAmount")})]}),o.formState.errors.paymentAmount&&e.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.paymentAmount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentMethod",children:"Payment Method *"}),e.jsxs(ls,{value:o.watch("paymentMethod")||"",onValueChange:g=>o.setValue("paymentMethod",g),children:[e.jsx(Je,{id:"paymentMethod",children:e.jsx(ds,{placeholder:"Select method"})}),e.jsx(Xe,{children:ul.map(g=>e.jsx(fe,{value:g.value,children:g.label},g.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentReference",children:"Payment Reference / Transaction ID"}),e.jsx(q,{id:"paymentReference",...o.register("paymentReference"),placeholder:"e.g., UPI transaction ID, cheque number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"paymentNotes",children:"Payment Notes"}),e.jsx(Ne,{id:"paymentNotes",...o.register("paymentNotes"),placeholder:"Any notes about this payment...",rows:2})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[e.jsx("div",{children:n>0?e.jsxs(v,{type:"button",variant:"outline",onClick:ie,children:[e.jsx(Nt,{className:"mr-1 h-4 w-4"}),"Back"]}):a?e.jsx(v,{type:"button",variant:"outline",onClick:a,disabled:N.isPending,children:"Cancel"}):e.jsx("div",{})}),e.jsx("div",{children:n<cs.length-1?e.jsxs(v,{type:"button",onClick:H,disabled:!oe(),children:["Next",e.jsx(Fs,{className:"ml-1 h-4 w-4"})]}):e.jsx(v,{type:"submit",disabled:N.isPending,children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Training"})})]})]})]})}function pl(){const s=ze(),a=()=>{s(L.TRAININGS)},t=()=>{s(L.TRAININGS)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Create New Training",description:"Assign a training plan to a member with a trainer and optional payment recording."}),e.jsx(A,{className:"max-w-4xl",children:e.jsx(hl,{onSuccess:a,onCancel:t})})]})}const gl={active:{label:"Active",variant:"default"},expired:{label:"Expired",variant:"secondary"},cancelled:{label:"Cancelled",variant:"destructive"},frozen:{label:"Frozen",variant:"outline"}},Ta={paid:{label:"Paid",variant:"default"},pending:{label:"Pending",variant:"outline"},failed:{label:"Failed",variant:"destructive"},refunded:{label:"Refunded",variant:"secondary"}},Fa={cash:"Cash",card:"Card",upi:"UPI",bank_transfer:"Bank Transfer",other:"Other"};function Ss(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}function Ra(s){return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function fl(){var C,$,ce,U,oe;const{id:s}=bt(),a=ze(),[t,n]=i.useState(!1),[r,m]=i.useState(!1),[c,w]=i.useState(!1),{data:h,isLoading:D}=li(s),{data:l,isLoading:N}=xi(s),o=ci(),M=oi(),u=mi(),y=h==null?void 0:h.data,d=l==null?void 0:l.data;if(D)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{className:"h-10 w-64"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsx(k,{className:"h-48 lg:col-span-2"}),e.jsx(k,{className:"h-48"})]}),e.jsx(k,{className:"h-64"})]});if(!y)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Training Not Found"}),e.jsx(A,{children:e.jsxs(V,{className:"flex flex-col items-center py-12",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The training you're looking for doesn't exist."}),e.jsx(v,{onClick:()=>a(L.TRAININGS),children:"Back to Trainings"})]})})]});const T=gl[y.status],b=y.member?`${y.member.firstName} ${y.member.lastName}`:"Unknown",f=(($=(C=y.planVariant)==null?void 0:C.planType)==null?void 0:$.name)??"N/A",j=((ce=y.planVariant)==null?void 0:ce.durationLabel)??"",R=d&&d.finalPrice>0?Math.min(100,Math.round(d.totalPaid/d.finalPrice*100)):0,E=y.status!=="cancelled",G=y.status==="active",X=y.status==="frozen",K=y.status==="active"||y.status==="frozen";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{title:"Training Details",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",onClick:()=>a(L.TRAININGS),children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Back"]}),E&&e.jsxs(Me,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(v,{variant:"outline",size:"icon",children:e.jsx(ks,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[G&&e.jsxs(re,{onClick:()=>m(!0),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Freeze Training"]}),X&&e.jsxs(re,{onClick:()=>w(!0),children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Unfreeze Training"]}),K&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{}),e.jsxs(re,{className:"text-destructive focus:text-destructive",onClick:()=>n(!0),children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Cancel Training"]})]})]})]})]})}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs(A,{className:"lg:col-span-2",children:[e.jsx(ee,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(de,{className:"text-lg",children:"Training Info"}),e.jsx(Q,{variant:T.variant,children:T.label})]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(He,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member"}),e.jsx("p",{className:"font-medium",children:b}),((U=y.member)==null?void 0:U.email)&&e.jsx("p",{className:"text-xs text-muted-foreground",children:y.member.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(W,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("p",{className:"font-medium",children:f}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j," (",(oe=y.planVariant)==null?void 0:oe.durationDays," days)"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(He,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trainer"}),e.jsx("p",{className:"font-medium",children:y.trainerName})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(We,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[Ss(y.startDate)," -"," ",Ss(y.endDate)]}),y.autoRenew&&e.jsx("p",{className:"text-xs text-emerald-600",children:"Auto-renew on"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:e.jsx(P,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),y.finalPrice.toLocaleString()]}),y.discountAmount>0&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",e.jsx(P,{className:"inline h-2.5 w-2.5"}),y.priceAtPurchase.toLocaleString()," -"," ",e.jsx(P,{className:"inline h-2.5 w-2.5"}),y.discountAmount.toLocaleString()," discount)"]})]})]})]})]}),y.notes&&e.jsxs(e.Fragment,{children:[e.jsx(te,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm",children:y.notes})]})]})]})]}),e.jsxs(A,{children:[e.jsxs(ee,{children:[e.jsx(de,{className:"text-lg",children:"Payment Status"}),e.jsx(Ze,{children:N?"Loading...":d!=null&&d.isFullyPaid?"Fully paid":"Outstanding balance"})]}),e.jsx(V,{children:N?e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{className:"h-4 w-full"}),e.jsx(k,{className:"h-8 w-24"}),e.jsx(k,{className:"h-4 w-full"})]}):d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[R,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${d.isFullyPaid?"bg-emerald-500":R>50?"bg-primary":"bg-amber-500"}`,style:{width:`${R}%`}})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),d.finalPrice.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-emerald-600",children:[e.jsx("span",{children:"Paid"}),e.jsxs("span",{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),d.totalPaid.toLocaleString()]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:d.isFullyPaid?"text-emerald-600":"text-amber-600",children:d.isFullyPaid?"Fully Paid":"Balance Due"}),e.jsxs("span",{className:d.isFullyPaid?"text-emerald-600":"text-amber-600",children:[e.jsx(P,{className:"inline h-3 w-3"}),d.dueAmount.toLocaleString()]})]})]}),d.isFullyPaid&&e.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg bg-emerald-50 p-3 text-sm font-medium text-emerald-700 dark:bg-emerald-950/30 dark:text-emerald-400",children:[e.jsx(ns,{className:"h-4 w-4"}),"All dues cleared"]})]}):null})]})]}),e.jsxs(A,{children:[e.jsxs(ee,{children:[e.jsx(de,{className:"text-lg",children:"Payment History"}),e.jsx(Ze,{children:"All payments recorded against this training"})]}),e.jsx(V,{children:N?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((H,ie)=>e.jsx(k,{className:"h-12 w-full"},ie))}):d&&d.payments.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Ge,{children:[e.jsx(Qe,{children:e.jsxs(he,{children:[e.jsx(O,{children:"Date"}),e.jsx(O,{children:"Amount"}),e.jsx(O,{children:"Method"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Reference"}),e.jsx(O,{children:"Notes"})]})}),e.jsx(Ye,{children:d.payments.map(H=>{const ie=Ta[H.status];return e.jsxs(he,{children:[e.jsx(B,{className:"text-sm",children:H.paidAt?Ra(H.paidAt):Ra(H.createdAt)}),e.jsxs(B,{className:"font-medium",children:[e.jsx(P,{className:"inline h-3 w-3"}),H.amount.toLocaleString()]}),e.jsx(B,{children:Fa[H.method]||H.method}),e.jsx(B,{children:e.jsx(Q,{variant:ie.variant,children:ie.label})}),e.jsx(B,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:H.reference||"-"}),e.jsx(B,{className:"text-sm text-muted-foreground max-w-[150px] truncate",children:H.notes||"-"})]},H.id)})})]})}),e.jsx("div",{className:"space-y-3 sm:hidden",children:d.payments.map(H=>{const ie=Ta[H.status];return e.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold inline-flex items-center",children:[e.jsx(P,{className:"h-3.5 w-3.5"}),H.amount.toLocaleString()]}),e.jsx(Q,{variant:ie.variant,children:ie.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:Fa[H.method]||H.method}),e.jsx("span",{children:H.paidAt?Ss(H.paidAt):Ss(H.createdAt)})]}),H.reference&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ref: ",H.reference]})]},H.id)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(le,{className:"h-8 w-8 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payments recorded yet"})]})})]}),e.jsx(Ie,{open:t,onOpenChange:n,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Cancel this training?"}),e.jsxs(ke,{children:["This will permanently cancel"," ",e.jsx("span",{className:"font-medium text-foreground",children:b}),"'s ",f," training with ",y.trainerName,". This action cannot be undone."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Keep Training"}),e.jsx(Ae,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>o.mutate(y.id),disabled:o.isPending,children:o.isPending?"Cancelling...":"Yes, Cancel Training"})]})]})}),e.jsx(Ie,{open:r,onOpenChange:m,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Freeze this training?"}),e.jsxs(ke,{children:["Freezing will temporarily pause"," ",e.jsx("span",{className:"font-medium text-foreground",children:b}),"'s training. You can unfreeze it anytime."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>M.mutate(y.id),disabled:M.isPending,children:M.isPending?"Freezing...":"Yes, Freeze Training"})]})]})}),e.jsx(Ie,{open:c,onOpenChange:w,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Unfreeze this training?"}),e.jsxs(ke,{children:["This will reactivate"," ",e.jsx("span",{className:"font-medium text-foreground",children:b}),"'s training sessions."]})]}),e.jsxs(Se,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>u.mutate(y.id),disabled:u.isPending,children:u.isPending?"Unfreezing...":"Yes, Unfreeze Training"})]})]})})]})}const jl=[{element:e.jsx(fr,{}),children:[{element:e.jsx(Ur,{}),children:[{path:"/dashboard",element:e.jsx(gi,{})},{path:"/profile",element:e.jsx(fi,{})},{path:"/members",element:e.jsx(Mi,{})},{path:"/members/register",element:e.jsx(Ri,{})},{path:"/plans",element:e.jsx(Ki,{})},{path:"/memberships",element:e.jsx(Yi,{})},{path:"/memberships/create",element:e.jsx(el,{})},{path:"/memberships/:id",element:e.jsx(ll,{})},{path:"/trainings",element:e.jsx(ml,{})},{path:"/trainings/create",element:e.jsx(pl,{})},{path:"/trainings/:id",element:e.jsx(fl,{})}]}]}],Nl=Yn([...gr,...jl]);function bl(){return e.jsx(Wn,{router:Nl})}Jn(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(sr,{children:e.jsx(tr,{children:e.jsx(bl,{})})})}));
